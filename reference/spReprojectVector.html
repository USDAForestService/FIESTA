<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Spatial - Reprojects an sf spatial object. — spReprojectVector • FIESTA</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatial - Reprojects an sf spatial object. — spReprojectVector"><meta name="description" content="Reprojects an sf spatial object to a new coordinate reference system."><meta property="og:description" content="Reprojects an sf spatial object to a new coordinate reference system."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FIESTA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FIESTA_tutorial_GB.html">Green-book Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_MA.html">Model-Assisted Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_SA.html">Small Area Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_PB.html">Photo-Based Estimators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/FIESTA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Spatial - Reprojects an sf spatial object.</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/master/R/spReprojectVector.R" class="external-link"><code>R/spReprojectVector.R</code></a></small>
      <div class="d-none name"><code>spReprojectVector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reprojects an sf spatial object to a new coordinate reference system.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spReprojectVector</span><span class="op">(</span></span>
<span>  <span class="va">layer</span>,</span>
<span>  dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">crs.new</span>,</span>
<span>  exportsp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata_opts <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>sf class R object or String. The spatial layer must have a
defined projection (test using sf::st_crs(layer)).</p></dd>


<dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>String. Data source name (dsn; i.e., folder or database name) of
splayer. The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html). Optional if layer is an R object.</p></dd>


<dt id="arg-crs-new">crs.new<a class="anchor" aria-label="anchor" href="#arg-crs-new"></a></dt>
<dd><p>EPSG Integer or PROJ.4 String. New EPSG Geodetic Parameter
Dataset definition or gdal PROJ.4 string identifying the new coordinate
system (e.g., "+proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
+towgs84=0,0,0").</p></dd>


<dt id="arg-exportsp">exportsp<a class="anchor" aria-label="anchor" href="#arg-exportsp"></a></dt>
<dd><p>Logical. If TRUE, the spatial reprojected object is exported
to outfolder (see spExportSpatial for details).</p></dd>


<dt id="arg-savedata-opts">savedata_opts<a class="anchor" aria-label="anchor" href="#arg-savedata-opts"></a></dt>
<dd><p>List. See help(savedata_options()) for a list
of options for saving data. If out_layer = NULL, default = 'layerprj'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<dl><dt>layerprj</dt>
<dd><p>sf object. Reprojected spatial layer.</p></dd>


</dl><p>If exportsp = TRUE, a spatial layer is written to outfolder (See note).</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Coordinate Reference Systems (CRS)<br> An ellipse is an estimated model
describing the basic shape of the Earth and is the basis for all coordinate
systems. There are many ellipsoids designed for local (e.g., NAD27) or
global (e.g., WGS84, GRS80) use. The datum defines the reference position of
the coordinate axes associated with a specific ellipsoid. Specifying the
datum also defines the ellipsoid, whereas specifying the ellipsoid does not
provide information of the datum.</p>
<p>WGS84 vs NAD83 WGS84 and NAD83 datums are often used interchangeably, and
use very similar ellipsoids (WGS84 and GRS80, respectively), but have
different reference points. Slight tectonic shifts through time have caused
increased divergence between the two, with NAD83 datum intended to track
movements more consistently.</p>
<p>Common Datums and associated spheroid (ellipsoid):<br> NAD27 - North American
Datum of 1927 (Clarke 1866 spheroid)<br> NAD83 - North American Datum of 1983
(GRS 1980 spheroid)<br> WGS84 - World Geodetic System of 1984 (WGS 1984
spheroid)<br></p>
<p>From R, use projInfo for list of different projections and datums.<br> &gt;
projInfo(type="proj")<br> &gt; projInfo(type="datum")<br></p>
<p>Common EPSG Geodetic codes in U.S.<br> EPSG:4326 - Longitude/Latitude (WGS84)
- Common for global displays (used by Google Earth)<br> EPSG:4269 -
Longitude/Latitude (NAD83) - Common by U.S. Federal Agencies<br></p>
<p>The sf::st_transform (GDAL) method is used for map projection conversion and
datum transformation using PROJ.4 arguments. Datum transformation only
occurs if the +datum tag is present in the both the from and to PROJ.4
strings. The +towgs84 tag is used when no datum transformation is needed.
PROJ.4 transformations assume NAD83 and WGS84 are identical unless other
transformation parameters are specified. Be aware, providing inaccurate or
incomplete CRS information may lead to erroneous data shifts when
reprojecting. See spTransform help documentation for more details.</p>
<p>ESRI Shapefile Driver<br> If exportsp=TRUE:<br> The st_write (sf) function
is called. If out_fmt="shp", the ESRI Shapefile driver truncates variable
names to 10 characters or less. Variable names are changed before export
using an internal function (trunc10shp). If sf object has more than 1
record, it will be returned but not exported.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tracey S. Frescino</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Set up `SpatialPoints` object</span></span></span>
<span class="r-in"><span><span class="va">WYspplt</span> <span class="op">&lt;-</span> <span class="fu"><a href="spMakeSpatialPoints.html">spMakeSpatialPoints</a></span><span class="op">(</span>xyplt <span class="op">=</span> <span class="va">WYplt</span>, </span></span>
<span class="r-in"><span>                               xy.uniqueid <span class="op">=</span> <span class="st">"CN"</span>, </span></span>
<span class="r-in"><span>                               xvar <span class="op">=</span> <span class="st">"LON_PUBLIC"</span>, </span></span>
<span class="r-in"><span>                               yvar <span class="op">=</span> <span class="st">"LAT_PUBLIC"</span>, </span></span>
<span class="r-in"><span>                               xy.crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Check CRS</span></span></span>
<span class="r-in"><span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">WYspplt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coordinate Reference System:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   User input: EPSG:4326 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   wkt:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GEOGCRS["WGS 84",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ENSEMBLE["World Geodetic System 1984 ensemble",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (Transit)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G730)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G873)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G1150)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G1674)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G1762)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         MEMBER["World Geodetic System 1984 (G2139)"],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ELLIPSOID["WGS 84",6378137,298.257223563,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ENSEMBLEACCURACY[2.0]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     PRIMEM["Greenwich",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CS[ellipsoidal,2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["geodetic latitude (Lat)",north,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["geodetic longitude (Lon)",east,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     USAGE[</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         SCOPE["Horizontal component of 3D system."],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AREA["World."],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         BBOX[-90,-180,90,180]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ID["EPSG",4326]]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set up projection</span></span></span>
<span class="r-in"><span><span class="va">prj</span> <span class="op">&lt;-</span> <span class="st">"+proj=utm +zone=12 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use `spReprojectVector` to reproject the vector</span></span></span>
<span class="r-in"><span><span class="va">WYspplt.utm12</span> <span class="op">&lt;-</span> <span class="fu">spReprojectVector</span><span class="op">(</span>layer <span class="op">=</span> <span class="va">WYspplt</span>, </span></span>
<span class="r-in"><span>                                   crs.new <span class="op">=</span> <span class="va">prj</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Check results</span></span></span>
<span class="r-in"><span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">WYspplt.utm12</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Coordinate Reference System:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   User input: +proj=utm +zone=12 +ellps=GRS80 +datum=NAD83 +units=m +no_defs </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   wkt:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PROJCRS["unknown",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     BASEGEOGCRS["unknown",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         DATUM["North American Datum 1983",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ELLIPSOID["GRS 1980",6378137,298.257222101,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 LENGTHUNIT["metre",1]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",6269]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PRIMEM["Greenwich",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8901]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CONVERSION["UTM zone 12N",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         METHOD["Transverse Mercator",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",9807]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Latitude of natural origin",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8801]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Longitude of natural origin",-111,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8802]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["Scale factor at natural origin",0.9996,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             SCALEUNIT["unity",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8805]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["False easting",500000,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8806]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         PARAMETER["False northing",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ID["EPSG",8807]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ID["EPSG",16012]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CS[Cartesian,2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["(E)",east,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 ID["EPSG",9001]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["(N)",north,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 ID["EPSG",9001]]]]</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

