<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Database - Extracts plot coordinates. — DBgetXY • FIESTA</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Database - Extracts plot coordinates. — DBgetXY"><meta name="description" content="Extracts public plot coordinates for an FIA evaluation or a custom
evaluation. Plots are extracted from FIA's public Datamart
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource."><meta property="og:description" content="Extracts public plot coordinates for an FIA evaluation or a custom
evaluation. Plots are extracted from FIA's public Datamart
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FIESTA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.6.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FIESTA_tutorial_GB.html">Green-book Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_MA.html">Model-Assisted Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_SA.html">Small Area Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_PB.html">Photo-Based Estimators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/FIESTA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Database - Extracts plot coordinates.</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/master/R/DBgetXY.R" class="external-link"><code>R/DBgetXY.R</code></a></small>
      <div class="d-none name"><code>DBgetXY.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Extracts public plot coordinates for an FIA evaluation or a custom
evaluation. Plots are extracted from FIA's public Datamart
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">DBgetXY</span><span class="op">(</span></span>
<span>  states <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  RS <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xy_datsource <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xy_dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xy <span class="op">=</span> <span class="st">"PLOT"</span>,</span>
<span>  xy_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/xy_options.html" class="external-link">xy_options</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  datsource <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbTabs <span class="op">=</span> <span class="fu"><a href="dbTables.html">dbTables</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pjoinid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>  eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  invtype <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>  coordType <span class="op">=</span> <span class="st">"PUBLIC"</span>,</span>
<span>  intensity1 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pvars2keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  issp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  returndata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exportsp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  PLOT <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  POP_PLOT_STRATUM_ASSGN <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  SURVEY <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbconn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbconnopen <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  evalInfo <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-states">states<a class="anchor" aria-label="anchor" href="#arg-states"></a></dt>
<dd><p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p></dd>


<dt id="arg-rs">RS<a class="anchor" aria-label="anchor" href="#arg-rs"></a></dt>
<dd><p>String vector. Name of research station(s) to get public XY
coordinates for ('RMRS','SRS','NCRS','NERS','PNWRS'). Do not use if states
is populated. See FIESTA::ref_statecd for reference to RS and states.</p></dd>


<dt id="arg-xy-datsource">xy_datsource<a class="anchor" aria-label="anchor" href="#arg-xy-datsource"></a></dt>
<dd><p>Source of XY data ('datamart', 'sqlite', 'obj', 'csv').</p></dd>


<dt id="arg-xy-dsn">xy_dsn<a class="anchor" aria-label="anchor" href="#arg-xy-dsn"></a></dt>
<dd><p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.db) where XY data reside.</p></dd>


<dt id="arg-xy">xy<a class="anchor" aria-label="anchor" href="#arg-xy"></a></dt>
<dd><p>sf R object or String. If xy_dsn = 'datamart', name of xy table
in FIA DataMart. If xy_dsn = 'sqlite', name of xy layer in database. If
datsource = 'csv', full pathname of xy CSV file(s). If datsource = 'obj',
name of xy R object. If datsource = 'shp', full pathname of shapefile.</p></dd>


<dt id="arg-xy-opts">xy_opts<a class="anchor" aria-label="anchor" href="#arg-xy-opts"></a></dt>
<dd><p>List of xy data options for xy (e.g., xy_opts = list(xvar='LON',
yvar='LAT'). See xy_options() for more options and defaults.</p></dd>


<dt id="arg-datsource">datsource<a class="anchor" aria-label="anchor" href="#arg-datsource"></a></dt>
<dd><p>String. Source of FIA data for defining FIA evaluations or
appending variables ('datamart', 'sqlite', 'obj', 'csv'). If datsource = NULL,
datsource = xy_datsource. If datsource = 'datamart', data are downloaded
extracted from FIA DataMart (http://apps.fs.usda.gov/fia/datamart/datamart.html).
If datsource='sqlite', specify database name(s) in data_dsn and table name(s)
in dbTabs() argument. If datsource = ('obj','csv'), specify *.csv file name in
dbTabs argument.</p></dd>


<dt id="arg-data-dsn">data_dsn<a class="anchor" aria-label="anchor" href="#arg-data-dsn"></a></dt>
<dd><p>String. Name of database with plot_layer and/or ppsa_layer.</p></dd>


<dt id="arg-dbtabs">dbTabs<a class="anchor" aria-label="anchor" href="#arg-dbtabs"></a></dt>
<dd><p>String or R Object. If data_dsn = 'datamart', name of table(s)
in FIA DataMart. If data_dsn = 'sqlite', name of layer(s) in database. If
datsource = 'csv', name of CSV file(s). If datsource = 'obj', name of R object.</p></dd>


<dt id="arg-pjoinid">pjoinid<a class="anchor" aria-label="anchor" href="#arg-pjoinid"></a></dt>
<dd><p>String. Variable in plot table to join to XY data, if
plot_layer is not NULL. Not necessary to be unique. If using most current
XY coordinates, use identifier for a plot (e.g., PLOT_ID).</p></dd>


<dt id="arg-eval">eval<a class="anchor" aria-label="anchor" href="#arg-eval"></a></dt>
<dd><p>String. Type of evaluation time frame for data extraction
('FIA', 'custom'). See eval_opts for more further options.</p></dd>


<dt id="arg-eval-opts">eval_opts<a class="anchor" aria-label="anchor" href="#arg-eval-opts"></a></dt>
<dd><p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p></dd>


<dt id="arg-invtype">invtype<a class="anchor" aria-label="anchor" href="#arg-invtype"></a></dt>
<dd><p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p></dd>


<dt id="arg-coordtype">coordType<a class="anchor" aria-label="anchor" href="#arg-coordtype"></a></dt>
<dd><p>String. c('PUBLIC', 'ACTUAL'). Defines type of coordinates and is
used for the output name.</p></dd>


<dt id="arg-intensity-">intensity1<a class="anchor" aria-label="anchor" href="#arg-intensity-"></a></dt>
<dd><p>Logical. If TRUE, includes only XY coordinates where
INTENSITY = 1 (FIA base grid).</p></dd>


<dt id="arg-pvars-keep">pvars2keep<a class="anchor" aria-label="anchor" href="#arg-pvars-keep"></a></dt>
<dd><p>String vector. One or more variables in plot_layer to append
to output.</p></dd>


<dt id="arg-issp">issp<a class="anchor" aria-label="anchor" href="#arg-issp"></a></dt>
<dd><p>Logical. If TRUE, returns spatial XY data as a list object with
query.</p></dd>


<dt id="arg-returndata">returndata<a class="anchor" aria-label="anchor" href="#arg-returndata"></a></dt>
<dd><p>Logical. If TRUE, returns XY data as a list object with
query.</p></dd>


<dt id="arg-savedata">savedata<a class="anchor" aria-label="anchor" href="#arg-savedata"></a></dt>
<dd><p>Logical. If TRUE, saves XY data. Specify outfolder and
format using savedata_opts.</p></dd>


<dt id="arg-exportsp">exportsp<a class="anchor" aria-label="anchor" href="#arg-exportsp"></a></dt>
<dd><p>Logical. If TRUE, exports data as spatial.</p></dd>


<dt id="arg-savedata-opts">savedata_opts<a class="anchor" aria-label="anchor" href="#arg-savedata-opts"></a></dt>
<dd><p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE or exportsp = TRUE.</p></dd>


<dt id="arg-plot">PLOT<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Data frame. The name of the PLOT data frame object if
it is already downloaded and stored in environment.</p></dd>


<dt id="arg-pop-plot-stratum-assgn">POP_PLOT_STRATUM_ASSGN<a class="anchor" aria-label="anchor" href="#arg-pop-plot-stratum-assgn"></a></dt>
<dd><p>Data frame. The name of the
POP_PLOT_STRATUM_ASSGN data frame object if it is already downloaded
and stored in environment.</p></dd>


<dt id="arg-survey">SURVEY<a class="anchor" aria-label="anchor" href="#arg-survey"></a></dt>
<dd><p>Data frame. The name of the SURVEY data frame object
if it has been already downloaded and stored in environment.</p></dd>


<dt id="arg-dbconn">dbconn<a class="anchor" aria-label="anchor" href="#arg-dbconn"></a></dt>
<dd><p>Open database connection.</p></dd>


<dt id="arg-dbconnopen">dbconnopen<a class="anchor" aria-label="anchor" href="#arg-dbconnopen"></a></dt>
<dd><p>Logical. If TRUE, the dbconn connection is not closed.</p></dd>


<dt id="arg-evalinfo">evalInfo<a class="anchor" aria-label="anchor" href="#arg-evalinfo"></a></dt>
<dd><p>List. List object output from DBgetEvalid or DBgetXY
FIESTA functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>if returndata=TRUE, a list of the following objects:</p>
<dl><dt>xy</dt>
<dd><p>Data frame. XY data from database. The output name is based on
coordType parameter (e.g., xy_PUBLIC). the data frame include xy.uniqueid,
xvar, yvar and appended plot variables in pvars2keep if plot_layer is not
NULL. The default plot variables included are 'STATECD','UNITCD','COUNTYCD',
'PLOT','PLOT_ID' (ID+STATECD+UNTCD+COUNTYCD+PLOT), 'COUNTYFIPS'.
If issp=TRUE, returns an sf object.</p></dd>

<dt>xyqry</dt>
<dd><p>String. Query to extract coordinates.</p></dd>

<dt>xvar</dt>
<dd><p>String. Name of X variable in xy*.</p></dd>

<dt>yvar</dt>
<dd><p>String. Name of Y variable in xy*.</p></dd>


</dl><p>If savedata=TRUE, outputs the xy* based on savedata_opts.
If exportsp=TRUE, the output xy saved as spatial layer based on savedata_opts.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>If no parameters are included, the user is prompted for input. If partial
parameters, the default parameter values are used for those not specified.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tracey S. Frescino</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Most current evaluation and shapefile with public coordinates</span></span></span>
<span class="r-in"><span><span class="va">COxylst</span> <span class="op">&lt;-</span> <span class="fu">DBgetXY</span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Colorado"</span>,</span></span>
<span class="r-in"><span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span></span>
<span class="r-in"><span>                   eval_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Endyr <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">COxylst</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">COxylst</span><span class="op">$</span><span class="va">xy_PUBLIC</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">COxylst</span><span class="op">$</span><span class="va">xyqry</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

