<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Green-Book module - Generate population data for GB module. — modGBpop • FIESTA</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Green-Book module - Generate population data for GB module. — modGBpop"><meta name="description" content="Generates population data for generating 'green-book' estimates (Scott et
al. 2005).  Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1.
Attributes adjusted to a per-acre value are summed by plot, divided by the
adjustment factor, and averaged by stratum.  Strata means are combined using
the strata weights and then expanded to using the total land area in the
population."><meta property="og:description" content="Generates population data for generating 'green-book' estimates (Scott et
al. 2005).  Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1.
Attributes adjusted to a per-acre value are summed by plot, divided by the
adjustment factor, and averaged by stratum.  Strata means are combined using
the strata weights and then expanded to using the total land area in the
population."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FIESTA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/FIESTA_tutorial_GB.html">Green-book Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_MA.html">Model-Assisted Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_SA.html">Small Area Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_PB.html">Photo-Based Estimators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/FIESTA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Green-Book module - Generate population data for GB module.</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/master/R/modGBpop.R" class="external-link"><code>R/modGBpop.R</code></a></small>
      <div class="d-none name"><code>modGBpop.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates population data for generating 'green-book' estimates (Scott et
al. 2005).  Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1.
Attributes adjusted to a per-acre value are summed by plot, divided by the
adjustment factor, and averaged by stratum.  Strata means are combined using
the strata weights and then expanded to using the total land area in the
population.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">modGBpop</span><span class="op">(</span></span>
<span>  popType <span class="op">=</span> <span class="st">"VOL"</span>,</span>
<span>  popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/popTables.html" class="external-link">popTables</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  popTabIDs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/popTableIDs.html" class="external-link">popTableIDs</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  popFilter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/popFilters.html" class="external-link">popFilters</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pltassgn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pltassgnid <span class="op">=</span> <span class="st">"PLT_CN"</span>,</span>
<span>  datsource <span class="op">=</span> <span class="st">"sqlite"</span>,</span>
<span>  dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbconn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pjoinid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  areawt <span class="op">=</span> <span class="st">"CONDPROP_UNADJ"</span>,</span>
<span>  areawt2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adj <span class="op">=</span> <span class="st">"samp"</span>,</span>
<span>  defaultVars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  unitvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unitarea <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  areavar <span class="op">=</span> <span class="st">"ACRES"</span>,</span>
<span>  strata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  stratalut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strvar <span class="op">=</span> <span class="st">"STRATUMCD"</span>,</span>
<span>  returndata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  saveobj <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  objnm <span class="op">=</span> <span class="st">"GBpopdat"</span>,</span>
<span>  unit_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strata_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  savedata_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  database_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  GBdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pltdat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stratdat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auxdat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-poptype">popType<a class="anchor" aria-label="anchor" href="#arg-poptype"></a></dt>
<dd><p>String. Type of evaluation(s) to include in population data.
Note: currently only c('CURR', 'VOL', 'LULC', 'DWM')
are available. See details below for descriptions of each.</p></dd>


<dt id="arg-poptabs">popTabs<a class="anchor" aria-label="anchor" href="#arg-poptabs"></a></dt>
<dd><p>List of population tables the user would like returned.
See help(popTables) for a list of options.</p></dd>


<dt id="arg-poptabids">popTabIDs<a class="anchor" aria-label="anchor" href="#arg-poptabids"></a></dt>
<dd><p>List of unique IDs corresponding to the population tables
that the user has requested. See help(popTableIDs) for a list of
options.</p></dd>


<dt id="arg-popfilter">popFilter<a class="anchor" aria-label="anchor" href="#arg-popfilter"></a></dt>
<dd><p>List of population filters. See help(popFilters) for a
list of options.</p></dd>


<dt id="arg-pltassgn">pltassgn<a class="anchor" aria-label="anchor" href="#arg-pltassgn"></a></dt>
<dd><p>DF/DT, Optional. R object, sf R object, comma-delimited
file(.csv), layer or spatial layer in dsn, or shapefile(.shp). Plot-level
assignment of estimation unit and/or strata, with one record for each plot.</p></dd>


<dt id="arg-pltassgnid">pltassgnid<a class="anchor" aria-label="anchor" href="#arg-pltassgnid"></a></dt>
<dd><p>String vector. One or more variables in pltassgn
defining unique plot and will join to plt table.</p></dd>


<dt id="arg-datsource">datsource<a class="anchor" aria-label="anchor" href="#arg-datsource"></a></dt>
<dd><p>String. Name of data source ('obj', 'sqlite', 'postgres').</p></dd>


<dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>String. Name of database where tree, cond, and plot-level tables
reside.  The dsn varies by driver. See gdal OGR vector formats
(https://www.gdal.org/ogr_formats.html).</p></dd>


<dt id="arg-dbconn">dbconn<a class="anchor" aria-label="anchor" href="#arg-dbconn"></a></dt>
<dd><p>Open database connection.</p></dd>


<dt id="arg-pjoinid">pjoinid<a class="anchor" aria-label="anchor" href="#arg-pjoinid"></a></dt>
<dd><p>String vector. Join variable(s) in plot to match pltassgnid.</p></dd>


<dt id="arg-areawt">areawt<a class="anchor" aria-label="anchor" href="#arg-areawt"></a></dt>
<dd><p>String. Name of variable in cond for summarizing area
weights (e.g., CONDPROP_UNADJ).</p></dd>


<dt id="arg-areawt-">areawt2<a class="anchor" aria-label="anchor" href="#arg-areawt-"></a></dt>
<dd><p>String. An equation to multiply to the adjusted areawt for
estimation. All variables in equation must be in cond.
(e.g., '1000 + SICOND * 3 + BALIVE * 4').</p></dd>


<dt id="arg-adj">adj<a class="anchor" aria-label="anchor" href="#arg-adj"></a></dt>
<dd><p>String. How to calculate adjustment factors for nonsampled
(nonresponse) conditions based on summed proportions for by plot ('samp',
'plot').  'samp' - adjustments are calculated at strata/estimation unit
level; 'plot' - adjustments are calculated at plot-level. Adjustments are
only calculated for annual inventory plots (DESIGNCD=1).</p></dd>


<dt id="arg-defaultvars">defaultVars<a class="anchor" aria-label="anchor" href="#arg-defaultvars"></a></dt>
<dd><p>Logical. If TRUE, a set of default variables are selected.</p></dd>


<dt id="arg-unitvar">unitvar<a class="anchor" aria-label="anchor" href="#arg-unitvar"></a></dt>
<dd><p>String. Name of the estimation unit variable in unitarea and
cond or pltassgn data frame with estimation unit assignment for each plot
(e.g., 'ESTN_UNIT'). Optional if only one estimation unit.</p></dd>


<dt id="arg-unitarea">unitarea<a class="anchor" aria-label="anchor" href="#arg-unitarea"></a></dt>
<dd><p>Numeric or DF. Total area by estimation unit. If only 1
estimation unit, include number of total acreage for the area of interest or
a data frame with area and estimation unit. If more than one estimation
unit, provide a data frame of total area by estimation unit, including
unitvar and areavar.</p></dd>


<dt id="arg-areavar">areavar<a class="anchor" aria-label="anchor" href="#arg-areavar"></a></dt>
<dd><p>String. Name of area variable in unitarea. Default="ACRES".</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>Logical. If TRUE, include information for post-stratification.</p></dd>


<dt id="arg-stratalut">stratalut<a class="anchor" aria-label="anchor" href="#arg-stratalut"></a></dt>
<dd><p>DF/DT. If strata=TRUE, look-up table with pixel counts or
area by strata or proportion or area ('strwt') by strata (and estimation
unit).  If 'strwt' is not included, set getwt=TRUE and getwtvar as the name
of variable to calculate weights from (e.g., pixel counts).</p></dd>


<dt id="arg-strvar">strvar<a class="anchor" aria-label="anchor" href="#arg-strvar"></a></dt>
<dd><p>String. If strata=TRUE, name of the strata variable in
stratalut and cond or pltassgn data frame with stratum assignment for each
plot (Default = 'STRATUMCD').</p></dd>


<dt id="arg-returndata">returndata<a class="anchor" aria-label="anchor" href="#arg-returndata"></a></dt>
<dd><p>Logical. If TRUE, returns data objects.</p></dd>


<dt id="arg-savedata">savedata<a class="anchor" aria-label="anchor" href="#arg-savedata"></a></dt>
<dd><p>Logical. If TRUE, saves data table(s). See savedata_opts
for saving options.</p></dd>


<dt id="arg-saveobj">saveobj<a class="anchor" aria-label="anchor" href="#arg-saveobj"></a></dt>
<dd><p>Logical. If TRUE, saves returned list object. See savedata_opts
for saving options.</p></dd>


<dt id="arg-objnm">objnm<a class="anchor" aria-label="anchor" href="#arg-objnm"></a></dt>
<dd><p>String. Name of *.rds object.</p></dd>


<dt id="arg-unit-opts">unit_opts<a class="anchor" aria-label="anchor" href="#arg-unit-opts"></a></dt>
<dd><p>List. See help(unit_options()) for a list of options.</p></dd>


<dt id="arg-strata-opts">strata_opts<a class="anchor" aria-label="anchor" href="#arg-strata-opts"></a></dt>
<dd><p>List. See help(strata_options()) for a list of options.
Only used when strata = TRUE.</p></dd>


<dt id="arg-savedata-opts">savedata_opts<a class="anchor" aria-label="anchor" href="#arg-savedata-opts"></a></dt>
<dd><p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p></dd>


<dt id="arg-database-opts">database_opts<a class="anchor" aria-label="anchor" href="#arg-database-opts"></a></dt>
<dd><p>List. See help(database_options()) for a list
of options. Only used when datsource = 'postgres'.</p></dd>


<dt id="arg-gbdata">GBdata<a class="anchor" aria-label="anchor" href="#arg-gbdata"></a></dt>
<dd><p>R List object. Output data list components from
FIESTA::anGBdata().</p></dd>


<dt id="arg-pltdat">pltdat<a class="anchor" aria-label="anchor" href="#arg-pltdat"></a></dt>
<dd><p>R List object. Output data list components from
FIESTA::spGetPlots().</p></dd>


<dt id="arg-stratdat">stratdat<a class="anchor" aria-label="anchor" href="#arg-stratdat"></a></dt>
<dd><p>R List object. Output data list components from
FIESTA::spGetStrata().</p></dd>


<dt id="arg-auxdat">auxdat<a class="anchor" aria-label="anchor" href="#arg-auxdat"></a></dt>
<dd><p>R List object. Output data list components from
FIESTA::spGetAuxiliary().</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>For extendibility.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with population data for Green-Book estimates.</p>
<dl><dt>condx</dt>
<dd><p>Data frame. Condition-level data including plot-level
assignment of estimation unit and stratum (if strata=TRUE), condition
proportion adjustment factor (cadjfac), and adjusted condition proportions
(CONDPROP_ADJ).</p></dd>

<dt>cuniqueid</dt>
<dd><p>String. Unique identifier of plot in condx and pltcondx.</p></dd>

<dt>condid</dt>
<dd><p>String. Unique identifier of condition in condx and pltcondx.</p></dd>

<dt>treex</dt>
<dd><p>Data frame. Tree data within population, used for estimation,
including trees per acre adjustment factor (tadjfac), and adjusted trees per
acre (TPA_ADJ) (if treef is included).</p></dd>

<dt>tuniqueid</dt>
<dd><p>String. Unique identifier of plot in treex (if treef is
included).</p></dd>

<dt>ACI.filter</dt>
<dd><p>String. If ACI=FALSE, ACI.filter="COND_STATUS_CD == 1".</p></dd>

<dt>unitarea</dt>
<dd><p>String. Returned table of area by estimation unit.</p></dd>

<dt>unitvar</dt>
<dd><p>String. Variable name for estimation unit.</p></dd>

<dt>strlut</dt>
<dd><p>String. Strata-level table with pixel counts by strata
(P1POINTCNT), strata weights (strwt), number of plots by strata (n.strata),
total number of plots in estimation unit (n.total), sum of condition proportions
(_UNADJ_SUM), area adjustments (*_ADJFAC), total area, and area expansion
by strata (EXPNS).</p></dd>

<dt>strvar</dt>
<dd><p>String. Variable name for strata. If strata=FALSE,
strvar="ONESTRAT".</p></dd>

<dt>expcondtab</dt>
<dd><p>String. If ACI=FALSE, ACI.filter="COND_STATUS_CD == 1".</p></dd>

<dt>plotsampcnt</dt>
<dd><p>Data frame. Number of plots by PLOT_STATUS_CD.</p></dd>

<dt>condsampcnt</dt>
<dd><p>Data frame. Number of conditions by COND_STATUS_CD.</p></dd>

<dt>states</dt>
<dd><p>String. State names in dataset.</p></dd>

<dt>invyrs</dt>
<dd><p>String. Range of inventory years in dataset.</p></dd>


<dt>stratdat</dt>
<dd><p>Data frame. Strata information by estimation unit.</p></dd>

</dl><table class="table table"><tr><td></td><td><b>Variable</b></td><td><b>Description</b></td></tr><tr><td></td><td>unitvar</td><td>estimation unit</td></tr><tr><td></td><td>strvar</td><td>stratum value</td></tr><tr><td></td><td>strwtvar</td><td>number of pixels by
strata and estimation unit</td></tr><tr><td></td><td>n.strata</td><td>number of plots in strata (after totally nonsampled
plots removed)</td></tr><tr><td></td><td>n.total</td><td>number of plots for estimation unit</td></tr><tr><td></td><td>strwt</td><td>proportion of area (or plots) by strata and estimation
unit (i.e., strata weight)</td></tr><tr><td></td><td>CONDPROP_UNADJ_SUM</td><td>summed conditionproportion by strata and
estimation unit</td></tr><tr><td></td><td>CONDPROP_ADJFAC</td><td>adjusted condition proportion by strata after
nonsampled plots removed</td></tr><tr><td></td><td>AREA_USED</td><td>total area of estimation unit</td></tr><tr><td></td><td>expfac</td><td>strata-level expansion factor after nonsampled plots and
conditions removed (AREA_USED/n.strata)</td></tr><tr><td></td><td>EXPNS</td><td>strata-level area expansions (expfac * strwt)</td></tr></table><p>Table(s) are also written to outfolder.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Population types <br></p><table class="table table"><tr><td></td><td><b>popType</b>
<b>Description</b></td><td></td></tr><tr><td>ALL</td><td>Population data, including nonsampled plots.</td><td></td></tr><tr><td>CURR</td><td>Population data for area estimates, excluding nonsampled
plots.</td><td></td></tr><tr><td>VOL</td><td>Population data for area/tree estimates, excluding
nonsampled plots.</td><td></td></tr><tr><td>LULC</td><td>Population data for land use/land cover transitional estimates,
including only plots with previous measurements and excluding nonsampled
plots.</td><td></td></tr></table><p>If variables are NULL, then it will prompt user to input variables.</p>
<p>Necessary variables:<br></p><table class="table table"><tr><td></td><td><b>Data</b></td><td><b>Variable</b></td><td><b>Description</b></td></tr><tr><td></td><td>tree</td><td>tuniqueid</td><td>Unique identifier for each plot in tree
table.</td></tr><tr><td></td><td></td><td>CONDID</td><td>Unique identifier of each condition on plot.
Set CONDID=1, if only 1 condition per plot.</td></tr><tr><td></td><td></td><td>TPA_UNADJ</td><td>Number of trees per acre each sample tree represents
(e.g., DESIGNCD=1: TPA_UNADJ=6.018046 for trees on subplot; 74.965282 for
trees on microplot).</td></tr><tr><td></td><td>cond</td><td>cuniqueid</td><td>Unique identifier for each plot in cond
table.</td></tr><tr><td></td><td></td><td>CONDID</td><td>Unique identifier of each condition on plot. Set
CONDID=1, if only 1 condition per plot.</td></tr><tr><td></td><td></td><td>CONDPROP_UNADJ</td><td>Unadjusted proportion of condition on each
plot. Set CONDPROP_UNADJ=1, if only 1 condition per plot.</td></tr><tr><td></td><td></td><td>COND_STATUS_CD</td><td>Status of each forested condition on
plot (i.e. accessible forest, nonforest, water, etc.)</td></tr><tr><td></td><td></td><td>NF_COND_STATUS_CD</td><td>If ACI=TRUE. Status of each nonforest
condition on plot (i.e. accessible nonforest, nonsampled nonforest)</td></tr><tr><td></td><td></td><td>SITECLCD</td><td>If landarea=TIMBERLAND. Measure of site
productivity.</td></tr><tr><td></td><td></td><td>RESERVCD</td><td>If landarea=TIMBERLAND. Reserved status.</td></tr><tr><td></td><td></td><td>SUBPROP_UNADJ</td><td>Unadjusted proportion of subplot conditions
on each plot. Set SUBPROP_UNADJ=1, if only 1 condition per subplot.</td></tr><tr><td></td><td></td><td>MICRPROP_UNADJ</td><td>If microplot tree attributes. Unadjusted
proportion of microplot conditions on each plot. Set MICRPROP_UNADJ=1,
if only 1 condition per microplot.</td></tr><tr><td></td><td></td><td>MACRPROP_UNADJ</td><td>If macroplot tree attributes. Unadjusted
proportion of macroplot conditions on each plot. Set MACRPROP_UNADJ=1,
if only 1 condition per macroplot.</td></tr><tr><td></td><td>pltassgn</td><td>pltassgnid</td><td>Unique identifier for each plot in
pltassgn.</td></tr><tr><td></td><td></td><td>STATECD</td><td>Identifies state each plot is located in.</td></tr><tr><td></td><td></td><td>INVYR</td><td>Identifies inventory year of each plot.</td></tr><tr><td></td><td></td><td>PLOT_STATUS_CD</td><td>Status of each plot (i.e. sampled, nonsampled).
If not included, all plots are assumed as sampled.</td></tr></table><p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br></p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>ADJUSTMENT FACTOR:<br> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata.
by summing the unadjusted proportions of the subplot, microplot, and
macroplot (i.e. *PROP_UNADJ) and dividing by the number of plots in the
strata/estimation unit).</p>
<p>An adjustment factor is determined for each tree based on the size of the
plot it was measured on. This is identified using TPA_UNADJ as follows:</p>
<table class="table table"><tr><td></td><td><b>PLOT SIZE</b></td><td><b>TPA_UNADJ</b></td></tr><tr><td></td><td>SUBPLOT</td><td>6.018046</td></tr><tr><td></td><td>MICROPLOT</td><td>74.965282</td></tr><tr><td></td><td>MACROPLOT</td><td>0.999188</td></tr></table><p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor.  This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.</p>
<p>unitcombine:<br> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.</p>
<p>stratcombine:<br> If TRUE and less than 2 plots in any one strata class
within an estimation unit, all strata classes with 2 or less plots are
combined. The current method for combining is to group the strata with less
than 2 plots with the strata class following in consecutive order (numeric
or alphabetical), restrained by estimation unit (if unitcombine=FALSE), and
continuing until the number of plots equals 10. If there are no strata
classes following in order, it is combined with the estimation unit previous
in order.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80. Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">GBpopdat</span> <span class="op">&lt;-</span> <span class="fu">modGBpop</span><span class="op">(</span></span></span>
<span class="r-in"><span>popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cond <span class="op">=</span> <span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="WYcond.html">WYcond</a></span>,  </span></span>
<span class="r-in"><span>               tree <span class="op">=</span> <span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="WYtree.html">WYtree</a></span>,        </span></span>
<span class="r-in"><span>               seed <span class="op">=</span> <span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="WYseed.html">WYseed</a></span><span class="op">)</span>,      </span></span>
<span class="r-in"><span>popTabIDs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cond <span class="op">=</span> <span class="st">"PLT_CN"</span><span class="op">)</span>,            </span></span>
<span class="r-in"><span>pltassgn <span class="op">=</span> <span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="WYpltassgn.html">WYpltassgn</a></span>,  </span></span>
<span class="r-in"><span>pltassgnid <span class="op">=</span> <span class="st">"CN"</span>,        </span></span>
<span class="r-in"><span>pjoinid <span class="op">=</span> <span class="st">"PLT_CN"</span>,         </span></span>
<span class="r-in"><span>unitarea <span class="op">=</span> <span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="WYunitarea.html">WYunitarea</a></span>,</span></span>
<span class="r-in"><span>unitvar <span class="op">=</span> <span class="st">"ESTN_UNIT"</span>,        </span></span>
<span class="r-in"><span>strata <span class="op">=</span> <span class="cn">TRUE</span>,           </span></span>
<span class="r-in"><span>stratalut <span class="op">=</span> <span class="va">WYstratalut</span>,    </span></span>
<span class="r-in"><span>strata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/strata_options.html" class="external-link">strata_options</a></span><span class="op">(</span>getwt <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>   </span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> savedata=FALSE with savedata parameters... no data are saved</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> variables are missing from dataset: STATECD, UNITCD, COUNTYCD, PLOT, PLOT_STATUS_CD, PLOT_NONSAMPLE_REASN_CD, INTENSITY, SUBCYCLE, MACRO_BREAKPOINT_DIA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> SURVEY table does not exist in database... assuming annual inventory plots</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> INVYR not in input data...  no invyrs returned...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> SUBCYCLE not in data... assuming all SUBCYCLE &lt;&gt; 99</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> removing nonsampled forest plots...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> returning data needed for estimation...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> there are 14 nonsampled conditions</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">GBpopdat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ module       : chr "GB"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ popType      : chr "VOL"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pltidsadj    :Classes ‘data.table’ and 'data.frame':	3047 obs. of  5 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr "CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pltcondx     :Classes ‘data.table’ and 'data.frame':	3224 obs. of  29 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr [1:2] "PLT_CN" "CONDID"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pltcondflds  : chr [1:28] "PLT_CN" "CONDID" "COND_NONSAMPLE_REASN_CD" "CONDPROP_UNADJ" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pjoinid      : chr "CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ cuniqueid    : chr "PLT_CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ condid       : chr "CONDID"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ACI          : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ areawt       : chr "CONDPROP_UNADJ"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ areawt2      : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ adjcase      : Named chr "ADJ_FACTOR_COND"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "names")= chr "COND"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dbqueries    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dbqueriesWITH:List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pltassgnx    :Classes ‘data.table’ and 'data.frame':	3047 obs. of  4 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr "CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ pltassgnid   : chr "CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unitarea     :Classes ‘data.table’ and 'data.frame':	23 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr "ESTN_UNIT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ areavar      : chr "ACRES"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ areaunits    : chr "acres"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unitvar      : chr "ESTN_UNIT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unitvars     : chr "ESTN_UNIT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unitltmin    : num 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strata       : logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ stratalut    :Classes ‘data.table’ and 'data.frame':	35 obs. of  6 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr [1:2] "ESTN_UNIT" "STRATUMCD"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strvar       : chr "STRATUMCD"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strwtvar     : chr "strwt"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plotsampcnt  :'data.frame':	0 obs. of  0 variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ condsampcnt  :'data.frame':	5 obs. of  3 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ states       : chr "Wyoming"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ invyrs       : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ adj          : chr "samp"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ P2POINTCNT   :'data.frame':	35 obs. of  3 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ plotunitcnt  :'data.frame':	23 obs. of  2 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ treex        :Classes ‘data.table’ and 'data.frame':	18574 obs. of  19 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr [1:4] "PLT_CN" "CONDID" "SUBP" "TREE"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ tuniqueid    : chr "PLT_CN"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ seedx        :Classes ‘data.table’ and 'data.frame':	1607 obs. of  9 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr [1:3] "PLT_CN" "CONDID" "SUBP"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ adjfactors   :Classes ‘data.table’ and 'data.frame':	35 obs. of  7 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "sorted")= chr [1:2] "ESTN_UNIT" "STRATUMCD"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ adjvarlst    : Named chr [1:4] "ADJ_FACTOR_COND" "ADJ_FACTOR_SUBP" "ADJ_FACTOR_MACR" "ADJ_FACTOR_MICR"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "names")= chr [1:4] "COND" "SUBP" "MACR" "MICR"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ popdatindb   : logi FALSE</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

