<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Database Tools • FIESTA</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Database Tools">
<meta name="description" content="Explore the various database utility functions available within FIESTA.">
<meta property="og:description" content="Explore the various database utility functions available within FIESTA.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FIESTA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/FIESTA_tutorial_GB.html">Green-book Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_MA.html">Model-Assisted Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_SA.html">Small Area Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_PB.html">Photo-Based Estimators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/FIESTA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Database Tools</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/master/vignettes/articles/FIESTA_tutorial_DB.Rmd" class="external-link"><code>vignettes/articles/FIESTA_tutorial_DB.Rmd</code></a></small>
      <div class="d-none name"><code>FIESTA_tutorial_DB.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="overview-of-fiesta-database-db-tools">Overview of FIESTA Database (DB) tools<a class="anchor" aria-label="anchor" href="#overview-of-fiesta-database-db-tools"></a>
</h3>
<p>FIESTA’s DB tools extract data from FIA’s online publicly-available,
comma-delimited files (*.csv or *.zip). FIA’s CSV files are available by
state from the FIA DataMart at the following link: <a href="https://apps.fs.usda.gov/fia/datamart/datamart.html" class="external-link uri">https://apps.fs.usda.gov/fia/datamart/datamart.html</a>.
Because of FIA’s confidentiality agreement to protect the privacy of
landowners, as well as protecting the scientific integrity of FIA’s
sample design, the exact coordinates of the sample plot locations are
not included in the public data. If the exact coordinates are necessary
for your analysis, contact FIA’s Spatial Data Services (<a href="https://research.fs.usda.gov/programs/fia/sds" class="external-link uri">https://research.fs.usda.gov/programs/fia/sds</a>).</p>
</div>
<div class="section level3">
<h3 id="objective-of-tutorial">Objective of tutorial<a class="anchor" aria-label="anchor" href="#objective-of-tutorial"></a>
</h3>
<p>The objective of this tutorial is to demonstrate the use of FIESTA’s
DB tools for accessing FIA data. These tools extract data from FIA
Datamart using FIA’s standard evaluations as well as customized
evaluations.</p>
<p>An FIA Evaluation is a group of plots within the FIA database that is
used for population estimates. An FIA Evaluation represents different
inventory spans of data with different stratification and area
adjustments for nonreponse. Each Evaluation is determined by the type of
estimation (evalType) including: area and tree estimates, growth and
mortality estimates, and area change estimates (evalType). These plots
are identified by an evalid, which is a unique identifier in the format
of a 2-digit State code, a 2-digit year code, and a 2-digit evaluation
type code. For example, EVALID ‘491601’ represents the Utah 2016
evaluation for current area estimates.</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th>FUNCTION</th>
<th>DESCRIPTION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="#DBgetCSV">DBgetCSV()</a></td>
<td>Downloads comma-delimited file (.csv) or downloads and extracts a
compressed csv file (.zip) from FIA’s online DataMart.</td>
</tr>
<tr class="even">
<td><a href="#DBqryCSV">DBqryCSV()</a></td>
<td>Extracts and queries data from FIA’s online DataMart, either CSV or
ZIP files.</td>
</tr>
<tr class="odd">
<td><a href="#DBgetEvalid">DBgetEvalid()</a></td>
<td>Gets evalid for identifying an estimation group of plots for state
or checks evalid.</td>
</tr>
<tr class="even">
<td><a href="#DBgetXY">DBgetXY()</a></td>
<td>Extracts XY data from FIA database.</td>
</tr>
<tr class="odd">
<td><a href="#DBgetPlots">DBgetPlots()</a></td>
<td>Extracts inventory plot data from FIA database.</td>
</tr>
<tr class="even">
<td><a href="#DBgetStrata">DBgetStrata()</a></td>
<td>Extracts strata information and total acres by estimation unit from
FIA database, including plot-level assignment and a data frame with
strata weights by estimation unit.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/FIESTA/">FIESTA</a></span><span class="op">)</span></span></code></pre>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For this vignette, we have saved our outfolder file path as the
<code>outfolder</code> object in a temporary directory. We also set a
few default options preferred for this vignette.</p>
<pre><code><span><span class="va">outfolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="db-examples">DB Examples<a class="anchor" aria-label="anchor" href="#db-examples"></a>
</h2>
<p>The following examples show how to extract data from FIA’s
publicly-available, online DataMart. Data can be returned as R objects
or exported to CSV (.csv) files or a SQLite (.sqlite) database. The zip
files are extracted on-the-fly from the online website. Web server
connections will affect download speeds. We show examples for the
following functions:</p>
<p>The following examples extract data from FIA’s online DataMart (<a href="https://apps.fs.usda.gov/fia/datamart/datamart.html" class="external-link uri">https://apps.fs.usda.gov/fia/datamart/datamart.html</a>).</p>
<p>Note that while <code>datsource = 'datamart'</code> is utilized for
these examples, <code>datsource</code> can be set to ‘sqlite’ with
<code>datsource_dsn</code> set to the local file path for the FIADB file
to achieve the same results.</p>
<div class="section level3">
<h3 id="dbgetcsv">
<code>DBgetCSV()</code><a class="anchor" aria-label="anchor" href="#dbgetcsv"></a>
</h3>
<p>The <code>DBgetCSV</code> function extracts data from FIA’s
publicly-available, online DataMart CSV/ZIP files. The zip files are
extracted on-the-fly from the online website. Web server connections
will affect download speeds.</p>
<div class="section level4">
<h4 id="example-1-extract-plot-data-for-wyoming-and-utah">Example 1: Extract PLOT data for Wyoming and Utah<a class="anchor" aria-label="anchor" href="#example-1-extract-plot-data-for-wyoming-and-utah"></a>
</h4>
<pre><code><span><span class="co">## Get plot table for Wyoming</span></span>
<span><span class="va">WYplots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetCSV.html">DBgetCSV</a></span><span class="op">(</span><span class="st">"PLOT"</span>, <span class="st">"Wyoming"</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">WYplots</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 29460    63</span></span>
<span></span>
<span><span class="co">## Get plot table for Wyoming and Utah</span></span>
<span><span class="va">WYUTplots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetCSV.html">DBgetCSV</a></span><span class="op">(</span>DBtable <span class="op">=</span> <span class="st">"PLOT"</span>, </span>
<span>                      states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Wyoming"</span>, <span class="st">"Utah"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for UT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">WYUTplots</span><span class="op">$</span><span class="va">STATECD</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    49    56 </span></span>
<span><span class="co">#&gt; 28826 29460</span></span>
<span></span>
<span><span class="co">## Get survey table for Wyoming</span></span>
<span><span class="va">WYsurvey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetCSV.html">DBgetCSV</a></span><span class="op">(</span><span class="st">"SURVEY"</span>, <span class="st">"Wyoming"</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="va">WYsurvey</span></span>
<span><span class="co">#&gt;                 CN INVYR P3_OZONE_IND STATECD STATEAB STATENM RSCD</span></span>
<span><span class="co">#&gt; 1   40383603010690  2011            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 2   40383604010690  2012            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 3   40383605010690  2013            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 4   40409732010690  2014            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 5   40409733010690  2015            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 6   40409734010690  2016            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 7   40409735010690  2017            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 8   40409736010690  2018            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 9   40409737010690  2019            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 10  40409738010690  2020            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 11 733348634290487  2021            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 12   3001122010690  1984            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt; 13   2701863010690  2000            N      56      WY Wyoming   22</span></span>
<span><span class="co">#&gt;    ANN_INVENTORY                                          NOTES</span></span>
<span><span class="co">#&gt; 1              Y                      Annual 01 of 10 subcycles</span></span>
<span><span class="co">#&gt; 2              Y                      Annual 02 of 10 subcycles</span></span>
<span><span class="co">#&gt; 3              Y                      Annual 03 of 10 subcycles</span></span>
<span><span class="co">#&gt; 4              Y                      Annual 04 of 10 subcycles</span></span>
<span><span class="co">#&gt; 5              Y                      Annual 05 of 10 subcycles</span></span>
<span><span class="co">#&gt; 6              Y                      Annual 06 of 10 subcycles</span></span>
<span><span class="co">#&gt; 7              Y                      Annual 07 of 10 subcycles</span></span>
<span><span class="co">#&gt; 8              Y                      Annual 08 of 10 subcycles</span></span>
<span><span class="co">#&gt; 9              Y                      Annual 09 of 10 subcycles</span></span>
<span><span class="co">#&gt; 10             Y                      Annual 10 of 10 subcycles</span></span>
<span><span class="co">#&gt; 11             Y                                               </span></span>
<span><span class="co">#&gt; 12             N Periodic inventory FOR CYCLE=1 AND SUBCYCLE=0.</span></span>
<span><span class="co">#&gt; 13             N Periodic inventory FOR CYCLE=2 AND SUBCYCLE=0.</span></span>
<span><span class="co">#&gt;           CREATED_DATE       MODIFIED_DATE CYCLE SUBCYCLE          PRJ_CN</span></span>
<span><span class="co">#&gt; 1  2010-12-19 11:09:24 2021-09-02 08:12:21     3        1 833968357290487</span></span>
<span><span class="co">#&gt; 2  2010-12-19 11:09:24 2021-09-02 08:12:21     3        2 833968357290487</span></span>
<span><span class="co">#&gt; 3  2010-12-19 11:09:24 2021-09-02 08:12:21     3        3 833968357290487</span></span>
<span><span class="co">#&gt; 4  2011-01-14 15:23:21 2021-09-02 08:12:21     3        4 833968357290487</span></span>
<span><span class="co">#&gt; 5  2011-01-14 15:23:21 2021-09-02 08:12:21     3        5 833968357290487</span></span>
<span><span class="co">#&gt; 6  2011-01-14 15:23:21 2021-09-02 08:12:21     3        6 833968357290487</span></span>
<span><span class="co">#&gt; 7  2011-01-14 15:23:21 2021-09-02 08:12:21     3        7 833968357290487</span></span>
<span><span class="co">#&gt; 8  2011-01-14 15:23:21 2021-09-02 08:12:21     3        8 833968357290487</span></span>
<span><span class="co">#&gt; 9  2011-01-14 15:23:21 2021-09-02 08:12:21     3        9 833968357290487</span></span>
<span><span class="co">#&gt; 10 2011-01-14 15:23:21 2021-09-02 08:12:21     3       10 833968357290487</span></span>
<span><span class="co">#&gt; 11 2020-03-20 12:04:35 2021-09-02 08:12:21     4        1 833968357290487</span></span>
<span><span class="co">#&gt; 12          2004-05-27 2023-07-25 06:57:43     1        0 833968358290487</span></span>
<span><span class="co">#&gt; 13          2004-05-27 2023-07-25 06:57:43     2        0 833968358290487</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="dbqrycsv">
<code>DBqryCSV()</code><a class="anchor" aria-label="anchor" href="#dbqrycsv"></a>
</h3>
<p>The <code>DBqryCSV</code> function queries a table from FIA’s online
publicly-available DataMart. The tables in the query must be specified
in the sqltables parameter.</p>
<div class="section level4">
<h4 id="example-multiple-uses">Example: Multiple Uses<a class="anchor" aria-label="anchor" href="#example-multiple-uses"></a>
</h4>
<pre><code><span><span class="co"># Get number of plots by inventory year for the state of Wyoming</span></span>
<span><span class="va">sql1</span> <span class="op">&lt;-</span> <span class="st">"SELECT INVYR, COUNT(*) AS NBRPLOTS </span></span>
<span><span class="st">         FROM PLOT </span></span>
<span><span class="st">         WHERE statecd = 56</span></span>
<span><span class="st">         GROUP BY INVYR"</span></span>
<span></span>
<span><span class="va">nplots1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBqryCSV.html">DBqryCSV</a></span><span class="op">(</span>sql <span class="op">=</span> <span class="va">sql1</span>, </span>
<span>                    states <span class="op">=</span> <span class="st">"Wyoming"</span>, </span>
<span>                    sqltables <span class="op">=</span> <span class="st">"PLOT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nplots1</span><span class="op">)</span></span>
<span><span class="co">#&gt;   INVYR NBRPLOTS</span></span>
<span><span class="co">#&gt; 1  1984     7724</span></span>
<span><span class="co">#&gt; 2  2000    10110</span></span>
<span><span class="co">#&gt; 3  2011     1060</span></span>
<span><span class="co">#&gt; 4  2012     1077</span></span>
<span><span class="co">#&gt; 5  2013     1013</span></span>
<span><span class="co">#&gt; 6  2014     1073</span></span>
<span></span>
<span><span class="co"># Get number of plots by inventory year for Vermont and New Hampshire</span></span>
<span><span class="va">sql2</span> <span class="op">&lt;-</span> <span class="st">"SELECT STATECD, INVYR, COUNT(*) NBRPLOTS </span></span>
<span><span class="st">         FROM PLOT </span></span>
<span><span class="st">         WHERE statecd IN(50,33) </span></span>
<span><span class="st">         GROUP BY STATECD, INVYR"</span></span>
<span></span>
<span><span class="va">nplots2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBqryCSV.html">DBqryCSV</a></span><span class="op">(</span>sql <span class="op">=</span> <span class="va">sql2</span>, </span>
<span>                    states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vermont"</span>, <span class="st">"New Hampshire"</span><span class="op">)</span>, </span>
<span>                    sqltables <span class="op">=</span> <span class="st">"PLOT"</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for NH ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nplots2</span><span class="op">)</span></span>
<span><span class="co">#&gt;   STATECD INVYR NBRPLOTS</span></span>
<span><span class="co">#&gt; 1      33  1983      697</span></span>
<span><span class="co">#&gt; 2      33  1997      930</span></span>
<span><span class="co">#&gt; 3      33  2002      149</span></span>
<span><span class="co">#&gt; 4      33  2003      141</span></span>
<span><span class="co">#&gt; 5      33  2004      144</span></span>
<span><span class="co">#&gt; 6      33  2005      144</span></span>
<span></span>
<span><span class="co"># Get number of plots by inventory year for Iowa (stcd=19) that have silver maple (SPCD=317)</span></span>
<span><span class="va">sql3</span> <span class="op">&lt;-</span> <span class="st">"SELECT p.STATECD, p.INVYR, COUNT(*) NBRPLOTS </span></span>
<span><span class="st">         FROM PLOT p </span></span>
<span><span class="st">         JOIN TREE t ON p.CN = t.PLT_CN </span></span>
<span><span class="st">         WHERE p.statecd = 19 AND t.SPCD = 317</span></span>
<span><span class="st">         GROUP BY p.STATECD, p.INVYR"</span></span>
<span></span>
<span><span class="va">nplots3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBqryCSV.html">DBqryCSV</a></span><span class="op">(</span>sql <span class="op">=</span> <span class="va">sql3</span>, </span>
<span>                    states <span class="op">=</span> <span class="st">"IOWA"</span>, </span>
<span>                    sqltables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PLOT"</span>, <span class="st">"TREE"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for IA ...</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for IA ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nplots3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   STATECD INVYR NBRPLOTS</span></span>
<span><span class="co">#&gt; 1      19  1990     1698</span></span>
<span><span class="co">#&gt; 2      19  1999      114</span></span>
<span><span class="co">#&gt; 3      19  2000       48</span></span>
<span><span class="co">#&gt; 4      19  2001      148</span></span>
<span><span class="co">#&gt; 5      19  2002      236</span></span>
<span><span class="co">#&gt; 6      19  2003      114</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="dbgetevalid">
<code>DBgetEvalid()</code><a class="anchor" aria-label="anchor" href="#dbgetevalid"></a>
</h3>
<p>The <code>DBgetEvalid</code> function gets information for FIA
Evaluations.</p>
<div class="section level4">
<h4 id="example-1-get-most-current-evalid-and-inventory-years-for-wyoming">Example 1: Get most current evalid and inventory years for
Wyoming<a class="anchor" aria-label="anchor" href="#example-1-get-most-current-evalid-and-inventory-years-for-wyoming"></a>
</h4>
<pre><code><span><span class="va">WYeval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetEvalid.html">DBgetEvalid</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>,</span>
<span>                      evalCur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">WYeval</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "rslst"                  "evalidlist"            </span></span>
<span><span class="co">#&gt;  [4] "invtype"                "invyrtab"               "evalTypelist"          </span></span>
<span><span class="co">#&gt;  [7] "evalEndyrlist"          "invyrs"                 "surveynm"              </span></span>
<span><span class="co">#&gt; [10] "SURVEY"                 "plotnm"                 "PLOT"                  </span></span>
<span><span class="co">#&gt; [13] "POP_PLOT_STRATUM_ASSGN" "ppsanm"                 "ppsaflds"              </span></span>
<span><span class="co">#&gt; [16] "ppsaindb"</span></span>
<span><span class="va">WYeval</span><span class="op">$</span><span class="va">evalidlist</span></span>
<span><span class="co">#&gt; $Wyoming</span></span>
<span><span class="co">#&gt; [1] 562101</span></span>
<span><span class="va">WYeval</span><span class="op">$</span><span class="va">invyrs</span></span>
<span><span class="co">#&gt; $Wyoming</span></span>
<span><span class="co">#&gt;  [1] 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021</span></span>
<span><span class="va">WYeval</span><span class="op">$</span><span class="va">invyrtab</span></span>
<span><span class="co">#&gt;     STATECD INVYR NBRPLOTS</span></span>
<span><span class="co">#&gt;       &lt;int&gt; &lt;int&gt;    &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1:      56  2011     1060</span></span>
<span><span class="co">#&gt;  2:      56  2012     1077</span></span>
<span><span class="co">#&gt;  3:      56  2013     1013</span></span>
<span><span class="co">#&gt;  4:      56  2014     1073</span></span>
<span><span class="co">#&gt;  5:      56  2015     1061</span></span>
<span><span class="co">#&gt;  6:      56  2016     1067</span></span>
<span><span class="co">#&gt;  7:      56  2017     1068</span></span>
<span><span class="co">#&gt;  8:      56  2018     1019</span></span>
<span><span class="co">#&gt;  9:      56  2019     1058</span></span>
<span><span class="co">#&gt; 10:      56  2020     1072</span></span>
<span><span class="co">#&gt; 11:      56  2021     1058</span></span>
<span><span class="va">WYeval</span><span class="op">$</span><span class="va">invtype</span></span>
<span><span class="co">#&gt; [1] "ANNUAL"</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-2-get-most-current-evaluations-for-new-york-for-vol-and-grm-evaltypes">Example 2: Get most current evaluations for New York for VOL and GRM
evalTypes<a class="anchor" aria-label="anchor" href="#example-2-get-most-current-evaluations-for-new-york-for-vol-and-grm-evaltypes"></a>
</h4>
<pre><code><span><span class="va">NYeval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetEvalid.html">DBgetEvalid</a></span><span class="op">(</span>states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York"</span><span class="op">)</span>, </span>
<span>                      evalType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VOL"</span>, <span class="st">"GRM"</span><span class="op">)</span>,</span>
<span>                      evalCur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for NY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for NY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for NY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for NY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for NY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for NY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: New York(36)...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">NYeval</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "rslst"                  "evalidlist"            </span></span>
<span><span class="co">#&gt;  [4] "invtype"                "invyrtab"               "evalTypelist"          </span></span>
<span><span class="co">#&gt;  [7] "evalEndyrlist"          "invyrs"                 "surveynm"              </span></span>
<span><span class="co">#&gt; [10] "SURVEY"                 "plotnm"                 "PLOT"                  </span></span>
<span><span class="co">#&gt; [13] "POP_PLOT_STRATUM_ASSGN" "ppsanm"                 "ppsaflds"              </span></span>
<span><span class="co">#&gt; [16] "ppsaindb"</span></span>
<span><span class="va">NYeval</span><span class="op">$</span><span class="va">evalidlist</span></span>
<span><span class="co">#&gt; $`New York`</span></span>
<span><span class="co">#&gt; [1] 362201 362203</span></span>
<span><span class="va">NYeval</span><span class="op">$</span><span class="va">evalTypelist</span></span>
<span><span class="co">#&gt; $`New York`</span></span>
<span><span class="co">#&gt; [1] "EXPVOL"  "EXPGROW"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="dbgetxy">
<code>DBgetXY()</code><a class="anchor" aria-label="anchor" href="#dbgetxy"></a>
</h3>
<p>The <code>DBgetXY</code> function queries XY public coordinate data
from FIA’ online publicly-available DataMart or SQLite database.</p>
<div class="section level4">
<h4 id="example1-get-xy-data-for-the-state-of-wyoming-for-the-most-current-evaluation">Example1: Get xy data for the state of Wyoming for the most current
evaluation<a class="anchor" aria-label="anchor" href="#example1-get-xy-data-for-the-state-of-wyoming-for-the-most-current-evaluation"></a>
</h4>
<pre><code><span><span class="va">xydat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetXY.html">DBgetXY</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>, </span>
<span>                  datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                  eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                  eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; p AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.*</span></span>
<span><span class="co">#&gt; FROM POP_PLOT_STRATUM_ASSGN ppsa </span></span>
<span><span class="co">#&gt; JOIN XYdf p ON (ppsa.PLT_CN = p.CN) </span></span>
<span><span class="co">#&gt;   WHERE EVALID in(562101))</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN p ON (xy.CN = p.CN)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">xydat1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "xyCur_PUBLIC"           "xyqry"                  "xy_opts"               </span></span>
<span><span class="co">#&gt; [4] "pjoinid"                "invyrlst"               "evalInfo"              </span></span>
<span><span class="co">#&gt; [7] "pop_plot_stratum_assgn"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">xydat1</span><span class="op">$</span><span class="va">xyCur_PUBLIC</span><span class="op">)</span></span>
<span><span class="co">#&gt;             PLT_CN LON_PUBLIC LAT_PUBLIC STATECD UNITCD COUNTYCD  PLOT</span></span>
<span><span class="co">#&gt;             &lt;char&gt;      &lt;num&gt;      &lt;num&gt;   &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1: 276307975489998  -105.8203   44.97642      56      3        5 90582</span></span>
<span><span class="co">#&gt; 2: 282479222489998  -109.9348   44.24736      56      1       29 90583</span></span>
<span><span class="co">#&gt; 3: 339004000489998  -104.3743   44.61294      56      3       11 88410</span></span>
<span><span class="co">#&gt; 4: 339004001489998  -104.0644   44.12116      56      3       45 83723</span></span>
<span><span class="co">#&gt; 5: 339004002489998  -104.3143   44.56942      56      3       11 89681</span></span>
<span><span class="co">#&gt; 6: 339004003489998  -104.4921   44.52617      56      3       11 85577</span></span>
<span><span class="co">#&gt;            PLOT_ID COUNTYFIPS</span></span>
<span><span class="co">#&gt;             &lt;char&gt;     &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: PID560300590582      56005</span></span>
<span><span class="co">#&gt; 2: PID560102990583      56029</span></span>
<span><span class="co">#&gt; 3: PID560301188410      56011</span></span>
<span><span class="co">#&gt; 4: PID560304583723      56045</span></span>
<span><span class="co">#&gt; 5: PID560301189681      56011</span></span>
<span><span class="co">#&gt; 6: PID560301185577      56011</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-2-add-a-variable-in-plot-table-plot_status_cd-and-output-as-a-spatial-object">Example 2: Add a variable in plot table (PLOT_STATUS_CD) and output
as a spatial object<a class="anchor" aria-label="anchor" href="#example-2-add-a-variable-in-plot-table-plot_status_cd-and-output-as-a-spatial-object"></a>
</h4>
<pre><code><span><span class="va">xydat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetXY.html">DBgetXY</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>, </span>
<span>                  datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                  eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                  eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>                  pvars2keep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PLOT_STATUS_CD"</span><span class="op">)</span>,</span>
<span>                  issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; Warning: package 'RSQLite' was built under R version 4.4.3</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; p AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.*</span></span>
<span><span class="co">#&gt; FROM POP_PLOT_STRATUM_ASSGN ppsa </span></span>
<span><span class="co">#&gt; JOIN XYdf p ON (ppsa.PLT_CN = p.CN) </span></span>
<span><span class="co">#&gt;   WHERE EVALID in(562101))</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT, xy.PLOT_STATUS_CD</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN p ON (xy.CN = p.CN)</span></span>
<span></span>
<span><span class="va">spxy2</span> <span class="op">&lt;-</span> <span class="va">xydat2</span><span class="op">$</span><span class="va">spxy</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-3-get-xy-data-for-wyoming-inventory-years-2015-to-2019">Example 3: Get XY data for Wyoming, inventory years 2015 to
2019<a class="anchor" aria-label="anchor" href="#example-3-get-xy-data-for-wyoming-inventory-years-2015-to-2019"></a>
</h4>
<pre><code><span><span class="va">xydat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetXY.html">DBgetXY</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Vermont"</span>, </span>
<span>                  datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                  eval <span class="op">=</span> <span class="st">"custom"</span>,</span>
<span>                  eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>invyrs <span class="op">=</span> <span class="fl">2017</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span>,</span>
<span>                  issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for VT ...</span></span>
<span><span class="co">#&gt; Warning: package 'RSQLite' was built under R version 4.4.3</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; p AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.CN, p.LON, p.LAT, p.INVYR, p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf p</span></span>
<span><span class="co">#&gt;   INNER JOIN SURVEY survey </span></span>
<span><span class="co">#&gt;                   ON (survey.CN = p.SRV_CN AND survey.ANN_INVENTORY = 'Y') </span></span>
<span><span class="co">#&gt;   WHERE p.STATECD in(50) and p.PLOT_STATUS_CD &lt;&gt; 3 and p.SUBCYCLE &lt;&gt; 99 and p.INVYR in(2017, 2018, 2019))</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.INVYR, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN p ON (xy.CN = p.CN)</span></span>
<span></span>
<span><span class="va">spxy3</span> <span class="op">&lt;-</span> <span class="va">xydat3</span><span class="op">$</span><span class="va">spxy</span></span>
<span></span>
<span><span class="co">## Now only include P2 plots only (intensity1 = TRUE)</span></span>
<span><span class="va">xydat3b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetXY.html">DBgetXY</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Vermont"</span>, </span>
<span>                   datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                   eval <span class="op">=</span> <span class="st">"custom"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>invyrs <span class="op">=</span> <span class="fl">2017</span><span class="op">:</span><span class="fl">2019</span><span class="op">)</span>,</span>
<span>                   intensity1 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for VT ...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; p AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.CN, p.LON, p.LAT, p.INVYR, p.INTENSITY, p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf p</span></span>
<span><span class="co">#&gt;   INNER JOIN SURVEY survey </span></span>
<span><span class="co">#&gt;                   ON (survey.CN = p.SRV_CN AND survey.ANN_INVENTORY = 'Y') </span></span>
<span><span class="co">#&gt;   WHERE p.STATECD in(50) and p.PLOT_STATUS_CD &lt;&gt; 3 and p.SUBCYCLE &lt;&gt; 99 and p.INTENSITY IN ('1') and p.INVYR in(2017, 2018, 2019))</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.INVYR, xy.INTENSITY, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN p ON (xy.CN = p.CN)</span></span>
<span></span>
<span><span class="va">spxy3b</span> <span class="op">&lt;-</span> <span class="va">xydat3b</span><span class="op">$</span><span class="va">spxy</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="dbgetplots">
<code>DBgetPlots()</code><a class="anchor" aria-label="anchor" href="#dbgetplots"></a>
</h3>
<p>The <code>DBgetPlots</code> function extracts plot-level data from
FIA’s online DataMart or SQLite database.</p>
<div class="section level4">
<h4 id="example-1-get-data-for-rhode-island-most-current-fia-evaluation-all-plots-">Example 1: Get data for Rhode Island, most current FIA Evaluation,
all plots.<a class="anchor" aria-label="anchor" href="#example-1-get-data-for-rhode-island-most-current-fia-evaluation-all-plots-"></a>
</h4>
<pre><code><span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Rhode Island"</span>, </span>
<span>                   datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>, </span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>                   issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Rhode Island(44)...</span></span>
<span><span class="co">#&gt; issp=TRUE, but getxy = FALSE...  changing getxy = TRUE</span></span>
<span><span class="co">#&gt; getting most current data for XY</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Rhode Island...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; 44 - ppsa.EVALID IN(442200)</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; maxyear AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT, MAX(p.INVYR) maxyr  </span></span>
<span><span class="co">#&gt; FROM XYdf p</span></span>
<span><span class="co">#&gt;   INNER JOIN SURVEY survey </span></span>
<span><span class="co">#&gt;                   ON (survey.CN = p.SRV_CN AND survey.ANN_INVENTORY = 'Y') </span></span>
<span><span class="co">#&gt;   WHERE p.STATECD in(44) and p.PLOT_STATUS_CD &lt;&gt; 3 and p.SUBCYCLE &lt;&gt; 99</span></span>
<span><span class="co">#&gt;   GROUP BY p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT)</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.MEASYEAR, xy.PLOT_STATUS_CD, xy.INVYR, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT, xy.INTENSITY</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN maxyear ON (xy.STATECD = maxyear.STATECD and xy.UNITCD = maxyear.UNITCD and xy.COUNTYCD = maxyear.COUNTYCD and xy.PLOT = maxyear.PLOT and xy.INVYR = maxyear.maxyr)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for RI ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (RI) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( RI )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "xyCur_PUBLIC"          </span></span>
<span><span class="co">#&gt;  [7] "pop_plot_stratum_assgn" "evalid"                 "pltcnt"                </span></span>
<span><span class="co">#&gt; [10] "invyrs"                 "evalInfo"               "ref_species"           </span></span>
<span><span class="co">#&gt; [13] "args"</span></span>
<span><span class="va">plt1</span> <span class="op">&lt;-</span> <span class="va">dat1</span><span class="op">$</span><span class="va">tabs</span><span class="op">$</span><span class="va">plt</span></span>
<span><span class="va">spxy1</span> <span class="op">&lt;-</span> <span class="va">dat1</span><span class="op">$</span><span class="va">xyCur_PUBLIC</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">plt1</span><span class="op">$</span><span class="va">INVYR</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 2016 2017 2018 2019 2020 2021 2022 </span></span>
<span><span class="co">#&gt;   38   40   38   36   37   41   38</span></span></code></pre>
<pre><code><span><span class="co"># Add a filter to include only plots with Northern red oak forest type (FORTYPCD == 505)</span></span>
<span><span class="co"># Note: *allFilter* filters for plots and/or conditions for all states specified.</span></span>
<span></span>
<span><span class="va">dat1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Rhode Island"</span>, </span>
<span>                    datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                    eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                    eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                             Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>                    issp <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                    allFilter <span class="op">=</span> <span class="st">"FORTYPCD == 505"</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Rhode Island(44)...</span></span>
<span><span class="co">#&gt; issp=TRUE, but getxy = FALSE...  changing getxy = TRUE</span></span>
<span><span class="co">#&gt; getting most current data for XY</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Rhode Island...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; 44 - ppsa.EVALID IN(442200)</span></span>
<span><span class="co">#&gt; filter removed 346 records: FORTYPCD == 505</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; maxyear AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT, MAX(p.INVYR) maxyr  </span></span>
<span><span class="co">#&gt; FROM XYdf p</span></span>
<span><span class="co">#&gt;   INNER JOIN SURVEY survey </span></span>
<span><span class="co">#&gt;                   ON (survey.CN = p.SRV_CN AND survey.ANN_INVENTORY = 'Y') </span></span>
<span><span class="co">#&gt;   WHERE p.STATECD in(44) and p.PLOT_STATUS_CD &lt;&gt; 3 and p.SUBCYCLE &lt;&gt; 99</span></span>
<span><span class="co">#&gt;   GROUP BY p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT)</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.MEASYEAR, xy.PLOT_STATUS_CD, xy.INVYR, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT, xy.INTENSITY</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN maxyear ON (xy.STATECD = maxyear.STATECD and xy.UNITCD = maxyear.UNITCD and xy.COUNTYCD = maxyear.COUNTYCD and xy.PLOT = maxyear.PLOT and xy.INVYR = maxyear.maxyr)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for RI ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (RI) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( RI )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat1b</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "xyCur_PUBLIC"          </span></span>
<span><span class="co">#&gt;  [7] "pop_plot_stratum_assgn" "evalid"                 "pltcnt"                </span></span>
<span><span class="co">#&gt; [10] "invyrs"                 "evalInfo"               "ref_species"           </span></span>
<span><span class="co">#&gt; [13] "args"</span></span>
<span><span class="va">spxy1b</span> <span class="op">&lt;-</span> <span class="va">dat1b</span><span class="op">$</span><span class="va">xyCur_PUBLIC</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">spxy1b</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 15 14</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-3-get-data-for-delaware-most-current-fia-evaluation-include-plotgeom-data-and-subplot-tables">Example 3: Get data for Delaware, most current FIA Evaluation,
include plotgeom data and subplot tables<a class="anchor" aria-label="anchor" href="#example-3-get-data-for-delaware-most-current-fia-evaluation-include-plotgeom-data-and-subplot-tables"></a>
</h4>
<pre><code><span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Delaware"</span>, </span>
<span>                   datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>                   issubp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   addplotgeom <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Delaware(10)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Delaware...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOTGEOM for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; 10 - ppsa.EVALID IN(102300)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for DE ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (DE) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting subplot data from SUBPLOT/SUBP_COND (DE) ...</span></span>
<span><span class="co">#&gt; downloading and extracting SUBPLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting SUBP_COND for DE ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( DE )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "evalid"                 "pltcnt"                 "invyrs"                </span></span>
<span><span class="co">#&gt; [10] "evalInfo"               "ref_species"            "args"</span></span>
<span><span class="va">tabs2</span> <span class="op">&lt;-</span> <span class="va">dat2</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="va">plt2</span> <span class="op">&lt;-</span> <span class="va">tabs2</span><span class="op">$</span><span class="va">plt</span></span>
<span></span>
<span><span class="co">## subplot and subp_cond tables are added to tabs list</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree"      "subplot"   "subp_cond" "plt"       "cond"</span></span>
<span></span>
<span><span class="co">## PLOTGEOM data are appended to plt table (e.g., ALP_ADFORCD, FVS_VARIANT)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plt2</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 CN     PREV_PLT_CN INVYR STATECD CYCLE SUBCYCLE UNITCD COUNTYCD</span></span>
<span><span class="co">#&gt; 1 1093478670290487 304032774489998  2023      10     8        3      1        5</span></span>
<span><span class="co">#&gt; 2 1093478671290487 304032775489998  2023      10     8        3      1        5</span></span>
<span><span class="co">#&gt; 3 1093478672290487 304032776489998  2023      10     8        3      1        5</span></span>
<span><span class="co">#&gt; 4 1093478673290487 304032777489998  2023      10     8        3      1        5</span></span>
<span><span class="co">#&gt; 5 1093478674290487 304032778489998  2023      10     8        3      1        3</span></span>
<span><span class="co">#&gt; 6 1093478675290487 304032779489998  2023      10     8        3      1        3</span></span>
<span><span class="co">#&gt;   PLOT PLOT_STATUS_CD PLOT_NONSAMPLE_REASN_CD SAMP_METHOD_CD SUBP_EXAMINE_CD</span></span>
<span><span class="co">#&gt; 1  595              1                      NA              1               4</span></span>
<span><span class="co">#&gt; 2  334              3                       2              1               4</span></span>
<span><span class="co">#&gt; 3  617              2                      NA              2               1</span></span>
<span><span class="co">#&gt; 4  410              3                       2              1               4</span></span>
<span><span class="co">#&gt; 5  598              2                      NA              2               1</span></span>
<span><span class="co">#&gt; 6   19              2                      NA              2               1</span></span>
<span><span class="co">#&gt;   MANUAL MACRO_BREAKPOINT_DIA INTENSITY MEASYEAR MEASMON MEASDAY REMPER KINDCD</span></span>
<span><span class="co">#&gt; 1    9.0                   NA         1     2023      10      16     NA      1</span></span>
<span><span class="co">#&gt; 2    9.0                   NA         1     2024       3      22     NA      2</span></span>
<span><span class="co">#&gt; 3    9.2                   NA         1     2023       6       1     NA      2</span></span>
<span><span class="co">#&gt; 4    9.0                   NA         1     2023       8       3     NA      1</span></span>
<span><span class="co">#&gt; 5    9.2                   NA         1     2023       6       1     NA      2</span></span>
<span><span class="co">#&gt; 6    9.2                   NA         1     2023       6       1     NA      2</span></span>
<span><span class="co">#&gt;   DESIGNCD RDDISTCD WATERCD LON_PUBLIC LAT_PUBLIC ELEV_PUBLIC GROW_TYP_CD</span></span>
<span><span class="co">#&gt; 1        1        3       0  -75.42634   38.76185          40          NA</span></span>
<span><span class="co">#&gt; 2        1       NA      NA  -75.66730   38.60185          20           2</span></span>
<span><span class="co">#&gt; 3        1       NA      NA  -75.19065   38.59463          10           2</span></span>
<span><span class="co">#&gt; 4        1       NA      NA  -75.30461   38.63188          20          NA</span></span>
<span><span class="co">#&gt; 5        1       NA      NA  -75.76654   39.62781          90           2</span></span>
<span><span class="co">#&gt; 6        1       NA      NA  -75.52052   39.75933          50           2</span></span>
<span><span class="co">#&gt;   MORT_TYP_CD P2PANEL P3PANEL SUBPANEL DECLINATION NF_PLOT_STATUS_CD</span></span>
<span><span class="co">#&gt; 1          NA       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 2           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 3           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 4          NA       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 5           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 6           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt;   NF_PLOT_NONSAMPLE_REASN_CD NF_SAMPLING_STATUS_CD P2VEG_SAMPLING_STATUS_CD</span></span>
<span><span class="co">#&gt; 1                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 2                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 3                         NA                    NA                        0</span></span>
<span><span class="co">#&gt; 4                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 5                         NA                    NA                        0</span></span>
<span><span class="co">#&gt; 6                         NA                    NA                        0</span></span>
<span><span class="co">#&gt;   P2VEG_SAMPLING_LEVEL_DETAIL_CD INVASIVE_SAMPLING_STATUS_CD</span></span>
<span><span class="co">#&gt; 1                             NA                           0</span></span>
<span><span class="co">#&gt; 2                             NA                           0</span></span>
<span><span class="co">#&gt; 3                             NA                           0</span></span>
<span><span class="co">#&gt; 4                             NA                           0</span></span>
<span><span class="co">#&gt; 5                             NA                           0</span></span>
<span><span class="co">#&gt; 6                             NA                           0</span></span>
<span><span class="co">#&gt;   INVASIVE_SPECIMEN_RULE_CD DESIGNCD_P2A QA_STATUS       MODIFIED_DATE CONGCD</span></span>
<span><span class="co">#&gt; 1                        NA           NA         1 2025-02-03 13:34:42   1000</span></span>
<span><span class="co">#&gt; 2                        NA           NA         1 2025-02-03 08:29:48   1000</span></span>
<span><span class="co">#&gt; 3                        NA           NA         1 2025-02-03 13:34:42   1000</span></span>
<span><span class="co">#&gt; 4                        NA           NA         1 2025-02-03 13:34:42   1000</span></span>
<span><span class="co">#&gt; 5                        NA           NA         1 2025-02-03 13:34:42   1000</span></span>
<span><span class="co">#&gt; 6                        NA           NA         1 2025-02-03 13:34:42   1000</span></span>
<span><span class="co">#&gt;   ECOSUBCD     HUC EMAP_HEX ALP_ADFORCD FVS_VARIANT FVS_LOC_CD FVS_REGION</span></span>
<span><span class="co">#&gt; 1    232Hd 2080109     1720          NA          NE        921          9</span></span>
<span><span class="co">#&gt; 2    232Hd 2080109     1721          NA          NE        921          9</span></span>
<span><span class="co">#&gt; 3    232Hc 2040303     1608          NA          NE        921          9</span></span>
<span><span class="co">#&gt; 4    232Hc 2040303     1608          NA          NE        921          9</span></span>
<span><span class="co">#&gt; 5    232Hd 2040205     2061          NA          NE        921          9</span></span>
<span><span class="co">#&gt; 6    232Ad 2040205     1945          NA          NE        921          9</span></span>
<span><span class="co">#&gt;   FVS_FOREST FVS_DISTRICT ROADLESSCD NBRCND NBRCNDSAMP NBRCNDFOR NBRCNDFTYP</span></span>
<span><span class="co">#&gt; 1         21           NA         NA      1          1         1          1</span></span>
<span><span class="co">#&gt; 2         21           NA         NA      1          0         0          0</span></span>
<span><span class="co">#&gt; 3         21           NA         NA      1          1         0          0</span></span>
<span><span class="co">#&gt; 4         21           NA         NA      1          0         0          0</span></span>
<span><span class="co">#&gt; 5         21           NA         NA      1          1         0          0</span></span>
<span><span class="co">#&gt; 6         21           NA         NA      1          1         0          0</span></span>
<span><span class="co">#&gt;   CCLIVEPLT               FORNONSAMP         PLOT_ID</span></span>
<span><span class="co">#&gt; 1        85           Sampled-Forest PID100100500595</span></span>
<span><span class="co">#&gt; 2        95 Nonsampled-Denied access PID100100500334</span></span>
<span><span class="co">#&gt; 3         3        Sampled-Nonforest PID100100500617</span></span>
<span><span class="co">#&gt; 4        90 Nonsampled-Denied access PID100100500410</span></span>
<span><span class="co">#&gt; 5         9        Sampled-Nonforest PID100100300598</span></span>
<span><span class="co">#&gt; 6        15        Sampled-Nonforest PID100100300019</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-3-get-data-for-delaware-most-current-fia-evaluation-include-pop-tables">Example 3: Get data for Delaware, most current FIA Evaluation,
include pop tables<a class="anchor" aria-label="anchor" href="#example-3-get-data-for-delaware-most-current-fia-evaluation-include-pop-tables"></a>
</h4>
<pre><code><span><span class="va">dat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Delaware"</span>, </span>
<span>                   datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>                   savePOP <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   othertables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POP_STRATUM"</span>, <span class="st">"POP_ESTN_UNIT"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Delaware(10)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Delaware...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for DE ...</span></span>
<span><span class="co">#&gt; 10 - ppsa.EVALID IN(102300)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for DE ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (DE) ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for DE ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: GETTING POP_STRATUM (DE)...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: GETTING POP_ESTN_UNIT (DE)...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( DE )...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_STRATUM DATA ( DE )...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_ESTN_UNIT DATA ( DE )...</span></span>
<span></span>
<span><span class="co">## savePOP = TRUE, saves the POP_PLOT_STRATUM_ASSGN table used to select plots </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "pop_stratum"            "pop_estn_unit"          "evalid"                </span></span>
<span><span class="co">#&gt; [10] "pltcnt"                 "invyrs"                 "evalInfo"              </span></span>
<span><span class="co">#&gt; [13] "ref_species"            "args"</span></span>
<span></span>
<span><span class="co">## pop_stratum and pop_estn_unit tables are added to tabs list</span></span>
<span><span class="va">tabs3</span> <span class="op">&lt;-</span> <span class="va">dat3</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree"          "pop_stratum"   "pop_estn_unit" "plt"          </span></span>
<span><span class="co">#&gt; [5] "cond"</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-4-export-plot-level-data-to-a-csv-file">Example 4: Export plot-level data to a CSV file<a class="anchor" aria-label="anchor" href="#example-4-export-plot-level-data-to-a-csv-file"></a>
</h4>
<pre><code><span><span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Rhode Island"</span>, </span>
<span>           datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>           eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>           eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                    Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>           returndata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           savedata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/savedata_options.html" class="external-link">savedata_options</a></span><span class="op">(</span>outfolder <span class="op">=</span> <span class="va">outfolder</span>, </span>
<span>                                            out_fmt <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>                                            overwrite_layer <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Rhode Island(44)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Rhode Island...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; 44 - ppsa.EVALID IN(442200)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for RI ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (RI) ...</span></span>
<span><span class="co">#&gt; saving tree table...</span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( RI )...</span></span>
<span><span class="co">#&gt; saving plot table...</span></span>
<span><span class="co">#&gt; saving cond table...</span></span>
<span><span class="co">#&gt; saving pop_plot_stratum_assgn table...</span></span>
<span><span class="co">#&gt; saving ref_species...</span></span>
<span><span class="co">#&gt; saving pltcnt table...</span></span>
<span><span class="co">#&gt; $dbqueries</span></span>
<span><span class="co">#&gt; $dbqueries$`Rhode Island`</span></span>
<span><span class="co">#&gt; $dbqueries$`Rhode Island`$pltcond</span></span>
<span><span class="co">#&gt; [1] "select  p.CN, p.PREV_PLT_CN, p.INVYR, p.STATECD, p.CYCLE, p.SUBCYCLE, p.UNITCD, p.COUNTYCD, p.PLOT, p.PLOT_STATUS_CD, p.PLOT_NONSAMPLE_REASN_CD, p.SAMP_METHOD_CD, p.SUBP_EXAMINE_CD, p.MANUAL, p.MACRO_BREAKPOINT_DIA, p.INTENSITY, p.MEASYEAR, p.MEASMON, p.MEASDAY, p.REMPER, p.KINDCD, p.DESIGNCD, p.RDDISTCD, p.WATERCD, p.LON, p.LAT, p.ELEV, p.GROW_TYP_CD, p.MORT_TYP_CD, p.P2PANEL, p.P3PANEL, p.SUBPANEL, p.DECLINATION, p.NF_PLOT_STATUS_CD, p.NF_PLOT_NONSAMPLE_REASN_CD, p.NF_SAMPLING_STATUS_CD, p.P2VEG_SAMPLING_STATUS_CD, p.P2VEG_SAMPLING_LEVEL_DETAIL_CD, p.INVASIVE_SAMPLING_STATUS_CD, p.INVASIVE_SPECIMEN_RULE_CD, p.DESIGNCD_P2A, p.QA_STATUS, p.MODIFIED_DATE, c.PLT_CN, c.CONDID, c.COND_STATUS_CD, c.COND_NONSAMPLE_REASN_CD, c.RESERVCD, c.OWNCD, c.OWNGRPCD, c.ADFORCD, c.FORTYPCD, c.FLDTYPCD, c.MAPDEN, c.STDAGE, c.STDSZCD, c.FLDSZCD, c.SITECLCD, c.SICOND, c.SIBASE, c.SISP, c.STDORGCD, c.STDORGSP, c.PROP_BASIS, c.CONDPROP_UNADJ, c.MICRPROP_UNADJ, c.SUBPPROP_UNADJ, c.MACRPROP_UNADJ, c.SLOPE, c.ASPECT, c.PHYSCLCD, c.GSSTKCD, c.ALSTKCD, c.DSTRBCD1, c.DSTRBYR1, c.DSTRBCD2, c.DSTRBYR2, c.DSTRBCD3, c.DSTRBYR3, c.TRTCD1, c.TRTYR1, c.TRTCD2, c.TRTYR2, c.TRTCD3, c.TRTYR3, c.PRESNFCD, c.BALIVE, c.FLDAGE, c.FORTYPCDCALC, c.HABTYPCD1, c.HABTYPCD2, c.LIVE_CANOPY_CVR_PCT, c.LIVE_MISSING_CANOPY_CVR_PCT, c.CANOPY_CVR_SAMPLE_METHOD_CD, c.CARBON_DOWN_DEAD, c.CARBON_LITTER, c.CARBON_SOIL_ORG, c.CARBON_UNDERSTORY_AG, c.CARBON_UNDERSTORY_BG, c.NF_COND_STATUS_CD, c.NF_COND_NONSAMPLE_REASN_CD, c.LAND_COVER_CLASS_CD \nfrom POP_PLOT_STRATUM_ASSGN ppsa\nJOIN PLOT p ON (p.CN = ppsa.PLT_CN) \nJOIN COND c ON (c.PLT_CN = p.CN) \nwhere ppsa.EVALID IN(442200)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $dbqueries$`Rhode Island`$tree</span></span>
<span><span class="co">#&gt; [1] "SELECT DISTINCT t.CN, t.PLT_CN, t.PREV_TRE_CN, t.SUBP, t.TREE, t.CONDID, t.STATUSCD, t.SPCD, t.SPGRPCD, t.DIA, t.HT, t.ACTUALHT, t.HTCD, t.TREECLCD, t.CR, t.CCLCD, t.AGENTCD, t.CULL, t.DECAYCD, t.STOCKING, t.WDLDSTEM, t.MORTYR, t.UNCRCD, t.BHAGE, t.TOTAGE, t.MORTCD, t.MIST_CL_CD, t.STANDING_DEAD_CD, t.PREV_STATUS_CD, t.PREV_WDLDSTEM, t.RECONCILECD, t.PREVDIA, t.VOLCFGRS, t.VOLCFGRS_BARK, t.VOLCFGRS_STUMP, t.VOLCFGRS_STUMP_BARK, t.VOLCFGRS_TOP, t.VOLCFGRS_TOP_BARK, t.VOLCFNET, t.VOLCFNET_BARK, t.VOLCFSND, t.VOLCFSND_BARK, t.VOLCFSND_STUMP, t.VOLCFSND_STUMP_BARK, t.VOLCFSND_TOP, t.VOLCFSND_TOP_BARK, t.VOLCSGRS, t.VOLCSGRS_BARK, t.VOLCSNET, t.VOLCSNET_BARK, t.VOLCSSND, t.VOLCSSND_BARK, t.VOLTSGRS, t.VOLTSGRS_BARK, t.VOLTSSND, t.VOLTSSND_BARK, t.VOLBFGRS, t.VOLBFNET, t.VOLBSGRS, t.VOLBSNET, t.TPA_UNADJ, t.DRYBIO_AG, t.DRYBIO_BG, t.DRYBIO_BOLE, t.DRYBIO_BOLE_BARK, t.DRYBIO_BRANCH, t.DRYBIO_FOLIAGE, t.DRYBIO_SAWLOG, t.DRYBIO_SAWLOG_BARK, t.DRYBIO_STEM, t.DRYBIO_STEM_BARK, t.DRYBIO_STUMP, t.DRYBIO_STUMP_BARK, t.CARBON_BG, t.CARBON_AG\nFROM POP_PLOT_STRATUM_ASSGN ppsa\nJOIN PLOT p ON (p.CN = ppsa.PLT_CN)\nJOIN TREE t ON (t.PLT_CN = p.CN)\nWHERE ppsa.EVALID IN(442200)"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $pltcnt</span></span>
<span><span class="co">#&gt;     STABBR STATECD INVYR       PLOT_STATUS NBRPLTS</span></span>
<span><span class="co">#&gt; 1       RI      44  2016        Nonsampled       4</span></span>
<span><span class="co">#&gt; 2       RI      44  2016    Sampled-Forest      18</span></span>
<span><span class="co">#&gt; 3       RI      44  2016 Sampled-Nonforest      16</span></span>
<span><span class="co">#&gt; 4                                 Subtotal      38</span></span>
<span><span class="co">#&gt; 41      RI      44  2017        Nonsampled       9</span></span>
<span><span class="co">#&gt; 5       RI      44  2017    Sampled-Forest      18</span></span>
<span><span class="co">#&gt; 6       RI      44  2017 Sampled-Nonforest      13</span></span>
<span><span class="co">#&gt; 8                                 Subtotal      40</span></span>
<span><span class="co">#&gt; 7       RI      44  2018        Nonsampled       3</span></span>
<span><span class="co">#&gt; 81      RI      44  2018    Sampled-Forest      21</span></span>
<span><span class="co">#&gt; 9       RI      44  2018 Sampled-Nonforest      14</span></span>
<span><span class="co">#&gt; 12                                Subtotal      38</span></span>
<span><span class="co">#&gt; 10      RI      44  2019        Nonsampled       4</span></span>
<span><span class="co">#&gt; 11      RI      44  2019    Sampled-Forest      17</span></span>
<span><span class="co">#&gt; 121     RI      44  2019 Sampled-Nonforest      15</span></span>
<span><span class="co">#&gt; 16                                Subtotal      36</span></span>
<span><span class="co">#&gt; 13      RI      44  2020        Nonsampled       4</span></span>
<span><span class="co">#&gt; 14      RI      44  2020    Sampled-Forest      21</span></span>
<span><span class="co">#&gt; 15      RI      44  2020 Sampled-Nonforest      12</span></span>
<span><span class="co">#&gt; 20                                Subtotal      37</span></span>
<span><span class="co">#&gt; 161     RI      44  2021        Nonsampled       9</span></span>
<span><span class="co">#&gt; 17      RI      44  2021    Sampled-Forest      12</span></span>
<span><span class="co">#&gt; 18      RI      44  2021 Sampled-Nonforest      20</span></span>
<span><span class="co">#&gt; 24                                Subtotal      41</span></span>
<span><span class="co">#&gt; 19      RI      44  2022        Nonsampled       2</span></span>
<span><span class="co">#&gt; 201     RI      44  2022    Sampled-Forest      22</span></span>
<span><span class="co">#&gt; 21      RI      44  2022 Sampled-Nonforest      14</span></span>
<span><span class="co">#&gt; 28                                Subtotal      38</span></span>
<span><span class="co">#&gt; 29                                   Total     268</span></span>
<span></span>
<span><span class="co">## Read in data from outfolder</span></span>
<span><span class="va">plt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"plot.csv"</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plt</span><span class="op">)</span></span>
<span><span class="co">#&gt;           CN  PREV_PLT_CN INVYR STATECD CYCLE SUBCYCLE UNITCD COUNTYCD PLOT</span></span>
<span><span class="co">#&gt; 1 3.0523e+14 1.689988e+14  2016      44     7        4      1        7  343</span></span>
<span><span class="co">#&gt; 2 3.0523e+14 2.213545e+14  2016      44     7        4      1        9   68</span></span>
<span><span class="co">#&gt; 3 3.0523e+14 1.689988e+14  2016      44     7        4      1        7  119</span></span>
<span><span class="co">#&gt; 4 3.0523e+14 1.689987e+14  2016      44     7        4      1        7   62</span></span>
<span><span class="co">#&gt; 5 3.0523e+14 1.689988e+14  2016      44     7        4      1        9  342</span></span>
<span><span class="co">#&gt; 6 3.0523e+14 1.689988e+14  2016      44     7        4      1        5  319</span></span>
<span><span class="co">#&gt;   PLOT_STATUS_CD PLOT_NONSAMPLE_REASN_CD SAMP_METHOD_CD SUBP_EXAMINE_CD MANUAL</span></span>
<span><span class="co">#&gt; 1              2                      NA              2               4      7</span></span>
<span><span class="co">#&gt; 2              3                       2              1               4      7</span></span>
<span><span class="co">#&gt; 3              1                      NA              1               4      7</span></span>
<span><span class="co">#&gt; 4              1                      NA              1               4      7</span></span>
<span><span class="co">#&gt; 5              1                      NA              1               4      7</span></span>
<span><span class="co">#&gt; 6              2                      NA              2               4      7</span></span>
<span><span class="co">#&gt;   MACRO_BREAKPOINT_DIA INTENSITY MEASYEAR MEASMON MEASDAY REMPER KINDCD</span></span>
<span><span class="co">#&gt; 1                   NA         1     2016       6       1    6.0      2</span></span>
<span><span class="co">#&gt; 2                   NA         1     2016       5      13     NA      1</span></span>
<span><span class="co">#&gt; 3                   NA         1     2016       6      22    5.4      2</span></span>
<span><span class="co">#&gt; 4                   NA         1     2016       7      20    5.9      2</span></span>
<span><span class="co">#&gt; 5                   NA         1     2016       6      14    5.8      2</span></span>
<span><span class="co">#&gt; 6                   NA         1     2016       6       1    6.0      2</span></span>
<span><span class="co">#&gt;   DESIGNCD RDDISTCD WATERCD LON_PUBLIC LAT_PUBLIC ELEV_PUBLIC GROW_TYP_CD</span></span>
<span><span class="co">#&gt; 1        1       NA      NA  -71.34652   41.77542          30           2</span></span>
<span><span class="co">#&gt; 2        1       NA      NA  -71.51607   41.49760         250          NA</span></span>
<span><span class="co">#&gt; 3        1        2       0  -71.38642   41.97530         140           2</span></span>
<span><span class="co">#&gt; 4        1        1       0  -71.49510   41.84011         190           2</span></span>
<span><span class="co">#&gt; 5        1        5       2  -71.46445   41.60411          80           2</span></span>
<span><span class="co">#&gt; 6        1       NA      NA  -71.36327   41.53429           0           2</span></span>
<span><span class="co">#&gt;   MORT_TYP_CD P2PANEL P3PANEL SUBPANEL DECLINATION NF_PLOT_STATUS_CD</span></span>
<span><span class="co">#&gt; 1           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 2          NA       3       3        0          NA                NA</span></span>
<span><span class="co">#&gt; 3           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 4           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 5           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt; 6           2       2      NA        0          NA                NA</span></span>
<span><span class="co">#&gt;   NF_PLOT_NONSAMPLE_REASN_CD NF_SAMPLING_STATUS_CD P2VEG_SAMPLING_STATUS_CD</span></span>
<span><span class="co">#&gt; 1                         NA                    NA                        0</span></span>
<span><span class="co">#&gt; 2                         NA                     0                        1</span></span>
<span><span class="co">#&gt; 3                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 4                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 5                         NA                     0                        0</span></span>
<span><span class="co">#&gt; 6                         NA                    NA                        0</span></span>
<span><span class="co">#&gt;   P2VEG_SAMPLING_LEVEL_DETAIL_CD INVASIVE_SAMPLING_STATUS_CD</span></span>
<span><span class="co">#&gt; 1                             NA                           0</span></span>
<span><span class="co">#&gt; 2                              1                           1</span></span>
<span><span class="co">#&gt; 3                             NA                           0</span></span>
<span><span class="co">#&gt; 4                             NA                           0</span></span>
<span><span class="co">#&gt; 5                             NA                           0</span></span>
<span><span class="co">#&gt; 6                             NA                           0</span></span>
<span><span class="co">#&gt;   INVASIVE_SPECIMEN_RULE_CD DESIGNCD_P2A QA_STATUS       MODIFIED_DATE NBRCND</span></span>
<span><span class="co">#&gt; 1                        NA           NA         1 2025-01-21 08:46:18      1</span></span>
<span><span class="co">#&gt; 2                         1           NA         1 2025-01-21 08:46:18      1</span></span>
<span><span class="co">#&gt; 3                        NA           NA         1 2025-01-21 08:46:18      2</span></span>
<span><span class="co">#&gt; 4                        NA           NA         1 2025-01-10 12:44:25      2</span></span>
<span><span class="co">#&gt; 5                        NA           NA         1 2025-01-21 08:46:18      1</span></span>
<span><span class="co">#&gt; 6                        NA           NA         1 2025-01-10 11:15:06      1</span></span>
<span><span class="co">#&gt;   NBRCNDSAMP NBRCNDFOR NBRCNDFTYP CCLIVEPLT               FORNONSAMP</span></span>
<span><span class="co">#&gt; 1          1         0          0     27.00        Sampled-Nonforest</span></span>
<span><span class="co">#&gt; 2          0         0          0     85.00 Nonsampled-Denied access</span></span>
<span><span class="co">#&gt; 3          2         1          1     51.33           Sampled-Forest</span></span>
<span><span class="co">#&gt; 4          2         1          1     21.25           Sampled-Forest</span></span>
<span><span class="co">#&gt; 5          1         1          1     96.00           Sampled-Forest</span></span>
<span><span class="co">#&gt; 6          1         0          0      0.00        Sampled-Nonforest</span></span>
<span><span class="co">#&gt;           PLOT_ID</span></span>
<span><span class="co">#&gt; 1 PID440100700343</span></span>
<span><span class="co">#&gt; 2 PID440100900068</span></span>
<span><span class="co">#&gt; 3 PID440100700119</span></span>
<span><span class="co">#&gt; 4 PID440100700062</span></span>
<span><span class="co">#&gt; 5 PID440100900342</span></span>
<span><span class="co">#&gt; 6 PID440100500319</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-5-most-current-evaluation-for-multiple-evaltypes-all-vol-grm">Example 5: Most current evaluation for multiple evalTypes (‘ALL’,
‘VOL’, ‘GRM’)<a class="anchor" aria-label="anchor" href="#example-5-most-current-evaluation-for-multiple-evaltypes-all-vol-grm"></a>
</h4>
<pre><code><span><span class="va">dat5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Rhode Island"</span>, </span>
<span>                   datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VOL"</span>, <span class="st">"CHNG"</span>, <span class="st">"P2VEG"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Rhode Island(44)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Rhode Island...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for RI ...</span></span>
<span><span class="co">#&gt; 44 - ppsa.EVALID IN(442201, 442203, 442210)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING PLOT/COND CHANGE DATA ( RI ) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting change data from SUBP_COND_CHNG_MTRX (RI) ...</span></span>
<span><span class="co">#&gt; downloading and extracting SUBP_COND_CHNG_MTRX for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for RI ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (RI) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting veg data from P2VEG_SUBPLOT_SPP/P2VEG_SUBP_STRUCTURE (RI) ...</span></span>
<span><span class="co">#&gt; downloading and extracting P2VEG_SUBPLOT_SPP for RI ...</span></span>
<span><span class="co">#&gt; P2VEG_SUBPLOT_SPP has 0 rows</span></span>
<span><span class="co">#&gt; downloading and extracting P2VEG_SUBP_STRUCTURE for RI ...</span></span>
<span><span class="co">#&gt; no p2veg species data for RI</span></span>
<span><span class="co">#&gt; SELECT DISTINCT v.</span></span>
<span><span class="co">#&gt; FROM POP_PLOT_STRATUM_ASSGN ppsa</span></span>
<span><span class="co">#&gt; JOIN PLOT p ON (p.CN = ppsa.PLT_CN) </span></span>
<span><span class="co">#&gt; JOIN P2VEG_SUBPLOT_SPP v ON v.PLT_CN = p.CN</span></span>
<span><span class="co">#&gt; WHERE ppsa.EVALID IN (442210)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting subplot data from SUBPLOT/SUBP_COND (RI) ...</span></span>
<span><span class="co">#&gt; downloading and extracting SUBPLOT for RI ...</span></span>
<span><span class="co">#&gt; downloading and extracting SUBP_COND for RI ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( RI )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat5</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "evalid"                 "pltcnt"                 "invyrs"                </span></span>
<span><span class="co">#&gt; [10] "evalInfo"               "ref_species"            "args"</span></span>
<span><span class="va">tabs5</span> <span class="op">&lt;-</span> <span class="va">dat5</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "pltu"                 "condu"                "subp_cond_chng_mtrx" </span></span>
<span><span class="co">#&gt; [4] "tree"                 "p2veg_subp_structure" "subplot"             </span></span>
<span><span class="co">#&gt; [7] "subp_cond"            "plt"                  "cond"</span></span>
<span></span>
<span><span class="va">ppsa5</span> <span class="op">&lt;-</span> <span class="va">dat5</span><span class="op">$</span><span class="va">pop_plot_stratum_assgn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ppsa5</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 442201 442203 442210 </span></span>
<span><span class="co">#&gt;    234    207     15</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-6-get-data-for-a-set-of-evalids">Example 6: Get data for a set of evalids<a class="anchor" aria-label="anchor" href="#example-6-get-data-for-a-set-of-evalids"></a>
</h4>
<pre><code><span><span class="va">dat6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            evalid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">101800</span>, <span class="fl">101801</span>, <span class="fl">101803</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Delaware...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for DE ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for DE ...</span></span>
<span><span class="co">#&gt; 10 - ppsa.EVALID IN(101800, 101801, 101803)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for DE ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (DE) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( DE )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat6</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "evalid"                 "pltcnt"                 "invyrs"                </span></span>
<span><span class="co">#&gt; [10] "evalInfo"               "ref_species"            "args"</span></span>
<span><span class="va">tabs6</span> <span class="op">&lt;-</span> <span class="va">dat6</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs6</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree" "plt"  "cond"</span></span>
<span></span>
<span><span class="va">ppsa6</span> <span class="op">&lt;-</span> <span class="va">dat6</span><span class="op">$</span><span class="va">pop_plot_stratum_assgn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ppsa6</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 101800 101801 101803 </span></span>
<span><span class="co">#&gt;    436    397    374</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-7-get-data-by-endyr">Example 7: Get data by Endyr<a class="anchor" aria-label="anchor" href="#example-7-get-data-by-endyr"></a>
</h4>
<pre><code><span><span class="va">dat7</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Connecticut"</span><span class="op">)</span>, </span>
<span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>evalType <span class="op">=</span> <span class="st">"ALL"</span>,</span>
<span>                                            Endyr <span class="op">=</span> <span class="fl">2017</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; the parameter evalType is deprecated... use 'Type'</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for CT ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Connecticut(9)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Connecticut...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for CT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for CT ...</span></span>
<span><span class="co">#&gt; 9 - ppsa.EVALID IN(91700)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for CT ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (CT) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( CT )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat7</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "evalid"                 "pltcnt"                 "invyrs"                </span></span>
<span><span class="co">#&gt; [10] "evalInfo"               "ref_species"            "args"</span></span>
<span><span class="va">tabs7</span> <span class="op">&lt;-</span> <span class="va">dat7</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs7</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree" "plt"  "cond"</span></span>
<span></span>
<span><span class="va">ppsa7</span> <span class="op">&lt;-</span> <span class="va">dat7</span><span class="op">$</span><span class="va">pop_plot_stratum_assgn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">ppsa7</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 91700 </span></span>
<span><span class="co">#&gt;   537</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-8-get-data-for-multiple-inventory-years">Example 8: Get data for multiple inventory years<a class="anchor" aria-label="anchor" href="#example-8-get-data-for-multiple-inventory-years"></a>
</h4>
<pre><code><span><span class="va">dat8</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Vermont"</span>, </span>
<span>                   eval <span class="op">=</span> <span class="st">"custom"</span>,</span>
<span>                   eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>invyrs <span class="op">=</span> <span class="fl">2012</span><span class="op">:</span><span class="fl">2014</span>, </span>
<span>                                            evalType <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; the parameter evalType is deprecated... use 'Type'</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for VT ...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Vermont...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for VT ...</span></span>
<span><span class="co">#&gt; 50 - p.STATECD IN(50) and p.INVYR IN(2012, 2013, 2014) and p.SUBCYCLE &lt;&gt; 99</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for VT ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (VT) ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat8</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "states"    "tabs"      "tabIDs"    "dbqueries" "puniqueid" "pltcnt"   </span></span>
<span><span class="co">#&gt; [7] "invyrs"    "evalInfo"  "args"</span></span>
<span><span class="va">tabs8</span> <span class="op">&lt;-</span> <span class="va">dat8</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs8</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree" "plt"  "cond"</span></span>
<span><span class="va">plt8</span> <span class="op">&lt;-</span> <span class="va">tabs8</span><span class="op">$</span><span class="va">plt</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">plt8</span><span class="op">$</span><span class="va">INVYR</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 2012 2013 2014 </span></span>
<span><span class="co">#&gt;  240  239  167</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-9-get-data-for-periodic-inventory">Example 9: Get data for periodic inventory<a class="anchor" aria-label="anchor" href="#example-9-get-data-for-periodic-inventory"></a>
</h4>
<pre><code><span><span class="va">dat9</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>, </span>
<span>                    invtype <span class="op">=</span> <span class="st">"PERIODIC"</span>,</span>
<span>                    eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                    eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                     evalType <span class="op">=</span> <span class="st">"VOL"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Wyoming...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; 56 - ppsa.EVALID IN(560001)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for WY ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (WY) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( WY )...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat9</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "states"                 "tabs"                   "tabIDs"                </span></span>
<span><span class="co">#&gt;  [4] "dbqueries"              "puniqueid"              "pop_plot_stratum_assgn"</span></span>
<span><span class="co">#&gt;  [7] "evalid"                 "pltcnt"                 "invyrs"                </span></span>
<span><span class="co">#&gt; [10] "evalInfo"               "ref_species"            "args"</span></span>
<span><span class="va">tabs9</span> <span class="op">&lt;-</span> <span class="va">dat9</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabs9</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tree" "plt"  "cond"</span></span>
<span><span class="va">plt9</span> <span class="op">&lt;-</span> <span class="va">tabs9</span><span class="op">$</span><span class="va">plt</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">plt9</span><span class="op">$</span><span class="va">STATECD</span>, <span class="va">plt9</span><span class="op">$</span><span class="va">INVYR</span><span class="op">)</span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt;      2000</span></span>
<span><span class="co">#&gt;   56 9956</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-10-intensity">Example 10: Intensity<a class="anchor" aria-label="anchor" href="#example-10-intensity"></a>
</h4>
<p>The objective of this section is to understand the differences when
using INTENSITY=1.</p>
<pre><code><span><span class="va">dat10</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetPlots.html">DBgetPlots</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Vermont"</span>, </span>
<span>                    eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>                    eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                     Type <span class="op">=</span> <span class="st">"ALL"</span><span class="op">)</span>,</span>
<span>                    intensity1 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for VT ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Vermont(50)...</span></span>
<span><span class="co">#&gt; issp=TRUE, but getxy = FALSE...  changing getxy = TRUE</span></span>
<span><span class="co">#&gt; getting most current data for XY</span></span>
<span><span class="co">#&gt; ================================================================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; getting data for Vermont...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting COND for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for VT ...</span></span>
<span><span class="co">#&gt; 50 - ppsa.EVALID IN(502300) and p.INTENSITY = '1'</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for VT ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for VT ...</span></span>
<span><span class="co">#&gt; WITH </span></span>
<span><span class="co">#&gt; maxyear AS</span></span>
<span><span class="co">#&gt;  (SELECT distinct p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT, MAX(p.INVYR) maxyr  </span></span>
<span><span class="co">#&gt; FROM XYdf p</span></span>
<span><span class="co">#&gt;   INNER JOIN SURVEY survey </span></span>
<span><span class="co">#&gt;                   ON (survey.CN = p.SRV_CN AND survey.ANN_INVENTORY = 'Y') </span></span>
<span><span class="co">#&gt;   WHERE p.STATECD in(50) and p.PLOT_STATUS_CD &lt;&gt; 3 and p.SUBCYCLE &lt;&gt; 99 and p.INTENSITY IN ('1')</span></span>
<span><span class="co">#&gt;   GROUP BY p.STATECD, p.UNITCD, p.COUNTYCD, p.PLOT)</span></span>
<span><span class="co">#&gt; SELECT xy.CN, xy.LON, xy.LAT, xy.MEASYEAR, xy.PLOT_STATUS_CD, xy.INVYR, xy.INTENSITY, xy.STATECD, xy.UNITCD, xy.COUNTYCD, xy.PLOT</span></span>
<span><span class="co">#&gt; FROM XYdf xy</span></span>
<span><span class="co">#&gt; INNER JOIN maxyear ON (xy.STATECD = maxyear.STATECD and xy.UNITCD = maxyear.UNITCD and xy.COUNTYCD = maxyear.COUNTYCD and xy.PLOT = maxyear.PLOT and xy.INVYR = maxyear.maxyr)</span></span>
<span><span class="co">#&gt; downloading and extracting TREE for VT ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ## STATUS: Getting tree data from TREE (VT) ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ## STATUS: GETTING POP_PLOT_STRATUM_ASSGN DATA ( VT )...</span></span>
<span></span>
<span><span class="va">tabs10</span> <span class="op">&lt;-</span> <span class="va">dat10</span><span class="op">$</span><span class="va">tabs</span></span>
<span><span class="va">plt10</span> <span class="op">&lt;-</span> <span class="va">tabs10</span><span class="op">$</span><span class="va">plt</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">plt10</span><span class="op">$</span><span class="va">INVYR</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 2017 2018 2019 2020 2021 2022 2023 </span></span>
<span><span class="co">#&gt;  150  140  155  148  146  151  147</span></span>
<span><span class="va">spxy10</span> <span class="op">&lt;-</span> <span class="va">dat10</span><span class="op">$</span><span class="va">xyCur_PUBLIC</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="dbgetstrata">
<code>DBgetStrata()</code><a class="anchor" aria-label="anchor" href="#dbgetstrata"></a>
</h3>
<p>The <code>DBgetStrata</code> function queries the FIA database for
post-stratification information.</p>
<div class="section level4">
<h4 id="example1-get-strata-for-the-most-current-evaluation-for-wyoming">Example1: Get strata for the most current evaluation for
Wyoming<a class="anchor" aria-label="anchor" href="#example1-get-strata-for-the-most-current-evaluation-for-wyoming"></a>
</h4>
<pre><code><span><span class="va">strat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetStrata.html">DBgetStrata</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>, </span>
<span>                      eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Cur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">strat1</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "unitarea"   "unitvar"    "unitvar2"   "areavar"    "stratalut" </span></span>
<span><span class="co">#&gt;  [6] "strvar"     "getwt"      "getwtvar"   "evalid"     "pltassgn"  </span></span>
<span><span class="co">#&gt; [11] "pltassgnid"</span></span>
<span></span>
<span><span class="co">## Look at plot assign data</span></span>
<span><span class="va">pltassgn1</span> <span class="op">&lt;-</span> <span class="va">strat1</span><span class="op">$</span><span class="va">pltassgn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pltassgn1</span><span class="op">)</span></span>
<span><span class="co">#&gt;            PLT_CN UNITCD STATECD INVYR ESTN_UNIT COUNTYCD STRATUMCD EVALID</span></span>
<span><span class="co">#&gt; 1 276307975489998      3      56  2014         5        5         5 562101</span></span>
<span><span class="co">#&gt; 2 282479222489998      1      56  2013        29       29        12 562101</span></span>
<span><span class="co">#&gt; 3 339004000489998      3      56  2015        11       11         1 562101</span></span>
<span><span class="co">#&gt; 4 339004001489998      3      56  2015        45       45         5 562101</span></span>
<span><span class="co">#&gt; 5 339004002489998      3      56  2016        11       11         2 562101</span></span>
<span><span class="co">#&gt; 6 339004003489998      3      56  2016        11       11         1 562101</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">pltassgn1</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 562101</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">evalid</span>  </span>
<span><span class="co">#&gt; $Wyoming</span></span>
<span><span class="co">#&gt; [1] 562101</span></span>
<span></span>
<span><span class="co">## Look at area data for estimation unit</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">unitarea</span></span>
<span><span class="co">#&gt;    STATECD ESTN_UNIT ESTN_UNIT_DESCR   ACRES EVALID</span></span>
<span><span class="co">#&gt; 1       56         1      County 001 2757613 562101</span></span>
<span><span class="co">#&gt; 2       56         3      County 003 2021729 562101</span></span>
<span><span class="co">#&gt; 3       56         5      County 005 3072988 562101</span></span>
<span><span class="co">#&gt; 4       56         7      County 007 5096959 562101</span></span>
<span><span class="co">#&gt; 5       56         9      County 009 2729653 562101</span></span>
<span><span class="co">#&gt; 6       56        11      County 011 1837124 562101</span></span>
<span><span class="co">#&gt; 7       56        13      County 013 5930088 562101</span></span>
<span><span class="co">#&gt; 8       56        15      County 015 1428579 562101</span></span>
<span><span class="co">#&gt; 9       56        17      County 017 1283969 562101</span></span>
<span><span class="co">#&gt; 10      56        19      County 019 2671802 562101</span></span>
<span><span class="co">#&gt; 11      56        21      County 021 1720074 562101</span></span>
<span><span class="co">#&gt; 12      56        23      County 023 2616954 562101</span></span>
<span><span class="co">#&gt; 13      56        25      County 025 3440445 562101</span></span>
<span><span class="co">#&gt; 14      56        27      County 027 1681849 562101</span></span>
<span><span class="co">#&gt; 15      56        29      County 029 4459826 562101</span></span>
<span><span class="co">#&gt; 16      56        31      County 031 1350969 562101</span></span>
<span><span class="co">#&gt; 17      56        33      County 033 1617318 562101</span></span>
<span><span class="co">#&gt; 18      56        35      County 035 3158807 562101</span></span>
<span><span class="co">#&gt; 19      56        37      County 037 6714319 562101</span></span>
<span><span class="co">#&gt; 20      56        39      County 039 2701941 562101</span></span>
<span><span class="co">#&gt; 21      56        41      County 041 1336034 562101</span></span>
<span><span class="co">#&gt; 22      56        43      County 043 1435352 562101</span></span>
<span><span class="co">#&gt; 23      56        45      County 045 1536038 562101</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">unitvar</span></span>
<span><span class="co">#&gt; [1] "ESTN_UNIT"</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">unitvar2</span></span>
<span><span class="co">#&gt; [1] "STATECD"</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">areavar</span></span>
<span><span class="co">#&gt; [1] "ACRES"</span></span>
<span></span>
<span><span class="co">## Look at stratification data for estimation unit</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">strat1</span><span class="op">$</span><span class="va">stratalut</span><span class="op">)</span></span>
<span><span class="co">#&gt;   STATECD ESTN_UNIT STRATUMCD               STRATUM_DESCR P2POINTCNT P1POINTCNT</span></span>
<span><span class="co">#&gt; 1      56         1         1  High tree cover/Nonprivate         34     188590</span></span>
<span><span class="co">#&gt; 2      56         1         3   Low tree cover/Nonprivate         22     146522</span></span>
<span><span class="co">#&gt; 3      56         1        24          Tree cover/Private         14     151175</span></span>
<span><span class="co">#&gt; 4      56         1        58 Nontree/Nonprivate/Nonvisit        101     505654</span></span>
<span><span class="co">#&gt; 5      56         1        59    Nontree/Nonprivate/Visit         21     115149</span></span>
<span><span class="co">#&gt; 6      56         1        68    Nontree/Private/Nonvisit        241    1553813</span></span>
<span><span class="co">#&gt;   EVALID</span></span>
<span><span class="co">#&gt; 1 562101</span></span>
<span><span class="co">#&gt; 2 562101</span></span>
<span><span class="co">#&gt; 3 562101</span></span>
<span><span class="co">#&gt; 4 562101</span></span>
<span><span class="co">#&gt; 5 562101</span></span>
<span><span class="co">#&gt; 6 562101</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">strvar</span></span>
<span><span class="co">#&gt; [1] "STRATUMCD"</span></span>
<span><span class="va">strat1</span><span class="op">$</span><span class="va">getwtvar</span></span>
<span><span class="co">#&gt; [1] "P1POINTCNT"</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-2-get-strata-information-for-a-specific-evaluation-for-wyoming">Example 2: Get strata information for a specific evaluation for
Wyoming<a class="anchor" aria-label="anchor" href="#example-2-get-strata-information-for-a-specific-evaluation-for-wyoming"></a>
</h4>
<pre><code><span><span class="va">strat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetStrata.html">DBgetStrata</a></span><span class="op">(</span>eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>evalid <span class="op">=</span> <span class="fl">561200</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">strat2</span><span class="op">$</span><span class="va">pltassgn</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 561200</span></span>
<span><span class="va">strat2</span><span class="op">$</span><span class="va">evalid</span> </span>
<span><span class="co">#&gt; $Wyoming</span></span>
<span><span class="co">#&gt; [1] 561200</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="example-3-get-strata-information-for-wyoming-evaluation-ending-in-2014">Example 3: Get strata information for Wyoming, evaluation ending in
2014<a class="anchor" aria-label="anchor" href="#example-3-get-strata-information-for-wyoming-evaluation-ending-in-2014"></a>
</h4>
<pre><code><span><span class="va">strat3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DBgetStrata.html">DBgetStrata</a></span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Wyoming"</span>,</span>
<span>                      eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Endyr <span class="op">=</span> <span class="fl">2014</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; downloading and extracting SURVEY for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_GRP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_EVAL_TYP for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting PLOT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span><span class="co">#&gt; getting FIA Evaluation info for: Wyoming(56)...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_ESTN_UNIT for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_STRATUM for WY ...</span></span>
<span><span class="co">#&gt; downloading and extracting POP_PLOT_STRATUM_ASSGN for WY ...</span></span>
<span>                  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">strat3</span><span class="op">$</span><span class="va">pltassgn</span><span class="op">$</span><span class="va">EVALID</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 561401</span></span>
<span><span class="va">strat3</span><span class="op">$</span><span class="va">evalid</span> </span>
<span><span class="co">#&gt; $Wyoming</span></span>
<span><span class="co">#&gt; [1] 561401</span></span></code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
