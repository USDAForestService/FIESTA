<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>FIA plots - species distribution map • FIESTA</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="FIA plots - species distribution map">
<meta name="description" content="Generate plot-level data summaries of species precence and display with a map">
<meta property="og:description" content="Generate plot-level data summaries of species precence and display with a map">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FIESTA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/FIESTA_tutorial_GB.html">Green-book Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_MA.html">Model-Assisted Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_SA.html">Small Area Estimators</a></li>
    <li><a class="dropdown-item" href="../articles/FIESTA_tutorial_PB.html">Photo-Based Estimators</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/FIESTA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>FIA plots - species distribution map</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/master/vignettes/articles/FIESTA_FIAplots_species_distribution.Rmd" class="external-link"><code>vignettes/articles/FIESTA_FIAplots_species_distribution.Rmd</code></a></small>
      <div class="d-none name"><code>FIESTA_FIAplots_species_distribution.Rmd</code></div>
    </div>

    
    
<p>The FIESTA R package is an estimation engine that generates estimates
using FIA data for custom situations (Frescino et al. 2023). The package
provides functions for using FIA’s standard estimation techniques and
also includes different modules for using alternative estimation
strategies for unique situations (Frescino et al. 2022). The package
facilitates compilation of FIA and geospatial auxiliary information
needed for estimation and provides consistent output for reporting.</p>
<p>To use the FIESTA R package, you need to be familiar with the R
statistical software and also have a firm knowledge of the FIA database.
Please consult the FIA database description user guide (Version 9.0.1)
for variable descriptions (Burrill et al. 2021).</p>
<p>The following examples demonstrate how we use FIESTA for compiling
plot-level summaries.</p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>First install the necessary packages and define outfolders.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>scipen <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/FIESTA/">FIESTA</a></span><span class="op">)</span></span></code></pre></div>
<p>Next we can specify a few parameters:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spcd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">101</span>, <span class="fl">113</span><span class="op">)</span></span>
<span><span class="va">tfilter</span> <span class="op">&lt;-</span> <span class="fu">FIESTAutils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/internal_desc.html" class="external-link">getfilter</a></span><span class="op">(</span><span class="st">"SPCD"</span>, <span class="va">spcd</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the resulting filter and use the internal
<code>ref_species</code> table to decide on a name for the column in the
output data frame.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tfilter</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "SPCD %in% c(101, 113)"</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ref</span> <span class="op">&lt;-</span> <span class="va">ref_species</span><span class="op">[</span><span class="va">ref_species</span><span class="op">$</span><span class="va">SPCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">spcd</span>, <span class="op">]</span></span>
<span><span class="va">ref</span></span></code></pre></div>
<pre><code><span><span class="co">##      SPCD    COMMON_NAME GENUS    SPECIES VARIETY SUBSPECIES SPECIES_SYMBOL</span></span>
<span><span class="co">## 1595  113    limber pine Pinus   flexilis    &lt;NA&gt;       &lt;NA&gt;          PIFL2</span></span>
<span><span class="co">## 2029  101 whitebark pine Pinus albicaulis    &lt;NA&gt;       &lt;NA&gt;           PIAL</span></span>
<span><span class="co">##      E_SPGRPCD W_SPGRPCD C_SPGRPCD P_SPGRPCD WOODLAND SFTWD_HRDWD MAJOR_SPGRPCD</span></span>
<span><span class="co">## 1595         9        24        NA        NA        N           S             1</span></span>
<span><span class="co">## 2029         9        24        NA        NA        N           S             1</span></span>
<span><span class="co">##      JENKINS_TOTAL_B1 JENKINS_TOTAL_B2 DRYWT_TO_GREENWT_CONVERSION</span></span>
<span><span class="co">## 1595          -2.5356           2.4349                    1.822335</span></span>
<span><span class="co">## 2029          -2.5356           2.4349                    1.751189</span></span>
<span><span class="co">##      CARBON_RATIO_LIVE MODIFIED_DATE  SCIENTIFIC_NAME</span></span>
<span><span class="co">## 1595             0.480    2023-05-25   Pinus flexilis</span></span>
<span><span class="co">## 2029             0.478    2023-05-25 Pinus albicaulis</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spcd_name</span> <span class="op">&lt;-</span> <span class="st">"whitebark_limber"</span></span></code></pre></div>
<p>Finally we create a spatial points data frame using the internal
Wyoming plot data</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WYpltsp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spMakeSpatialPoints.html">spMakeSpatialPoints</a></span><span class="op">(</span>xyplt <span class="op">=</span> <span class="va">WYplt</span>,</span>
<span>                               xy.uniqueid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>                               xvar <span class="op">=</span> <span class="st">"LON_PUBLIC"</span>,</span>
<span>                               yvar <span class="op">=</span> <span class="st">"LAT_PUBLIC"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summarize-plots">Summarize Plots<a class="anchor" aria-label="anchor" href="#summarize-plots"></a>
</h2>
<p>Finally we can put all of the pieces together to get plot level
species presence/absence:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltdomdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datSumTreeDom.html">datSumTreeDom</a></span><span class="op">(</span>plt <span class="op">=</span> <span class="va">WYpltsp</span>,</span>
<span>                           tree <span class="op">=</span> <span class="va">WYtree</span>,</span>
<span>                           seed <span class="op">=</span> <span class="va">WYseed</span>,</span>
<span>                           bycond <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                           tsumvar <span class="op">=</span> <span class="st">"TPA_UNADJ"</span>,</span>
<span>                           tfilter <span class="op">=</span> <span class="va">tfilter</span>,</span>
<span>                           tdomtot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                           tdomtotnm <span class="op">=</span> <span class="va">spcd_name</span>,</span>
<span>                           seedlings <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                           presence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                           FIAname <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                           datSum_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>keepall <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tdomdat.pres</span> <span class="op">&lt;-</span> <span class="va">pltdomdat</span><span class="op">$</span><span class="va">tdomdat.pres</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tdomdat.pres</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 6 features and 22 fields</span></span>
<span><span class="co">## Geometry type: POINT</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: -106.0363 ymin: 42.26546 xmax: -105.6679 ymax: 42.41013</span></span>
<span><span class="co">## Geodetic CRS:  NAD83</span></span>
<span><span class="co">##               CN INVYR STATECD CYCLE UNITCD COUNTYCD  PLOT MEASYEAR RDDISTCD</span></span>
<span><span class="co">## 1 40404728010690  2013      56     3      2        1 86688     2013       NA</span></span>
<span><span class="co">## 2 40404729010690  2011      56     3      2        1 84596     2011        1</span></span>
<span><span class="co">## 3 40404730010690  2013      56     3      2        1 88993     2013        6</span></span>
<span><span class="co">## 4 40404731010690  2012      56     3      2        1 82340     2012       NA</span></span>
<span><span class="co">## 5 40404733010690  2012      56     3      2        1 82869     2012       NA</span></span>
<span><span class="co">## 6 40404734010690  2013      56     3      2        1 83304     2013       NA</span></span>
<span><span class="co">##   NF_SAMPLING_STATUS_CD PLOT_STATUS_CD NF_PLOT_STATUS_CD NBRCND NBRCNDSAMP</span></span>
<span><span class="co">## 1                     0              2                NA      1          1</span></span>
<span><span class="co">## 2                     0              1                NA      1          1</span></span>
<span><span class="co">## 3                     0              1                NA      1          1</span></span>
<span><span class="co">## 4                     0              2                NA      1          1</span></span>
<span><span class="co">## 5                     0              2                NA      1          1</span></span>
<span><span class="co">## 6                     0              2                NA      1          1</span></span>
<span><span class="co">##   NBRCNDFOR CCLIVEPLT        FORNONSAMP        PLOT_ID SPCD whitebark pine</span></span>
<span><span class="co">## 1         0         0 Sampled-Nonforest ID560200186688   NA              0</span></span>
<span><span class="co">## 2         1        17    Sampled-Forest ID560200184596  113              0</span></span>
<span><span class="co">## 3         1        41    Sampled-Forest ID560200188993  113              0</span></span>
<span><span class="co">## 4         0         0 Sampled-Nonforest ID560200182340   NA              0</span></span>
<span><span class="co">## 5         0         0 Sampled-Nonforest ID560200182869   NA              0</span></span>
<span><span class="co">## 6         0         0 Sampled-Nonforest ID560200183304   NA              0</span></span>
<span><span class="co">##   limber pine whitebark_limber                   geometry</span></span>
<span><span class="co">## 1           0                0 POINT (-105.9625 42.41013)</span></span>
<span><span class="co">## 2           1                1 POINT (-105.7277 42.40928)</span></span>
<span><span class="co">## 3           1                1 POINT (-105.6679 42.40953)</span></span>
<span><span class="co">## 4           0                0 POINT (-106.0313 42.35599)</span></span>
<span><span class="co">## 5           0                0 POINT (-105.8509 42.31655)</span></span>
<span><span class="co">## 6           0                0 POINT (-106.0363 42.26546)</span></span></code></pre>
<p>And we can plot the results to get a picture of the whitebark_limber
presence/absence distribution.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span> <span class="op">=</span> <span class="st">"lightgrey"</span>, <span class="st">"1"</span> <span class="op">=</span> <span class="st">"#009E73"</span><span class="op">)</span></span>
<span><span class="va">point_cols</span> <span class="op">&lt;-</span> <span class="va">cols</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">tdomdat.pres</span><span class="op">$</span><span class="va">whitebark_limber</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tdomdat.pres</span><span class="op">[</span> ,<span class="st">"whitebark_limber"</span><span class="op">]</span>, col <span class="op">=</span> <span class="va">point_cols</span>, pch <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></code></pre></div>
<p><img src="FIESTA_FIAplots_species_distribution_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
