<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FIESTA - Model-Assisted Estimators • FIESTA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="FIESTA - Model-Assisted Estimators">
<meta property="og:description" content="FIESTA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.6.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USDAForestService/FIESTA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FIESTA - Model-Assisted Estimators</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/HEAD/vignettes/FIESTA_tutorial_MA.Rmd" class="external-link"><code>vignettes/FIESTA_tutorial_MA.Rmd</code></a></small>
      <div class="hidden name"><code>FIESTA_tutorial_MA.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="model-assisted-ma-module-overview">Model-Assisted (MA) module overview<a class="anchor" aria-label="anchor" href="#model-assisted-ma-module-overview"></a>
</h2>
<p><code>FIESTA</code>’s Model-Assisted (MA) module calculates
population estimates and their sampling errors by taking advantage of
available model-assisted survey estimators from the <code>mase</code> R
package (McConville, et al. 2018). These estimators can use a variety of
auxiliary data to build models and predict over a response variable of
interest, while using a bias-correction term so that the bias of the
model does not depend on model mis-specification.</p>
<p>Functions in <code>FIESTA</code> used for fitting model-assisted
estimators include the <code>modMAarea</code> function for area
estimates and <code>modMAtree</code> for tree estimates. The
<code>modMApop</code> function is used to get population data needed for
model-assisted estimation. Below is a description and table of contents
for the sections related to these functions:</p>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th>FUNCTION</th>
<th>DESCRIPTION</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><a href="#modMApop">modMApop</a></td>
<td>Creates population data for model-assisted estimation.</td>
</tr>
<tr class="even">
<td><a href="#modMAarea">modMAarea</a></td>
<td>Produces area level estimates through model-assisted
estimation.</td>
</tr>
<tr class="odd">
<td><a href="#modMAtree">modMAtree</a></td>
<td>Produces tree level estimates through model-assisted
estimation.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="objective-of-tutorial">Objective of tutorial<a class="anchor" aria-label="anchor" href="#objective-of-tutorial"></a>
</h2>
<p>The main objective of this tutorial is to demonstrate how to use
<code>FIESTA</code> for generating estimates using estimators from
<code>mase</code>. The model-assisted estimators can be used with FIA’s
standard state-level population data (i.e, Evaluation) from the FIA
database (FIADB) and also population data from a custom boundary.</p>
<p>The following examples are for generating estimates and estimated
variances using standard FIA Evaluation data from FIA’s National
database, with custom Estimation unit and Stratification information.
The examples use data from three inventory years of field measurements
in the state of Wyoming, from FIADB_1.7.2.00, last updated June 20,
2018, downloaded on June 25, 2018 and stored as internal data objects in
<code>FIESTA</code>.</p>
<!-- The Green-Book estimators can be used with FIA's standard state-level population data (i.e, Evaluation) from the FIA database (FIADB) and also population data from a custom boundary. The population data includes a set of FIA plot data and summarized auxiliary information for post-stratification, including a table of area by estimation unit within the population, and a table of strata proportions by estimation unit. This tutorial steps through several examples using FIESTA's Green Book module, for three different populations: (POP1) an FIA standard Evaluation, Wyoming 561301; (POP2) a custom boundary with one population, Bighorn National Forest; and (POP3) a custom boundary with sub-populations, Bighorn National Forest Districts. All examples can be used with any population, standard or custom. -->
</div>
<div class="section level2">
<h2 id="example-data---wyoming-wy-inventory-years-2011-2012">Example data - Wyoming (WY), Inventory Years 2011-2012<a class="anchor" aria-label="anchor" href="#example-data---wyoming-wy-inventory-years-2011-2012"></a>
</h2>
<details><summary>
View MA Example Data
</summary><table class="table">
<colgroup>
<col width="12%">
<col width="87%">
</colgroup>
<thead><tr class="header">
<th>Data Frame</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>WYplt</td>
<td>WY plot-level data</td>
</tr>
<tr class="even">
<td>WYcond</td>
<td>WY condition-level data</td>
</tr>
<tr class="odd">
<td>WYtree</td>
<td>WY tree-level data</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th>External data</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>WYbighorn_adminbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest Administrative
boundary*</td>
</tr>
<tr class="even">
<td>WYbighorn_districtbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest District
boundaries**</td>
</tr>
<tr class="odd">
<td>WYbighorn_forest_nonforest_250m.tif</td>
<td>GeoTIFF raster of predicted forest/nonforest (1/0) for
stratification***</td>
</tr>
<tr class="even">
<td>WYbighorn_dem_250m.img</td>
<td>Erdas Imagine raster of elevation change, in meters****</td>
</tr>
</tbody>
</table>
<p>*USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.AdministrativeForest (<a href="http://data.fs.usda.gov/geodata/edw" class="external-link uri">http://data.fs.usda.gov/geodata/edw</a>). Description: An
area encompassing all the National Forest System lands administered by
an administrative unit. The area encompasses private lands, other
governmental agency lands, and may contain National Forest System lands
within the proclaimed boundaries of another administrative unit. All
National Forest System lands fall within one and only one Administrative
Forest Area.</p>
<p>**USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.RangerDistrict (<a href="http://data.fs.usda.gov/geodata/edw" class="external-link uri">http://data.fs.usda.gov/geodata/edw</a>). Description: A
depiction of the boundary that encompasses a Ranger District.</p>
<p>***Based on MODIS-based classified map resampled from 250m to 500m
resolution and reclassified from 3 to 2 classes: 1:forest; 2:nonforest.
Projected in Albers Conical Equal Area, Datum NAD27 (Ruefenacht et
al. 2008). Clipped to extent of WYbighorn_adminbnd.shp.</p>
<p>****USGS National Elevation Dataset (NED), resampled from 30m
resolution to 250m. Projected in Albers Conical Equal Area, Datum NAD27
(U.S. Geological Survey 2017). Clipped to boundary of
WYbighorn_adminbnd.shp.</p>
</details><div class="section level3">
<h3 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/FIESTA/" class="external-link">FIESTA</a></span><span class="op">)</span></span></code></pre></div>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For our purposes in this vignette, we have saved our outfolder
file path as the <code>outfolder</code> object in a temporary directory.
We also set a few default options preferred for this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outfolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-data-for-examples">Get data for examples<a class="anchor" aria-label="anchor" href="#get-data-for-examples"></a>
</h3>
<details><summary>
View Getting Data
</summary><p>Now that we’ve loaded <code>FIESTA</code> and setup our outfolder, we
can retrieve the data needed to run the examples. First, we point to
some external data and predictor layers stored in <code>FIESTA</code>
and derive new predictor layers using the <code>terra</code>
package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File names for external spatial data</span></span>
<span><span class="va">WYbhfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_adminbnd.shp"</span>,</span>
<span>                      package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">WYbhdistfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_districtbnd.shp"</span>,</span>
<span>                          package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## predictor variables</span></span>
<span><span class="va">fornffn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_forest_nonforest_250m.tif"</span>,</span>
<span>                       package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">demfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sp_data/WYbighorn_dem_250m.img"</span>,</span>
<span>                     package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Derive new predictor layers from dem</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="va">dem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">demfn</span><span class="op">)</span></span>
<span><span class="va">slpfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/WYbh_slp.img"</span><span class="op">)</span></span>
<span><span class="va">slp</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">dem</span>,</span>
<span>                      v <span class="op">=</span> <span class="st">"slope"</span>,</span>
<span>                      unit <span class="op">=</span> <span class="st">"degrees"</span>,</span>
<span>                      filename <span class="op">=</span> <span class="va">slpfn</span>, </span>
<span>                      overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      NAflag <span class="op">=</span> <span class="op">-</span><span class="fl">99999.0</span><span class="op">)</span></span>
<span><span class="va">aspfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/WYbh_asp.img"</span><span class="op">)</span></span>
<span><span class="va">asp</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/terrain.html" class="external-link">terrain</a></span><span class="op">(</span><span class="va">dem</span>,</span>
<span>                      v <span class="op">=</span> <span class="st">"aspect"</span>,</span>
<span>                      unit <span class="op">=</span> <span class="st">"degrees"</span>, </span>
<span>                      filename <span class="op">=</span> <span class="va">aspfn</span>,</span>
<span>                      overwrite <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      NAflag <span class="op">=</span> <span class="op">-</span><span class="fl">99999.0</span><span class="op">)</span></span></code></pre></div>
<p>Next, we can get our FIA plot data and set up our auxiliary data. We
can get our FIA plot data with the <code>spMakeSpatialPoints</code>
function from <code>FIESTA</code>. For more information on how to use
this function, please see the <code>sp</code> vignette included with
<code>FIESTA</code> (link).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WYspplt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spMakeSpatialPoints.html">spMakeSpatialPoints</a></span><span class="op">(</span></span>
<span>  xyplt <span class="op">=</span> <span class="va">WYplt</span>,</span>
<span>  xy.uniqueid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  xvar <span class="op">=</span> <span class="st">"LON_PUBLIC"</span>,</span>
<span>  yvar <span class="op">=</span> <span class="st">"LAT_PUBLIC"</span>,</span>
<span>  xy.crs <span class="op">=</span> <span class="fl">4269</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rastlst.cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">demfn</span>, <span class="va">slpfn</span>, <span class="va">aspfn</span><span class="op">)</span></span>
<span><span class="va">rastlst.cont.name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dem"</span>, <span class="st">"slp"</span>, <span class="st">"asp"</span><span class="op">)</span></span>
<span><span class="va">rastlst.cat</span> <span class="op">&lt;-</span> <span class="va">fornffn</span></span>
<span><span class="va">rastlst.cat.name</span> <span class="op">&lt;-</span> <span class="st">"fornf"</span></span></code></pre></div>
<p>Next, we must generate dataset for model-assisted estimation. We can
do this with the <code>spGetAuxiliary</code> function from
<code>FIESTA</code>. Again, see the <code>sp</code> vignette for further
information on this function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">modeldat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spGetAuxiliary.html">spGetAuxiliary</a></span><span class="op">(</span></span>
<span>  xyplt <span class="op">=</span> <span class="va">WYspplt</span>,</span>
<span>  uniqueid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  unit_layer <span class="op">=</span> <span class="va">WYbhfn</span>,</span>
<span>  unitvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rastlst.cont <span class="op">=</span> <span class="va">rastlst.cont</span>,</span>
<span>  rastlst.cont.name <span class="op">=</span> <span class="va">rastlst.cont.name</span>,</span>
<span>  rastlst.cat <span class="op">=</span> <span class="va">rastlst.cat</span>,</span>
<span>  rastlst.cat.name <span class="op">=</span> <span class="va">rastlst.cat.name</span>,</span>
<span>  rastlst.cont.stat <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  asptransform <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rast.asp <span class="op">=</span> <span class="va">aspfn</span>,</span>
<span>  keepNA <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  showext <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">modeldat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 12</span></span>
<span><span class="co">##  $ unitvar       : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ pltassgn      :'data.frame':  56 obs. of  25 variables:</span></span>
<span><span class="co">##  $ pltassgnid    : chr "CN"</span></span>
<span><span class="co">##  $ unitarea      :'data.frame':  1 obs. of  2 variables:</span></span>
<span><span class="co">##  $ areavar       : chr "ACRES_GIS"</span></span>
<span><span class="co">##  $ unitzonal     :'data.frame':  1 obs. of  8 variables:</span></span>
<span><span class="co">##  $ inputdf       :Classes 'data.table' and 'data.frame': 4 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ prednames     : chr [1:5] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ zonalnames    : chr [1:7] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ predfac       : chr "fornf"</span></span>
<span><span class="co">##  $ npixelvar     : chr "npixels"</span></span>
<span><span class="co">##  $ predfac.levels:List of 1</span></span></code></pre>
</details></details>
</div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="modmapop">
<code>modMApop</code><a class="anchor" aria-label="anchor" href="#modmapop"></a>
</h3>
<div class="section level4">
<h4 id="example-1-creating-our-population-dataset-with-modmapop">Example 1: Creating our population dataset with
<code>modMApop</code><a class="anchor" aria-label="anchor" href="#example-1-creating-our-population-dataset-with-modmapop"></a>
</h4>
<details><summary>
View Example
</summary><p>We can create our population data for model-assisted estimation. To
do so, we use the <code>modMApop</code> function in <code>FIESTA</code>.
We must assign our population tables with the <code>popTabs</code>
argument (and unique identifiers for these tables with the
<code>popTabIDs</code> argument if they are not the default), the plot
assignment with the <code>pltassgn</code> argument, and in auxiliary
dataset we just created with the <code>auxdat</code> argument. The
<code>spGetAuxiliary</code> function has done much of the hard work for
us so far, so we can just run a simple call to
<code>modMApop</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MApopdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMApop.html">modMApop</a></span><span class="op">(</span>popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">WYtree</span>, cond <span class="op">=</span> <span class="va">WYcond</span><span class="op">)</span>,</span>
<span>                     auxdat <span class="op">=</span> <span class="va">modeldat</span><span class="op">)</span></span></code></pre></div>
<p>Note that the <code>modMApop</code> function returns a list with lots
of information and data for us to use. For a quick look at what this
list includes we can use the <code>str</code> function:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">MApopdat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 26</span></span>
<span><span class="co">##  $ module     : chr "MA"</span></span>
<span><span class="co">##  $ popType    : chr "VOL"</span></span>
<span><span class="co">##  $ condx      :Classes 'data.table' and 'data.frame':    66 obs. of  17 variables:</span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "PLT_CN" "CONDID"</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ pltcondx   :Classes 'data.table' and 'data.frame':    66 obs. of  30 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "DSTRBCD1"</span></span>
<span><span class="co">##  $ cuniqueid  : chr "PLT_CN"</span></span>
<span><span class="co">##  $ condid     : chr "CONDID"</span></span>
<span><span class="co">##  $ ACI.filter : chr "COND_STATUS_CD == 1"</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "ACRES_GIS"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitlut    :Classes 'data.table' and 'data.frame':    1 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ plotsampcnt:'data.frame': 2 obs. of  3 variables:</span></span>
<span><span class="co">##  $ condsampcnt:'data.frame': 4 obs. of  3 variables:</span></span>
<span><span class="co">##  $ npixels    :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##  $ npixelvar  : chr "npixels"</span></span>
<span><span class="co">##  $ states     : chr "Wyoming"</span></span>
<span><span class="co">##  $ invyrs     :List of 1</span></span>
<span><span class="co">##  $ estvar.area: chr "CONDPROP_ADJ"</span></span>
<span><span class="co">##  $ adj        : chr "plot"</span></span>
<span><span class="co">##  $ treex      :Classes 'data.table' and 'data.frame':    1691 obs. of  21 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "PLT_CN" "CONDID"</span></span>
<span><span class="co">##  $ tuniqueid  : chr "PLT_CN"</span></span>
<span><span class="co">##  $ adjtree    : logi FALSE</span></span>
<span><span class="co">##  $ prednames  : chr [1:5] "dem" "slp" "asp_cos" "asp_sin" ...</span></span>
<span><span class="co">##  $ predfac    : chr "fornf"</span></span></code></pre>
</details><p>Now that we’ve created our population dataset, we can move on to
estimation.</p>
</details>
</div>
</div>
<div class="section level3">
<h3 id="modmaarea">
<code>modMAarea</code><a class="anchor" aria-label="anchor" href="#modmaarea"></a>
</h3>
<div class="section level4">
<h4 id="example-2-area-of-forest-land-wyoming-2011-2013">Example 2: Area of forest land, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-2-area-of-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at estimating the area of forest land in
Wyoming from 2011 to 2013 summed to the population unit
(<code>sumunit = TRUE</code>) with the generalized regression estimator
(<code>MAmethod = "greg"</code>). <code>FIESTA</code> returns raw data
for area of forest land, Wyoming, 2011-2013 (sum estimation units).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>  MApopdat <span class="op">=</span> <span class="va">MApopdat</span>, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>  MAmethod <span class="op">=</span> <span class="st">"greg"</span>, <span class="co"># est - model-assisted method</span></span>
<span>  landarea <span class="op">=</span> <span class="st">"FOREST"</span> <span class="co"># est - forest land filter</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can look at the structure of this output with <code>str</code> and
the estimates below. Note that again <code>FIESTA</code> outputs a
list.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area1</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 4</span></span>
<span><span class="co">##  $ est    :Classes 'data.table' and 'data.frame':    1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : chr "1"</span></span>
<span><span class="co">##   ..$ Estimate              : num 652879</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 9.5</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ raw    :List of 9</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  20 variables:</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "AREA"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "greg"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##  $ statecd: int 56</span></span>
<span><span class="co">##  $ invyr  : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## Key: &lt;ONEUNIT&gt;</span></span>
<span><span class="co">##    ONEUNIT Estimate Percent Sampling Error</span></span>
<span><span class="co">##     &lt;char&gt;    &lt;num&gt;                  &lt;num&gt;</span></span>
<span><span class="co">## 1:       1 652879.1                    9.5</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-3-area-of-forest-land-wyoming-2011-2013-using-the-elastic-net-for-variable-selection">Example 3: Area of forest land, Wyoming, 2011-2013, using the
Elastic Net for variable selection<a class="anchor" aria-label="anchor" href="#example-3-area-of-forest-land-wyoming-2011-2013-using-the-elastic-net-for-variable-selection"></a>
</h4>
<details><summary>
View Example
</summary><p>Here, we fit the same model as the above example, but rather than
using <code>"greg"</code> are our model-assisted method, we can use
<code>"gregEN"</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>  MApopdat <span class="op">=</span> <span class="va">MApopdat</span>, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>  MAmethod <span class="op">=</span> <span class="st">"gregEN"</span>, <span class="co"># est - model-assisted method</span></span>
<span>  landarea <span class="op">=</span> <span class="st">"FOREST"</span>, <span class="co"># est - forest land filter</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area2</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 4</span></span>
<span><span class="co">##  $ est    :Classes 'data.table' and 'data.frame':    1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : chr "1"</span></span>
<span><span class="co">##   ..$ Estimate              : num 667495</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 9.54</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ raw    :List of 9</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  20 variables:</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "AREA"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "gregEN"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##  $ statecd: int 56</span></span>
<span><span class="co">##  $ invyr  : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">predselectlst</span><span class="op">$</span><span class="va">totest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##    ONEUNIT TOTAL           dem         slp asp_cos asp_sin     fornf2</span></span>
<span><span class="co">##     &lt;fctr&gt; &lt;num&gt;         &lt;num&gt;       &lt;num&gt;   &lt;num&gt;   &lt;num&gt;      &lt;num&gt;</span></span>
<span><span class="co">## 1:       1     1 -0.0002003131 0.006865144       0       0 -0.2316885</span></span></code></pre>
</details><p>Notably, we can see that <code>dem</code>, <code>slp</code>,
<code>asp_cos</code>, and <code>asp_sin</code> were removed from the
model.</p>
</details>
</div>
<div class="section level4">
<h4 id="example-4-area-by-forest-type-on-forest-land-wyoming-2011-2013">Example 4: Area by forest type on forest land, Wyoming,
2011-2013<a class="anchor" aria-label="anchor" href="#example-4-area-by-forest-type-on-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at adding rows to the output and include
returntitle=TRUE to return title information.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">area3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list. The output now
includes titlelst, a list of associated titles.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">area3</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 5</span></span>
<span><span class="co">##  $ est     :'data.frame':    8 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 10</span></span>
<span><span class="co">##  $ statecd : int 56</span></span>
<span><span class="co">##  $ invyr   : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">area3</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Forest type Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1         201  44286.4                   85.2</span></span>
<span><span class="co">## 2         265  89101.3                  52.03</span></span>
<span><span class="co">## 3         266  97017.3                   42.4</span></span>
<span><span class="co">## 4         268 112697.6                  34.19</span></span>
<span><span class="co">## 5         281 618425.6                  13.59</span></span>
<span><span class="co">## 6         901  38648.7                  75.39</span></span>
<span><span class="co">## 7         999    36765                  64.92</span></span>
<span><span class="co">## 8       Total 652879.1                    9.5</span></span></code></pre>
</details><p>Along with raw data and titles:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw3</span> <span class="op">&lt;-</span> <span class="va">area3</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "domdat"        "module"       </span></span>
<span><span class="co">##  [5] "esttype"       "MAmethod"      "predselectlst" "rowvar"       </span></span>
<span><span class="co">##  [9] "colvar"        "areaunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span> <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est</span></span>
<span><span class="co">## 1       1 0.5869038 0.003106112     56         37   1112412  1112412 652879.1</span></span>
<span><span class="co">##      est.var   est.se    est.cv     pse CI99left CI99right CI95left CI95right</span></span>
<span><span class="co">## 1 3843693079 61997.52 0.0949602 9.49602   493184  812574.1 531366.2    774392</span></span>
<span><span class="co">##   CI68left CI68right</span></span>
<span><span class="co">## 1 591225.1    714533</span></span></code></pre>
</details><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raw3</span><span class="op">$</span><span class="va">totest</span>            <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span> <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Forest type       nhat     nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS</span></span>
<span><span class="co">## 1       1         201 0.03981113 0.0011505987     37          2   1112412</span></span>
<span><span class="co">## 2       1         265 0.08009738 0.0017367503     37          4   1112412</span></span>
<span><span class="co">## 3       1         266 0.08721348 0.0013673266     37          5   1112412</span></span>
<span><span class="co">## 4       1         268 0.10130923 0.0012000844     37          3   1112412</span></span>
<span><span class="co">## 5       1         281 0.55593198 0.0057107487     37         23   1112412</span></span>
<span><span class="co">## 6       1         901 0.03474316 0.0006861348     37          1   1112412</span></span>
<span><span class="co">##   AREAUSED       est    est.var   est.se    est.cv      pse  CI99left CI99right</span></span>
<span><span class="co">## 1  1112412  44286.39 1423821285 37733.56 0.8520351 85.20351      0.00  141481.6</span></span>
<span><span class="co">## 2  1112412  89101.31 2149161132 46359.05 0.5202959 52.02959      0.00  208514.3</span></span>
<span><span class="co">## 3  1112412  97017.35 1692013618 41134.09 0.4239870 42.39870      0.00  202971.7</span></span>
<span><span class="co">## 4  1112412 112697.64 1485057928 38536.45 0.3419455 34.19455  13434.33  211961.0</span></span>
<span><span class="co">## 5  1112412 618425.60 7066830141 84064.44 0.1359330 13.59330 401889.95  834961.3</span></span>
<span><span class="co">## 6  1112412  38648.72  849065242 29138.72 0.7539376 75.39376      0.00  113705.1</span></span>
<span><span class="co">##    CI95left CI95right   CI68left CI68right</span></span>
<span><span class="co">## 1      0.00 118242.80   6761.956  81810.82</span></span>
<span><span class="co">## 2      0.00 179963.37  42999.193 135203.43</span></span>
<span><span class="co">## 3  16396.01 177638.69  56111.224 137923.47</span></span>
<span><span class="co">## 4  37167.59 188227.70  74374.767 151020.52</span></span>
<span><span class="co">## 5 453662.33 783188.88 534827.056 702024.15</span></span>
<span><span class="co">## 6      0.00  95759.57   9671.489  67625.96</span></span></code></pre>
</details><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst3</span> <span class="op">&lt;-</span> <span class="va">area3</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "title.estpse"  "title.unitvar" "title.ref"     "outfn.estpse" </span></span>
<span><span class="co">## [5] "outfn.rawdat"  "outfn.param"   "title.rowvar"  "title.row"    </span></span>
<span><span class="co">## [9] "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst3</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Area, in acres, and percent sampling error on forest land by forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "area_FORTYPCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Area, in acres, on forest land by forest type; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-5-area-by-forest-type-and-stand-size-class-on-forest-land-wyoming-2011-2013">Example 5: Area by forest type and stand-size class on forest land,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-5-area-by-forest-type-and-stand-size-class-on-forest-land-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at adding rows and columns to output,
including FIA names. We also output estimates and percent standard error
in the same cell with the <code>allin1</code> argument in
<code>table_options</code> and save data to an outfolder with the
<code>outfolder</code> argument in <code>savedata_options</code>.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Area of forest land by forest type and stand-size class, Wyoming, 2011-2013</span></span>
<span><span class="va">area4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAarea.html">modMAarea</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    colvar <span class="op">=</span> <span class="st">"STDSZCD"</span>,          <span class="co"># est - column domain</span></span>
<span>    savedata <span class="op">=</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># table - row domain names</span></span>
<span>      col.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># table - column domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">TRUE</span>                <span class="co"># table - return output with est(pse)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      outfolder <span class="op">=</span> <span class="va">outfolder</span>,       <span class="co"># save - outfolder for saving data</span></span>
<span>      outfn.pre <span class="op">=</span> <span class="st">"WY"</span>             <span class="co"># save - prefix for output files</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">area4</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type      Large diameter     Medium diameter</span></span>
<span><span class="co">##                              &lt;char&gt;              &lt;char&gt;              &lt;char&gt;</span></span>
<span><span class="co">## 1:                      Douglas-fir  28,381.5 (  95.01)        -- (     --)</span></span>
<span><span class="co">## 2:                 Engelmann spruce  97,387.6 (  40.28)  -8,286.3 (-339.39)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir  42,290.6 (  91.23)  28,627.2 (  48.64)</span></span>
<span><span class="co">## 4:                    Subalpine fir  36,053.1 (  81.54)        -- (     --)</span></span>
<span><span class="co">## 5:                   Lodgepole pine 221,069.2 (  28.62) 289,086.8 (  20.06)</span></span>
<span><span class="co">## 6:                            Aspen        -- (     --)        -- (     --)</span></span>
<span><span class="co">## 7:                       Nonstocked        -- (     --)        -- (     --)</span></span>
<span><span class="co">## 8:                            Total 425,182.1 (  15.23) 309,427.6 (  19.74)</span></span>
<span><span class="co">##         Small diameter         Nonstocked               Total</span></span>
<span><span class="co">##                 &lt;char&gt;             &lt;char&gt;              &lt;char&gt;</span></span>
<span><span class="co">## 1:  15,904.9 ( 179.36)       -- (     --)  44,286.4 (  85.20)</span></span>
<span><span class="co">## 2:        -- (     --)       -- (     --)  89,101.3 (  52.03)</span></span>
<span><span class="co">## 3:  26,099.5 (  65.28)       -- (     --)  97,017.3 (  42.40)</span></span>
<span><span class="co">## 4:  76,644.6 (  33.27)       -- (     --) 112,697.6 (  34.19)</span></span>
<span><span class="co">## 5: 108,269.6 (  35.83)       -- (     --) 618,425.6 (  13.59)</span></span>
<span><span class="co">## 6:  38,648.7 (  75.39)       -- (     --)  38,648.7 (  75.39)</span></span>
<span><span class="co">## 7:        -- (     --) 36,765.0 (  64.92)  36,765.0 (  64.92)</span></span>
<span><span class="co">## 8: 265,567.3 (  20.58) 36,765.0 (  64.92) 652,879.1 (   9.50)</span></span></code></pre>
</details><p>We can again look at the output list, estimates, raw data, and
titles:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">area4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "pse"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">area4</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type      Large diameter     Medium diameter</span></span>
<span><span class="co">##                              &lt;char&gt;              &lt;char&gt;              &lt;char&gt;</span></span>
<span><span class="co">## 1:                      Douglas-fir  28,381.5 (  95.01)        -- (     --)</span></span>
<span><span class="co">## 2:                 Engelmann spruce  97,387.6 (  40.28)  -8,286.3 (-339.39)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir  42,290.6 (  91.23)  28,627.2 (  48.64)</span></span>
<span><span class="co">## 4:                    Subalpine fir  36,053.1 (  81.54)        -- (     --)</span></span>
<span><span class="co">## 5:                   Lodgepole pine 221,069.2 (  28.62) 289,086.8 (  20.06)</span></span>
<span><span class="co">## 6:                            Aspen        -- (     --)        -- (     --)</span></span>
<span><span class="co">##         Small diameter   Nonstocked               Total</span></span>
<span><span class="co">##                 &lt;char&gt;       &lt;char&gt;              &lt;char&gt;</span></span>
<span><span class="co">## 1:  15,904.9 ( 179.36) -- (     --)  44,286.4 (  85.20)</span></span>
<span><span class="co">## 2:        -- (     --) -- (     --)  89,101.3 (  52.03)</span></span>
<span><span class="co">## 3:  26,099.5 (  65.28) -- (     --)  97,017.3 (  42.40)</span></span>
<span><span class="co">## 4:  76,644.6 (  33.27) -- (     --) 112,697.6 (  34.19)</span></span>
<span><span class="co">## 5: 108,269.6 (  35.83) -- (     --) 618,425.6 (  13.59)</span></span>
<span><span class="co">## 6:  38,648.7 (  75.39) -- (     --)  38,648.7 (  75.39)</span></span></code></pre>
</details><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw4</span> <span class="op">&lt;-</span> <span class="va">area4</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "unit_colest"   "unit_grpest"  </span></span>
<span><span class="co">##  [5] "domdat"        "module"        "esttype"       "MAmethod"     </span></span>
<span><span class="co">##  [9] "predselectlst" "rowvar"        "colvar"        "areaunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span> <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est</span></span>
<span><span class="co">## 1       1 0.5869038 0.003106112     56         37   1112412  1112412 652879.1</span></span>
<span><span class="co">##      est.var   est.se    est.cv     pse CI99left CI99right CI95left CI95right</span></span>
<span><span class="co">## 1 3843693079 61997.52 0.0949602 9.49602   493184  812574.1 531366.2    774392</span></span>
<span><span class="co">##   CI68left CI68right</span></span>
<span><span class="co">## 1 591225.1    714533</span></span></code></pre>
</details><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>      <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span> <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT FORTYPCD       nhat     nhat.var NBRPLT NBRPLT.gt0</span></span>
<span><span class="co">## 1       1      201 0.03981113 0.0011505987     37          2</span></span>
<span><span class="co">## 2       1      265 0.08009738 0.0017367503     37          4</span></span>
<span><span class="co">## 3       1      266 0.08721348 0.0013673266     37          5</span></span>
<span><span class="co">## 4       1      268 0.10130923 0.0012000844     37          3</span></span>
<span><span class="co">## 5       1      281 0.55593198 0.0057107487     37         23</span></span>
<span><span class="co">## 6       1      901 0.03474316 0.0006861348     37          1</span></span>
<span><span class="co">##                        Forest type ACRES_GIS AREAUSED       est    est.var</span></span>
<span><span class="co">## 1                      Douglas-fir   1112412  1112412  44286.39 1423821285</span></span>
<span><span class="co">## 2                 Engelmann spruce   1112412  1112412  89101.31 2149161132</span></span>
<span><span class="co">## 3 Engelmann spruce / subalpine fir   1112412  1112412  97017.35 1692013618</span></span>
<span><span class="co">## 4                    Subalpine fir   1112412  1112412 112697.64 1485057928</span></span>
<span><span class="co">## 5                   Lodgepole pine   1112412  1112412 618425.60 7066830141</span></span>
<span><span class="co">## 6                            Aspen   1112412  1112412  38648.72  849065242</span></span>
<span><span class="co">##     est.se    est.cv      pse  CI99left CI99right  CI95left CI95right</span></span>
<span><span class="co">## 1 37733.56 0.8520351 85.20351      0.00  141481.6      0.00 118242.80</span></span>
<span><span class="co">## 2 46359.05 0.5202959 52.02959      0.00  208514.3      0.00 179963.37</span></span>
<span><span class="co">## 3 41134.09 0.4239870 42.39870      0.00  202971.7  16396.01 177638.69</span></span>
<span><span class="co">## 4 38536.45 0.3419455 34.19455  13434.33  211961.0  37167.59 188227.70</span></span>
<span><span class="co">## 5 84064.44 0.1359330 13.59330 401889.95  834961.3 453662.33 783188.88</span></span>
<span><span class="co">## 6 29138.72 0.7539376 75.39376      0.00  113705.1      0.00  95759.57</span></span>
<span><span class="co">##     CI68left CI68right</span></span>
<span><span class="co">## 1   6761.956  81810.82</span></span>
<span><span class="co">## 2  42999.193 135203.43</span></span>
<span><span class="co">## 3  56111.224 137923.47</span></span>
<span><span class="co">## 4  74374.767 151020.52</span></span>
<span><span class="co">## 5 534827.056 702024.15</span></span>
<span><span class="co">## 6   9671.489  67625.96</span></span></code></pre>
</details><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_colest</span><span class="op">)</span> <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT STDSZCD       nhat     nhat.var NBRPLT NBRPLT.gt0 Stand-size class</span></span>
<span><span class="co">## 1       1       1 0.38221627 0.0033901272     37         18   Large diameter</span></span>
<span><span class="co">## 2       1       2 0.27815912 0.0030155927     37         14  Medium diameter</span></span>
<span><span class="co">## 3       1       3 0.23873097 0.0024143561     37          6   Small diameter</span></span>
<span><span class="co">## 4       1       5 0.03304982 0.0004603932     37          1       Nonstocked</span></span>
<span><span class="co">##   ACRES_GIS AREAUSED       est    est.var   est.se    est.cv      pse CI99left</span></span>
<span><span class="co">## 1   1112412  1112412 425182.10 4195150958 64769.99 0.1523347 15.23347 258345.7</span></span>
<span><span class="co">## 2   1112412  1112412 309427.64 3731679124 61087.47 0.1974209 19.74209 152076.7</span></span>
<span><span class="co">## 3   1112412  1112412 265567.28 2987672110 54659.60 0.2058220 20.58220 124773.5</span></span>
<span><span class="co">## 4   1112412  1112412  36765.03  569718693 23868.78 0.6492251 64.92251      0.0</span></span>
<span><span class="co">##   CI99right CI95left CI95right  CI68left CI68right</span></span>
<span><span class="co">## 1 592018.52 298235.3 552128.93 360771.07 489593.12</span></span>
<span><span class="co">## 2 466778.53 189698.4 429156.88 248678.72 370176.55</span></span>
<span><span class="co">## 3 406361.09 158436.4 372698.13 211210.61 319923.96</span></span>
<span><span class="co">## 4  98246.94      0.0  83546.98  13028.53  60501.53</span></span></code></pre>
</details><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">colest</span><span class="op">)</span>      <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_grpest</span><span class="op">)</span> <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT grpvar         nhat     nhat.var NBRPLT NBRPLT.gt0 FORTYPCD STDSZCD</span></span>
<span><span class="co">## 1       1  201#1  0.025513469 0.0005875578     37          1      201       1</span></span>
<span><span class="co">## 2       1  201#3  0.014297657 0.0006576539     37          1      201       3</span></span>
<span><span class="co">## 3       1  265#1  0.087546327 0.0012436962     37          3      265       1</span></span>
<span><span class="co">## 4       1  265#2 -0.007448949 0.0006391340     37          1      265       2</span></span>
<span><span class="co">## 5       1  266#1  0.038017056 0.0012029502     37          3      266       1</span></span>
<span><span class="co">## 6       1  266#2  0.025734305 0.0001566975     37          1      266       2</span></span>
<span><span class="co">##   Stand-size class                      Forest type ACRES_GIS AREAUSED</span></span>
<span><span class="co">## 1   Large diameter                      Douglas-fir   1112412  1112412</span></span>
<span><span class="co">## 2   Small diameter                      Douglas-fir   1112412  1112412</span></span>
<span><span class="co">## 3   Large diameter                 Engelmann spruce   1112412  1112412</span></span>
<span><span class="co">## 4  Medium diameter                 Engelmann spruce   1112412  1112412</span></span>
<span><span class="co">## 5   Large diameter Engelmann spruce / subalpine fir   1112412  1112412</span></span>
<span><span class="co">## 6  Medium diameter Engelmann spruce / subalpine fir   1112412  1112412</span></span>
<span><span class="co">##         est    est.var   est.se     est.cv        pse CI99left CI99right</span></span>
<span><span class="co">## 1 28381.499  727079950 26964.42  0.9500703   95.00703        0  97837.24</span></span>
<span><span class="co">## 2 15904.890  813821229 28527.55  1.7936340  179.36340        0  89386.99</span></span>
<span><span class="co">## 3 97387.615 1539025822 39230.42  0.4028276   40.28276        0 198438.48</span></span>
<span><span class="co">## 4 -8286.303  790903534 28123.01 -3.3939149 -339.39149        0  64153.76</span></span>
<span><span class="co">## 5 42290.643 1488604221 38582.43  0.9123161   91.23161        0 141672.41</span></span>
<span><span class="co">## 6 28627.159  193907140 13925.05  0.4864281   48.64281        0  64495.72</span></span>
<span><span class="co">##    CI95left CI95right  CI68left CI68right</span></span>
<span><span class="co">## 1     0.000  81230.79  1566.518  55196.48</span></span>
<span><span class="co">## 2     0.000  71817.86     0.000  44274.34</span></span>
<span><span class="co">## 3 20497.406 174277.82 58374.615 136400.62</span></span>
<span><span class="co">## 4     0.000  46833.78     0.000  19680.84</span></span>
<span><span class="co">## 5     0.000 117910.82  3922.037  80659.25</span></span>
<span><span class="co">## 6  1334.554  55919.76 14779.279  42475.04</span></span></code></pre>
</details><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">grpest</span><span class="op">)</span>      <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst4</span> <span class="op">&lt;-</span> <span class="va">area4</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.unitvar" "title.ref"     "outfn.estpse" </span></span>
<span><span class="co">##  [5] "outfn.rawdat"  "outfn.param"   "title.rowvar"  "title.row"    </span></span>
<span><span class="co">##  [9] "title.colvar"  "title.col"     "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst4</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by forest type and stand-size class on forest land"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "WY_area_FORTYPCD_STDSZCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "WY_area_FORTYPCD_STDSZCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by forest type on forest land; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.colvar</span></span>
<span><span class="co">## [1] "Stand-size class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.col</span></span>
<span><span class="co">## [1] "Area, in acres (percent sampling error), by stand-size class on forest land; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## List output files in outfolder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">outfolder</span>, pattern <span class="op">=</span> <span class="st">"WY_area"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_area_FORTYPCD_STDSZCD_forestland_modMA_mase_greg.csv"</span></span></code></pre>
</details><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/rawdata"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"WY_area"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_domdat.csv"     </span></span>
<span><span class="co">## [2] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_colest.csv"</span></span>
<span><span class="co">## [3] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_grpest.csv"</span></span>
<span><span class="co">## [4] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_rowest.csv"</span></span>
<span><span class="co">## [5] "WY_area_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_totest.csv"</span></span></code></pre>
</details></details>
</div>
</div>
<div class="section level3">
<h3 id="modmatree">
<code>modMAtree</code><a class="anchor" aria-label="anchor" href="#modmatree"></a>
</h3>
<p>We will set our estimate variable and filter now. We set
<code>estvar</code> to <code>"VOLCFNET"</code> for net cubic foot
volume, and filter with <code>estvar.filter</code> set to
<code>"STATUSCD == 1"</code> so we only consider live trees in our
estimation.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">estvar</span> <span class="op">&lt;-</span> <span class="st">"VOLCFNET"</span></span>
<span><span class="va">live_trees</span> <span class="op">&lt;-</span> <span class="st">"STATUSCD == 1"</span></span></code></pre></div>
<div class="section level4">
<h4 id="example-6-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013">Example 6: Net cubic-foot volume of live trees, Wyoming,
2011-2013<a class="anchor" aria-label="anchor" href="#example-6-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We now will generate estimates by estimation unit (i.e., ESTN_UNIT)
and sum to population (i.e., WY) with <code>modMAtree</code>.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Return raw data and titles</span></span>
<span><span class="co">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span><span class="va">tree1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="va">estvar</span>,             <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="va">live_trees</span>,  <span class="co"># est - live trees only</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_totest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1029.962 22849.33     56         34   1112412  1112412 1145742756</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 2.827516e+16 168152198 0.1467626 14.67626 712611397 1578874115 816170504</span></span>
<span><span class="co">##    CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1 1475315008 978522477 1312963035</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-7-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013-using-the-elastic-net-for-variable-selection">Example 7: Net cubic-foot volume of live trees, Wyoming, 2011-2013,
using the Elastic Net for variable selection<a class="anchor" aria-label="anchor" href="#example-7-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013-using-the-elastic-net-for-variable-selection"></a>
</h4>
<details><summary>
View Example
</summary><p>Here, we fit the same model as the above example, but rather than
using <code>"greg"</code> are our model-assisted method, we can use
<code>"gregEN"</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Return raw data and titles</span></span>
<span><span class="co">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span><span class="va">tree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"gregEN"</span>,         <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="va">estvar</span>,             <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="va">live_trees</span>,  <span class="co"># est - live trees only</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">tree2</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 5</span></span>
<span><span class="co">##  $ est     :Classes 'data.table' and 'data.frame':   1 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ ONEUNIT               : chr "1"</span></span>
<span><span class="co">##   ..$ Estimate              : num 1.17e+09</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: num 14.4</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ titlelst:List of 10</span></span>
<span><span class="co">##   ..$ title.estpse : chr "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, and perce"| __truncated__</span></span>
<span><span class="co">##   ..$ title.yvar   : chr "Net volume, in cubic feet"</span></span>
<span><span class="co">##   ..$ title.estvar : chr "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)"</span></span>
<span><span class="co">##   ..$ title.unitvar: chr "ONEUNIT"</span></span>
<span><span class="co">##   ..$ title.ref    : chr "Wyoming, 2011-2013"</span></span>
<span><span class="co">##   ..$ outfn.estpse : chr "tree_VOLCFNET_forestland"</span></span>
<span><span class="co">##   ..$ outfn.rawdat : chr "tree_VOLCFNET_forestland_rawdata"</span></span>
<span><span class="co">##   ..$ outfn.param  : chr "tree_VOLCFNET_forestland_parameters"</span></span>
<span><span class="co">##   ..$ title.tot    : chr "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, on forest"| __truncated__</span></span>
<span><span class="co">##   ..$ title.unitsn : chr "cubic feet"</span></span>
<span><span class="co">##  $ raw     :List of 13</span></span>
<span><span class="co">##   ..$ unit_totest  :'data.frame':    1 obs. of  18 variables:</span></span>
<span><span class="co">##   ..$ domdat       :'data.frame':    66 obs. of  20 variables:</span></span>
<span><span class="co">##   ..$ plotweights  :List of 1</span></span>
<span><span class="co">##   ..$ estvar       : chr "VOLCFNET"</span></span>
<span><span class="co">##   ..$ estvar.filter: chr "STATUSCD == 1"</span></span>
<span><span class="co">##   ..$ module       : chr "MA"</span></span>
<span><span class="co">##   ..$ esttype      : chr "TREE"</span></span>
<span><span class="co">##   ..$ MAmethod     : chr "gregEN"</span></span>
<span><span class="co">##   ..$ predselectlst:List of 1</span></span>
<span><span class="co">##   ..$ rowvar       : chr "TOTAL"</span></span>
<span><span class="co">##   ..$ colvar       : chr "NONE"</span></span>
<span><span class="co">##   ..$ areaunits    : chr "acres"</span></span>
<span><span class="co">##   ..$ estunits     : Factor w/ 1 level "1": 1</span></span>
<span><span class="co">##  $ statecd : int 56</span></span>
<span><span class="co">##  $ invyr   : int [1:3] 2011 2012 2013</span></span></code></pre>
</details><p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">predselectlst</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $totest</span></span>
<span><span class="co">##    ONEUNIT TOTAL       dem       slp asp_cos   asp_sin    fornf2</span></span>
<span><span class="co">##     &lt;fctr&gt; &lt;num&gt;     &lt;num&gt;     &lt;num&gt;   &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">## 1:       1     1 0.5235516 -60.26874       0 -497.2782 -1106.439</span></span></code></pre>
</details><p>Notably, we can see that [INSERT CORRECT PREDS] <code>dem</code>,
<code>slp</code>, <code>asp_cos</code>, and <code>asp_sin</code> were
removed from the model.</p>
</details>
</div>
<div class="section level4">
<h4 id="example-8-net-cubic-foot-volume-of-live-trees-by-forest-type-wyoming-2011-2013">Example 8: Net cubic-foot volume of live trees by forest type,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-8-net-cubic-foot-volume-of-live-trees-by-forest-type-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>This example adds rows to the output for net cubic-foot volume of
live trees (at least 5 inches diameter) by forest type, Wyoming,
2011-2013. We also choose to return titles with
<code>returntitle = TRUE</code>.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"VOLCFNET"</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,   <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain </span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree3</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Forest type     Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1         201   17386950.9                  82.45</span></span>
<span><span class="co">## 2         265  308069606.4                  55.88</span></span>
<span><span class="co">## 3         266  124752652.1                  87.24</span></span>
<span><span class="co">## 4         268   56756979.9                  82.14</span></span>
<span><span class="co">## 5         281 1095829416.3                  19.18</span></span>
<span><span class="co">## 6         901           --                     --</span></span>
<span><span class="co">## 7         999           --                     --</span></span>
<span><span class="co">## 8          NA           --                     --</span></span>
<span><span class="co">## 9       Total 1145742756.1                  14.68</span></span></code></pre>
</details><div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw3</span> <span class="op">&lt;-</span> <span class="va">tree3</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "domdat"        "plotweights"  </span></span>
<span><span class="co">##  [5] "estvar"        "estvar.filter" "module"        "esttype"      </span></span>
<span><span class="co">##  [9] "MAmethod"      "predselectlst" "rowvar"        "colvar"       </span></span>
<span><span class="co">## [13] "areaunits"     "estunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span>   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1029.962 22849.33     56         34   1112412  1112412 1145742756</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 2.827516e+16 168152198 0.1467626 14.67626 712611397 1578874115 816170504</span></span>
<span><span class="co">##    CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1 1475315008 978522477 1312963035</span></span></code></pre>
</details><div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span>   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Forest type      nhat   nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED</span></span>
<span><span class="co">## 1       1         201  15.62995   166.0663     37          2   1112412  1112412</span></span>
<span><span class="co">## 2       1         265 276.93832 23952.0386     37          4   1112412  1112412</span></span>
<span><span class="co">## 3       1         266 112.14605  9572.0563     37          5   1112412  1112412</span></span>
<span><span class="co">## 4       1         268  51.02153  1756.4496     37          2   1112412  1112412</span></span>
<span><span class="co">## 5       1         281 985.09282 35687.1045     37         23   1112412  1112412</span></span>
<span><span class="co">## 6       1         901   0.00000     0.0000     37          0   1112412  1112412</span></span>
<span><span class="co">##          est      est.var    est.se    est.cv      pse  CI99left  CI99right</span></span>
<span><span class="co">## 1   17386951 2.055007e+14  14335294 0.8244858 82.44858         0   54312222</span></span>
<span><span class="co">## 2  308069606 2.963972e+16 172161899 0.5588409 55.88409         0  751529271</span></span>
<span><span class="co">## 3  124752652 1.184505e+16 108834961 0.8724060 87.24060         0  405092933</span></span>
<span><span class="co">## 4   56756980 2.173538e+15  46621222 0.8214183 82.14183         0  176845290</span></span>
<span><span class="co">## 5 1095829416 4.416141e+16 210146160 0.1917690 19.17690 554528778 1637130054</span></span>
<span><span class="co">## 6          0 0.000000e+00         0       NaN      NaN         0          0</span></span>
<span><span class="co">##    CI95left  CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1         0   45483612   3131104   31642797</span></span>
<span><span class="co">## 2         0  645500728 136861849  479277364</span></span>
<span><span class="co">## 3         0  338065256  16520867  232984437</span></span>
<span><span class="co">## 4         0  148132896  10394138  103119822</span></span>
<span><span class="co">## 5 683950510 1507708322 886847910 1304810922</span></span>
<span><span class="co">## 6         0          0         0          0</span></span></code></pre>
</details><div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw3</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst3</span> <span class="op">&lt;-</span> <span class="va">tree3</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.yvar"    "title.estvar"  "title.unitvar"</span></span>
<span><span class="co">##  [5] "title.ref"     "outfn.estpse"  "outfn.rawdat"  "outfn.param"  </span></span>
<span><span class="co">##  [9] "title.rowvar"  "title.row"     "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst3</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, and percent sampling error on forest land by forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.yvar</span></span>
<span><span class="co">## [1] "Net volume, in cubic feet"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.estvar</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_FORTYPCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_FORTYPCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "tree_VOLCFNET_FORTYPCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, on forest land by forest type; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "cubic feet"</span></span></code></pre>
</details><p>We can also create a simple barplot from the output:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Create barplot</span></span>
<span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span></span>
<span>      <span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>      xvar <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.rowvar</span>, </span>
<span>      yvar <span class="op">=</span> <span class="st">"est"</span></span>
<span>      <span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_MA_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
</details><p>And a fancier barplot:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Create fancier barplot</span></span>
<span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span></span>
<span>      <span class="va">raw3</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>      xvar <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.rowvar</span>, </span>
<span>      yvar <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>      errbars <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>      sevar <span class="op">=</span> <span class="st">"est.se"</span>, </span>
<span>      main <span class="op">=</span> <span class="fu">FIESTAutils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/internal_desc.html" class="external-link">wraptitle</a></span><span class="op">(</span><span class="va">titlelst3</span><span class="op">$</span><span class="va">title.row</span>, <span class="fl">75</span><span class="op">)</span>,</span>
<span>      ylabel <span class="op">=</span> <span class="va">titlelst3</span><span class="op">$</span><span class="va">title.yvar</span>, </span>
<span>      divideby <span class="op">=</span> <span class="st">"million"</span></span>
<span>      <span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_MA_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
</details></details>
</div>
<div class="section level4">
<h4 id="example-9-net-cubic-foot-volume-of-live-trees-by-forest-type-and-stand-size-class-wyoming-2011-2013">Example 9: Net cubic-foot volume of live trees by forest type and
stand-size class, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-9-net-cubic-foot-volume-of-live-trees-by-forest-type-and-stand-size-class-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>This examples adds rows and columns to the output, including FIA
names, for net cubic-foot volume of live trees (at least 5 inches
diameter) by forest type and stand-size class, Wyoming, 2011-2013. We
also use the <code>*_options</code> functions to return output with
estimates (est) and percent standard error (pse) in same cell - est(pse)
with <code>allin1 = TRUE</code> and save data to an outfolder with
<code>savedata = TRUE</code> and <code>outfolder = outfolder</code>.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tree4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"VOLCFNET"</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD  == 1"</span>,   <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"FORTYPCD"</span>,         <span class="co"># est - row domain</span></span>
<span>    colvar <span class="op">=</span> <span class="st">"STDSZCD"</span>,          <span class="co"># est - column domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    savedata <span class="op">=</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      col.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - column domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">TRUE</span>                <span class="co"># out - return output with est(pse)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/savedata_options.html" class="external-link">savedata_options</a></span><span class="op">(</span></span>
<span>      outfolder <span class="op">=</span> <span class="va">outfolder</span>,       <span class="co"># out - outfolder for saving data</span></span>
<span>      outfn.pre <span class="op">=</span> <span class="st">"WY"</span>             <span class="co"># out - prefix for output files</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list from modGBarea()</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "pse"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree4</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                         Forest type            Large diameter</span></span>
<span><span class="co">##                              &lt;char&gt;                    &lt;char&gt;</span></span>
<span><span class="co">## 1:                      Douglas-fir    14,477,768.8 (  95.01)</span></span>
<span><span class="co">## 2:                 Engelmann spruce   337,559,236.7 (  44.35)</span></span>
<span><span class="co">## 3: Engelmann spruce / subalpine fir    88,261,500.4 ( 124.07)</span></span>
<span><span class="co">## 4:                    Subalpine fir    56,756,979.9 (  82.14)</span></span>
<span><span class="co">## 5:                   Lodgepole pine   590,014,944.8 (  31.92)</span></span>
<span><span class="co">## 6:                            Aspen              -- (     --)</span></span>
<span><span class="co">## 7:                       Nonstocked              -- (     --)</span></span>
<span><span class="co">## 8:                            Total 1,087,070,430.7 (  17.29)</span></span>
<span><span class="co">##            Medium diameter         Small diameter   Nonstocked</span></span>
<span><span class="co">##                     &lt;char&gt;                 &lt;char&gt;       &lt;char&gt;</span></span>
<span><span class="co">## 1:            -- (     --)  2,909,182.1 ( 179.36) -- (     --)</span></span>
<span><span class="co">## 2: -29,489,630.3 (-339.39)           -- (     --) -- (     --)</span></span>
<span><span class="co">## 3:  28,528,421.9 (  48.64)  7,962,729.8 (  65.28) -- (     --)</span></span>
<span><span class="co">## 4:            -- (     --)           -- (     --) -- (     --)</span></span>
<span><span class="co">## 5: 487,026,140.7 (  22.47) 18,788,330.8 (  34.12) -- (     --)</span></span>
<span><span class="co">## 6:            -- (     --)           -- (     --) -- (     --)</span></span>
<span><span class="co">## 7:            -- (     --)           -- (     --) -- (     --)</span></span>
<span><span class="co">## 8: 486,064,932.3 (  28.02) 29,660,242.6 (  29.35) -- (     --)</span></span>
<span><span class="co">##                        Total</span></span>
<span><span class="co">##                       &lt;char&gt;</span></span>
<span><span class="co">## 1:    17,386,950.9 (  82.45)</span></span>
<span><span class="co">## 2:   308,069,606.4 (  55.88)</span></span>
<span><span class="co">## 3:   124,752,652.1 (  87.24)</span></span>
<span><span class="co">## 4:    56,756,979.9 (  82.14)</span></span>
<span><span class="co">## 5: 1,095,829,416.3 (  19.18)</span></span>
<span><span class="co">## 6:              -- (     --)</span></span>
<span><span class="co">## 7:              -- (     --)</span></span>
<span><span class="co">## 8: 1,145,742,756.1 (  14.68)</span></span></code></pre>
</details><div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Raw data (list object) for estimate</span></span>
<span><span class="va">raw4</span> <span class="op">&lt;-</span> <span class="va">tree4</span><span class="op">$</span><span class="va">raw</span>      <span class="co"># extract raw data list object from output</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "unit_totest"   "unit_rowest"   "unit_colest"   "unit_grpest"  </span></span>
<span><span class="co">##  [5] "domdat"        "plotweights"   "estvar"        "estvar.filter"</span></span>
<span><span class="co">##  [9] "module"        "esttype"       "MAmethod"      "predselectlst"</span></span>
<span><span class="co">## [13] "rowvar"        "colvar"        "areaunits"     "estunits"</span></span></code></pre>
</details><div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_totest</span><span class="op">)</span>   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est</span></span>
<span><span class="co">## 1       1 1029.962 22849.33     56         34   1112412  1112412 1145742756</span></span>
<span><span class="co">##        est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left</span></span>
<span><span class="co">## 1 2.827516e+16 168152198 0.1467626 14.67626 712611397 1578874115 816170504</span></span>
<span><span class="co">##    CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1 1475315008 978522477 1312963035</span></span></code></pre>
</details><div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">totest</span><span class="op">)</span>        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">)</span>   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT FORTYPCD      nhat   nhat.var NBRPLT NBRPLT.gt0</span></span>
<span><span class="co">## 1       1      201  15.62995   166.0663     37          2</span></span>
<span><span class="co">## 2       1      265 276.93832 23952.0386     37          4</span></span>
<span><span class="co">## 3       1      266 112.14605  9572.0563     37          5</span></span>
<span><span class="co">## 4       1      268  51.02153  1756.4496     37          2</span></span>
<span><span class="co">## 5       1      281 985.09282 35687.1045     37         23</span></span>
<span><span class="co">## 6       1      901   0.00000     0.0000     37          0</span></span>
<span><span class="co">##                        Forest type ACRES_GIS AREAUSED        est      est.var</span></span>
<span><span class="co">## 1                      Douglas-fir   1112412  1112412   17386951 2.055007e+14</span></span>
<span><span class="co">## 2                 Engelmann spruce   1112412  1112412  308069606 2.963972e+16</span></span>
<span><span class="co">## 3 Engelmann spruce / subalpine fir   1112412  1112412  124752652 1.184505e+16</span></span>
<span><span class="co">## 4                    Subalpine fir   1112412  1112412   56756980 2.173538e+15</span></span>
<span><span class="co">## 5                   Lodgepole pine   1112412  1112412 1095829416 4.416141e+16</span></span>
<span><span class="co">## 6                            Aspen   1112412  1112412          0 0.000000e+00</span></span>
<span><span class="co">##      est.se    est.cv      pse  CI99left  CI99right  CI95left  CI95right</span></span>
<span><span class="co">## 1  14335294 0.8244858 82.44858         0   54312222         0   45483612</span></span>
<span><span class="co">## 2 172161899 0.5588409 55.88409         0  751529271         0  645500728</span></span>
<span><span class="co">## 3 108834961 0.8724060 87.24060         0  405092933         0  338065256</span></span>
<span><span class="co">## 4  46621222 0.8214183 82.14183         0  176845290         0  148132896</span></span>
<span><span class="co">## 5 210146160 0.1917690 19.17690 554528778 1637130054 683950510 1507708322</span></span>
<span><span class="co">## 6         0       NaN      NaN         0          0         0          0</span></span>
<span><span class="co">##    CI68left  CI68right</span></span>
<span><span class="co">## 1   3131104   31642797</span></span>
<span><span class="co">## 2 136861849  479277364</span></span>
<span><span class="co">## 3  16520867  232984437</span></span>
<span><span class="co">## 4  10394138  103119822</span></span>
<span><span class="co">## 5 886847910 1304810922</span></span>
<span><span class="co">## 6         0          0</span></span></code></pre>
</details><div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">rowest</span><span class="op">)</span>        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_colest</span><span class="op">)</span>   <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT STDSZCD      nhat    nhat.var NBRPLT NBRPLT.gt0 Stand-size class</span></span>
<span><span class="co">## 1       1       1 977.21895 28542.07717     37         18   Large diameter</span></span>
<span><span class="co">## 2       1       2 436.94672 14991.78126     37         14  Medium diameter</span></span>
<span><span class="co">## 3       1       3  26.66299    61.25535     37          4   Small diameter</span></span>
<span><span class="co">## 4       1       5   0.00000     0.00000     37          0       Nonstocked</span></span>
<span><span class="co">##   ACRES_GIS AREAUSED        est      est.var    est.se    est.cv      pse</span></span>
<span><span class="co">## 1   1112412  1112412 1087070431 3.531971e+16 187935399 0.1728824 17.28824</span></span>
<span><span class="co">## 2   1112412  1112412  486064932 1.855175e+16 136204803 0.2802194 28.02194</span></span>
<span><span class="co">## 3   1112412  1112412   29660243 7.580112e+13   8706384 0.2935372 29.35372</span></span>
<span><span class="co">## 4   1112412  1112412          0 0.000000e+00         0       NaN      NaN</span></span>
<span><span class="co">##    CI99left  CI99right  CI95left  CI95right  CI68left  CI68right</span></span>
<span><span class="co">## 1 602980922 1571159939 718723817 1455417045 900176591 1273964270</span></span>
<span><span class="co">## 2 135224610  836905254 219108425  753021440 350614993  621514872</span></span>
<span><span class="co">## 3   7234084   52086401  12596044   46724441  21002111   38318375</span></span>
<span><span class="co">## 4         0          0         0          0         0          0</span></span></code></pre>
</details><div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">colest</span><span class="op">)</span>        <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">unit_grpest</span><span class="op">)</span>   <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT grpvar       nhat   nhat.var NBRPLT NBRPLT.gt0 FORTYPCD STDSZCD</span></span>
<span><span class="co">## 1       1  201#1  13.014750   152.8914     37          1      201       1</span></span>
<span><span class="co">## 2       1  201#3   2.615201    22.0028     37          1      201       3</span></span>
<span><span class="co">## 3       1  265#1 303.447940 18110.8690     37          3      265       1</span></span>
<span><span class="co">## 4       1  265#2 -26.509621  8094.8527     37          1      265       2</span></span>
<span><span class="co">## 5       1  266#1  79.342431  9690.2120     37          3      266       1</span></span>
<span><span class="co">## 6       1  266#2  25.645546   155.6185     37          1      266       2</span></span>
<span><span class="co">##   Stand-size class                      Forest type ACRES_GIS AREAUSED</span></span>
<span><span class="co">## 1   Large diameter                      Douglas-fir   1112412  1112412</span></span>
<span><span class="co">## 2   Small diameter                      Douglas-fir   1112412  1112412</span></span>
<span><span class="co">## 3   Large diameter                 Engelmann spruce   1112412  1112412</span></span>
<span><span class="co">## 4  Medium diameter                 Engelmann spruce   1112412  1112412</span></span>
<span><span class="co">## 5   Large diameter Engelmann spruce / subalpine fir   1112412  1112412</span></span>
<span><span class="co">## 6  Medium diameter Engelmann spruce / subalpine fir   1112412  1112412</span></span>
<span><span class="co">##         est      est.var    est.se     est.cv        pse CI99left CI99right</span></span>
<span><span class="co">## 1  14477769 1.891972e+14  13754899  0.9500703   95.00703        0  49908040</span></span>
<span><span class="co">## 2   2909182 2.722761e+13   5218008  1.7936340  179.36340        0  16349880</span></span>
<span><span class="co">## 3 337559237 2.241150e+16 149704704  0.4434917   44.34917        0 723173001</span></span>
<span><span class="co">## 4 -29489630 1.001707e+16 100085296 -3.3939149 -339.39149        0 228313008</span></span>
<span><span class="co">## 5  88261500 1.199126e+16 109504620  1.2406839  124.06839        0 370326709</span></span>
<span><span class="co">## 6  28528422 1.925718e+14  13877026  0.4864281   48.64281        0  64273272</span></span>
<span><span class="co">##   CI95left CI95right    CI68left CI68right</span></span>
<span><span class="co">## 1        0  41436875    799101.3  28156436</span></span>
<span><span class="co">## 2        0  13136290         0.0   8098271</span></span>
<span><span class="co">## 3 44143408 630975066 188684213.4 486434260</span></span>
<span><span class="co">## 4        0 166673945         0.0  70040981</span></span>
<span><span class="co">## 5        0 302886611         0.0 197159233</span></span>
<span><span class="co">## 6  1329951  55726893  14728304.3  42328540</span></span></code></pre>
</details><div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raw4</span><span class="op">$</span><span class="va">grpest</span><span class="op">)</span>        <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Titles (list object) for estimate</span></span>
<span><span class="va">titlelst4</span> <span class="op">&lt;-</span> <span class="va">tree4</span><span class="op">$</span><span class="va">titlelst</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">titlelst4</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "title.estpse"  "title.yvar"    "title.estvar"  "title.unitvar"</span></span>
<span><span class="co">##  [5] "title.ref"     "outfn.estpse"  "outfn.rawdat"  "outfn.param"  </span></span>
<span><span class="co">##  [9] "title.rowvar"  "title.row"     "title.colvar"  "title.col"    </span></span>
<span><span class="co">## [13] "title.unitsn"</span></span></code></pre>
</details><div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">titlelst4</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by forest type and stand-size class on forest land"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.yvar</span></span>
<span><span class="co">## [1] "Net volume, in cubic feet"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.estvar</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] "Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Forest type"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by forest type on forest land; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.colvar</span></span>
<span><span class="co">## [1] "Stand-size class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.col</span></span>
<span><span class="co">## [1] "Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by stand-size class on forest land; Wyoming, 2011-2013"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "cubic feet"</span></span></code></pre>
</details><div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## List output files in outfolder</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">outfolder</span>, pattern <span class="op">=</span> <span class="st">"WY_tree"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_modMA_mase_greg.csv"</span></span></code></pre>
</details><div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">outfolder</span>, <span class="st">"/rawdata"</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"WY_tree"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_domdat.csv"     </span></span>
<span><span class="co">## [2] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_colest.csv"</span></span>
<span><span class="co">## [3] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_grpest.csv"</span></span>
<span><span class="co">## [4] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_rowest.csv"</span></span>
<span><span class="co">## [5] "WY_tree_VOLCFNET_FORTYPCD_STDSZCD_forestland_rawdata_modMA_mase_greg_unit_totest.csv"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-10-number-of-live-trees-by-species-wyoming-2011-2013">Example 10: Number of live trees by species, Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-10-number-of-live-trees-by-species-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We can use tree domain in estimation output rows:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Number of live trees (at least 1 inch diameter) by species</span></span>
<span><span class="va">tree5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"TPA_UNADJ"</span>,               <span class="co"># est - number of trees per acre </span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,    <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"SPCD"</span>,             <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span>    </span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">FALSE</span>               <span class="co"># out - return output with est and pse</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>We can also look at the output list and estimates again:</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree5</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree5</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                  Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          subalpine fir 117036939.1                  20.78</span></span>
<span><span class="co">## 2 Rocky Mountain juniper          --                     --</span></span>
<span><span class="co">## 3       Engelmann spruce 123334760.1                  15.94</span></span>
<span><span class="co">## 4         lodgepole pine 260668686.6                  18.14</span></span>
<span><span class="co">## 5            limber pine   4996348.9                 125.15</span></span>
<span><span class="co">## 6            Douglas-fir  25445385.3                 109.24</span></span>
<span><span class="co">## 7          quaking aspen  15095940.7                   86.1</span></span>
<span><span class="co">## 8                  Total 341528276.1                  13.13</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="example-11-number-of-live-trees-plus-seedlings-by-species-wyoming-2011-2013">Example 11: Number of live trees (plus seedlings) by species,
Wyoming, 2011-2013<a class="anchor" aria-label="anchor" href="#example-11-number-of-live-trees-plus-seedlings-by-species-wyoming-2011-2013"></a>
</h4>
<details><summary>
View Example
</summary><p>We can also add seedlings.</p>
<p>Note: seedling data are only available for number of trees (estvar =
TPA_UNADJ).</p>
<p>Note: must include seedling data in population data calculations.</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MApopdat_seed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMApop.html">modMApop</a></span><span class="op">(</span>popTabs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tree <span class="op">=</span> <span class="va">WYtree</span>,</span>
<span>                                         cond <span class="op">=</span> <span class="va">WYcond</span>,</span>
<span>                                         seed <span class="op">=</span> <span class="va">WYseed</span><span class="op">)</span>,</span>
<span>                     pltassgn <span class="op">=</span> <span class="va">WYpltassgn</span>,</span>
<span>                     auxdat <span class="op">=</span> <span class="va">modeldat</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Number of live trees by species, including seedlings</span></span>
<span><span class="va">tree6</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modMAtree.html">modMAtree</a></span><span class="op">(</span></span>
<span>    MApopdat <span class="op">=</span> <span class="va">MApopdat_seed</span>,         <span class="co"># pop - population calculations</span></span>
<span>    MAmethod <span class="op">=</span> <span class="st">"greg"</span>,           <span class="co"># est - model-assisted method</span></span>
<span>    estseed <span class="op">=</span> <span class="st">"add"</span>,             <span class="co"># est - add seedling data</span></span>
<span>    landarea <span class="op">=</span> <span class="st">"FOREST"</span>,         <span class="co"># est - forest land filter</span></span>
<span>    estvar <span class="op">=</span> <span class="st">"TPA_UNADJ"</span>,               <span class="co"># est - number of trees per acre </span></span>
<span>    estvar.filter <span class="op">=</span> <span class="st">"STATUSCD == 1"</span>,    <span class="co"># est - live trees only</span></span>
<span>    rowvar <span class="op">=</span> <span class="st">"SPCD"</span>,             <span class="co"># est - row domain</span></span>
<span>    returntitle <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span>    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/table_options.html" class="external-link">table_options</a></span><span class="op">(</span></span>
<span>      row.FIAname <span class="op">=</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span>      allin1 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>              <span class="co"># out - return output with est and pse</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p>And again we can look at our outputs and compare estimates:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Look at output list</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tree6</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "est"      "titlelst" "raw"      "statecd"  "invyr"</span></span></code></pre>
</details><div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">tree6</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                  Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          subalpine fir 795266354.7                  13.82</span></span>
<span><span class="co">## 2 Rocky Mountain juniper          --                     --</span></span>
<span><span class="co">## 3       Engelmann spruce 226522023.3                  22.37</span></span>
<span><span class="co">## 4         lodgepole pine 333518419.3                  17.97</span></span>
<span><span class="co">## 5            limber pine  45851027.5                  117.1</span></span>
<span><span class="co">## 6            Douglas-fir  56082522.7                 105.42</span></span>
<span><span class="co">## 7          quaking aspen 153434173.9                  64.29</span></span>
<span><span class="co">## 8                  Total 948282173.2                     16</span></span></code></pre>
</details><div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Compare estimates with and without seedlings</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tree5</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                  Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          subalpine fir 117036939.1                  20.78</span></span>
<span><span class="co">## 2 Rocky Mountain juniper          --                     --</span></span>
<span><span class="co">## 3       Engelmann spruce 123334760.1                  15.94</span></span>
<span><span class="co">## 4         lodgepole pine 260668686.6                  18.14</span></span>
<span><span class="co">## 5            limber pine   4996348.9                 125.15</span></span>
<span><span class="co">## 6            Douglas-fir  25445385.3                 109.24</span></span></code></pre>
</details><div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tree6</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                  Species    Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          subalpine fir 795266354.7                  13.82</span></span>
<span><span class="co">## 2 Rocky Mountain juniper          --                     --</span></span>
<span><span class="co">## 3       Engelmann spruce 226522023.3                  22.37</span></span>
<span><span class="co">## 4         lodgepole pine 333518419.3                  17.97</span></span>
<span><span class="co">## 5            limber pine  45851027.5                  117.1</span></span>
<span><span class="co">## 6            Douglas-fir  56082522.7                 105.42</span></span></code></pre>
</details></details><!-- #### Example 11: Number of seedlings by species, Wyoming, 2011-2013 --><!-- Of course, we can also look at *only* seedlings. --><!-- Note: seedling data are only available for number of trees (estvar = TPA_UNADJ). --><!-- Note: must include seedling data in population data calculations. --><!-- ```{r} --><!-- ## Number of live trees seedlings by species --><!-- tree7 <- modMAtree( --><!--     MApopdat = MApopdat_seed,         # pop - population calculations --><!--     MAmethod = "greg",           # est - model-assisted method --><!--     estseed = "only",            # est - add seedling data --><!--     landarea = "FOREST",         # est - forest land filter --><!--     estvar = "TPA_UNADJ",        # est - number of trees per acre  --><!--     rowvar = "SPCD",             # est - row domain --><!--     returntitle = TRUE,          # out - return title information --><!--     table_opts = table_options( --><!--       row.FIAname = TRUE,          # est - row domain names --><!--       allin1 = FALSE               # out - return output with est and pse --><!--       ) --><!--     ) --><!-- ``` --><!-- And again we can look at our outputs and compare estimates: --><!-- ```{r} --><!-- ## Look at output list --><!-- names(tree7) --><!-- ## Estimate and percent sampling error of estimate --><!-- tree7$est --><!-- ## Compare estimates with, without, and only seedlings --><!-- head(tree5$est) --><!-- head(tree6$est) --><!-- head(tree7$est) --><!-- ``` -->
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
