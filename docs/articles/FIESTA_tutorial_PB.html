<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FIESTA - Photo-Based Module • FIESTA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="FIESTA - Photo-Based Module">
<meta property="og:description" content="FIESTA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USDAForestService/FIESTA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FIESTA - Photo-Based Module</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/HEAD/vignettes/FIESTA_tutorial_PB.Rmd" class="external-link"><code>vignettes/FIESTA_tutorial_PB.Rmd</code></a></small>
      <div class="hidden name"><code>FIESTA_tutorial_PB.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="photo-based-pb-module-overview">Photo-based (PB) module overview<a class="anchor" aria-label="anchor" href="#photo-based-pb-module-overview"></a>
</h2>
<p><code>FIESTA</code>’s Photo-Based (PB) module calculates population
estimates and associated sampling errors based on Patterson (2012). In
contrast to FIA’s traditional green-book estimators which were
constructed based on the finite sampling paradigm using sample plots
with distinct area, the photo-based estimators were constructed based on
the context of the infinite sampling paradigm, along with the concept of
a support region. The sample is the set of plot centers and the
information from the support region (the photo plot) are assigned to the
plot centers. The photo interpreted points are used as a sample of the
support region and the observations are used to estimate the information
from the support region. <code>FIESTA</code> includes non-ratio
estimators for area and percent cover estimates by domain, and
ratio-of-means estimators for area and percent cover estimates within
domain, and supports post-stratification for reducing variance.</p>
</div>
<div class="section level2">
<h2 id="objective-of-tutorial">Objective of tutorial<a class="anchor" aria-label="anchor" href="#objective-of-tutorial"></a>
</h2>
<p>The main objective of this tutorial is to demonstrate how to use
<code>FIESTA</code> for generating photo-based estimates, supplementary
to FIA’s traditional estimates, using estimators from Patterson (2012).
For information on <code>FIESTA</code> parameters or population data,
please see the <code>FIESTA_manual_mod_est</code> and
<code>FIESTA_manual_mod_pop</code> vignettes. The structure of this
vignette is as follows:</p>
<ul>
<li><a href="#output">FIESTA output from Photo-Based module</a></li>
<li><a href="#PBfun">PB Functions and Examples</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="output">Output values from FIESTA Photo-Based module<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>Estimates with percent sampling error for the row domain (and column
domain) specified by the input parameters. This can be in the form of
one table or two separate tables, depending on the number of domains and
on <code>allin1</code> parameter specified through the
<code>table_opts</code> parameter.</p>
<p><code>FIESTA</code> returns a list object with one or more of the
following components. If <code>savedata = TRUE</code>, all output data
frames are written to the specified <code>outfolder</code>.</p>
<ul>
<li>
<strong>$est</strong> - Data frame with estimates by
<code>rowvar</code>, <code>colvar</code> (and estimation unit). If
<code>sumunits = TRUE</code> or one estimation unit and
<code>colvar = NULL</code>, estimates and percent sampling error are all
in est.</li>
<li>
<strong>$pse</strong> - Data frame with percent sampling errors
corresponding to est.</li>
<li>
<strong>$titlelst</strong> - If <code>returntitle = TRUE</code>, a
list with one or two titles for est and pse, depending on number of
output data frames.</li>
<li>
<strong>$raw</strong> - If <code>rawdata = TRUE</code>, a list of
raw data used in the estimation process.</li>
</ul>
<div class="section level3">
<h3 id="raw-data-used-for-producing-estimates-if-rawdata-true">Raw Data Used for Producing Estimates (If
<code>rawdata = TRUE</code>)<a class="anchor" aria-label="anchor" href="#raw-data-used-for-producing-estimates-if-rawdata-true"></a>
</h3>
<details><summary>
View Raw Data Used for Producing Estimates
</summary><ul>
<li>
<strong>raw$pntsampcnt</strong> - Number of points by domain for
estimate.</li>
<li>
<strong>raw$stratdat</strong> - Data frame of strata information by
estimation unit. See table below for variable descriptions. Acres is
only included if <code>tabtype = "AREA"</code>).</li>
<li>
<strong>raw$pltdom</strong> - Proportion of points by domain by
plot, strata, estimation unit.</li>
</ul>
<table class="table">
<caption>Description of variables in stratdat.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ESTN_UNIT</td>
<td align="left">Estimation unit</td>
</tr>
<tr class="even">
<td align="left">STRATUMCD</td>
<td align="left">Strata value</td>
</tr>
<tr class="odd">
<td align="left">P1POINTCNT</td>
<td align="left">Number of pixels by strata and estimation unit</td>
</tr>
<tr class="even">
<td align="left">n.strata</td>
<td align="left">Number of plots in strata (and estimation unit)</td>
</tr>
<tr class="odd">
<td align="left">n.total</td>
<td align="left">Number of plots for estimation unit</td>
</tr>
<tr class="even">
<td align="left">ACRES</td>
<td align="left">Total acres for estimation unit</td>
</tr>
<tr class="odd">
<td align="left">strwt</td>
<td align="left">Summed proportions by strata and estimation unit</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Description of variables in pltdom.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ESTN_UNIT</td>
<td align="left">Estimation unit</td>
</tr>
<tr class="even">
<td align="left">STRATUMCD</td>
<td align="left">Strata value</td>
</tr>
<tr class="odd">
<td align="left">plot_id</td>
<td align="left">Unique identifier for ICE plot</td>
</tr>
<tr class="even">
<td align="left">category</td>
<td align="left">Category (domain) for estimation</td>
</tr>
<tr class="odd">
<td align="left">nbrpts.pltdom</td>
<td align="left">Number of points by category (domain)</td>
</tr>
<tr class="even">
<td align="left">PtsPerPlot</td>
<td align="left">Number of points interpreted</td>
</tr>
<tr class="odd">
<td align="left">p.pltdom</td>
<td align="left">Proportion of plot by category</td>
</tr>
</tbody>
</table></details>
</div>
<div class="section level3">
<h3 id="processing-data-if-rawdata-true">Processing data (If <code>rawdata = TRUE</code>)<a class="anchor" aria-label="anchor" href="#processing-data-if-rawdata-true"></a>
</h3>
<details><summary>
View Processing Data
</summary><p>Separate data frames with calculated variables used in estimation
process. The number of processing tables depends on the input
parameters. The tables include:</p>
<ul>
<li>
<strong>raw$unit_totest</strong> - Total by estimation unit</li>
<li>
<strong>raw$unit_rowest</strong> - If rowvar != NULL, rowvar
totals</li>
<li>
<strong>raw$unit_colvar</strong> - If colvar != NULL, colvar
totals</li>
<li>
<strong>raw$unit_grpvar</strong> - If colvar != NULL, a combination
of rowvar and colvar</li>
</ul>
<p>And, if <code>sumunits = TRUE</code>, the raw data for the summed
estimation units are also included: (<code>totest</code>,
<code>rowest</code>, <code>colest</code>, <code>grpest</code>,
respectively). These tables do not included estimate proportions
(<code>nhat</code> and <code>nhat.var</code>). <strong>See below for
variable descriptions of summed estimation units</strong>:</p>
<table class="table">
<caption>Description of variables in processing tables for nonratio
estimates.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">phat</td>
<td align="left">Estimated proportion of land</td>
</tr>
<tr class="even">
<td align="left">phat.var</td>
<td align="left">Variance estimate of estimated proportion of land</td>
</tr>
<tr class="odd">
<td align="left">phat.se</td>
<td align="left">Standard error of estimated proportion of land {
sqrt(phat.var) }</td>
</tr>
<tr class="even">
<td align="left">phat.cv</td>
<td align="left">Coefficient of variance of estimated proportion of land
{ phat.se/phat }</td>
</tr>
<tr class="odd">
<td align="left">est</td>
<td align="left">Estimated percent cover of land { phat*100 }</td>
</tr>
<tr class="even">
<td align="left">est.var</td>
<td align="left">Variance of estimated percent cover of land {
phat.var*100^2 }</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Description of variables in processing tables for ratio
estimates.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">phat.n</td>
<td align="left">Estimated proportion of land, for numerator</td>
</tr>
<tr class="even">
<td align="left">phat.var.n</td>
<td align="left">Variance of estimated proportion of land, for
numerator</td>
</tr>
<tr class="odd">
<td align="left">phat.d</td>
<td align="left">Estimated proportion of land, for denominator</td>
</tr>
<tr class="even">
<td align="left">phat.var.d</td>
<td align="left">Variance of estimated proportion of land, for
denominator</td>
</tr>
<tr class="odd">
<td align="left">covar</td>
<td align="left">Covariance of estimated proportion of numerator and
denominator</td>
</tr>
<tr class="even">
<td align="left">rhat</td>
<td align="left">Ratio of estimated proportions
(numerator/denominator)</td>
</tr>
<tr class="odd">
<td align="left">rhat.var</td>
<td align="left">Variance of ratio of estimated proportions</td>
</tr>
<tr class="even">
<td align="left">rhat.se</td>
<td align="left">Standard error of ratio of estimated proportions {
rhat.se/rhat }</td>
</tr>
<tr class="odd">
<td align="left">rhat.cv</td>
<td align="left">Coefficient of variation of ratio of estimated
proportions { sqrt(rhat.var) }</td>
</tr>
<tr class="even">
<td align="left">est</td>
<td align="left">Estimated percent cover of land { rhat*100 }</td>
</tr>
<tr class="odd">
<td align="left">est.var</td>
<td align="left">Variance of estimated percent cover of land {
rhat.var*100^2 }</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Description of variables in processing tables for both nonratio
and ratio estimates.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">nbrpts</td>
<td align="left">Number of points used in estimate</td>
</tr>
<tr class="even">
<td align="left">ACRES</td>
<td align="left">Total acres for estimation unit (if
tabtype=‘AREA’)</td>
</tr>
<tr class="odd">
<td align="left">est.se</td>
<td align="left">Standard error of estimated percent cover of land {
sqrt(est.var) }</td>
</tr>
<tr class="even">
<td align="left">est.cv</td>
<td align="left">Coefficient of variance of estimated percent cover of
land { est.se/est }</td>
</tr>
<tr class="odd">
<td align="left">pse</td>
<td align="left">Percent sampling error of the estimated percent cover
of land { est.cv*100 }</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Description of variables in processing tables for all
estimates.</caption>
<thead><tr class="header">
<th align="left">Variable</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CI99left</td>
<td align="left">Left tail of 99% confidence interval for estimate { est
- (2.58*est.se) }</td>
</tr>
<tr class="even">
<td align="left">CI99right</td>
<td align="left">Right tail of 99% confidence interval for estimate {
est + (2.58*est.se) }</td>
</tr>
<tr class="odd">
<td align="left">CI95left</td>
<td align="left">Left tail of 95% confidence interval for estimate { est
- (1.96*est.se) }</td>
</tr>
<tr class="even">
<td align="left">CI95right</td>
<td align="left">Right tail of 95% confidence interval for estimate {
est + (1.96*est.se) }</td>
</tr>
<tr class="odd">
<td align="left">CI68left</td>
<td align="left">Left tail of 68% confidence interval for estimate { est
- (0.97*est.se) }</td>
</tr>
<tr class="even">
<td align="left">CI68right</td>
<td align="left">Right tail of 68% confidence interval for estimate {
est + (0.97*est.se) }</td>
</tr>
</tbody>
</table></details>
</div>
</div>
<div class="section level2">
<h2 id="PBfun">PB Functions and Examples<a class="anchor" aria-label="anchor" href="#PBfun"></a>
</h2>
<p>The examples following use data from the Image-Based Change
Estimation (ICE) project, from two counties, or Estimation Units
(ESTN_UNIT) in the state of Utah: Davis (11); Salt Lake (35).</p>
<p>The ICE project is an image-based inventory across FIA plots designed
to supplement the FIA field-based inventory for monitoring land use and
land cover change at a more timely interval than the current FIA
reporting timeframe. Observations are made at two points in time across
all FIA plots and point-level interpretations are made within an acre
support region from plot center. Attributes of land use, land cover,
change, and agent of change are recorded at each point. The dataset
includes plot-level and point-level data for each plot in the sample.
The following tutorial uses a subset of ICE data to demonstrate how to
generate estimates from the <code><a href="../reference/modPB.html">modPB()</a></code> function.</p>
<div class="section level4">
<h4 id="example-data---utah-davis-and-salt-lake-counties-ut1135-time-interval-2011-2014">Example data - Utah, Davis and Salt Lake counties (ut1135), Time
interval 2011-2014<a class="anchor" aria-label="anchor" href="#example-data---utah-davis-and-salt-lake-counties-ut1135-time-interval-2011-2014"></a>
</h4>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th align="left">External data</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">icepnt_utco1135.csv</td>
<td align="left">ICE point-level data (see ref_icepnt R data frame for
variable descriptions)</td>
</tr>
<tr class="even">
<td align="left">icepctcover_utco1135.csv</td>
<td align="left">ICE plot-level percentages of land cover</td>
</tr>
<tr class="odd">
<td align="left">icepltassgn_utco1135.csv</td>
<td align="left">ICE plot-level data, including estimation unit and
strata variables</td>
</tr>
<tr class="even">
<td align="left">cover_LUT.csv</td>
<td align="left">ICE look-up table for land cover classes</td>
</tr>
<tr class="odd">
<td align="left">chg_ag_LUT.csv</td>
<td align="left">ICE look-up table for change agent classes</td>
</tr>
<tr class="even">
<td align="left">unitarea_utco1135.csv</td>
<td align="left">Area, in acres, by county estimation unit
(ESTN_UNIT)</td>
</tr>
<tr class="odd">
<td align="left">strlut_utco1135.csv</td>
<td align="left">Pixel counts by strata (STRATUMCD) and estimation unit
(ESTN_UNIT)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="set-up">Set up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/FIESTA/" class="external-link">FIESTA</a></span><span class="op">)</span></span></code></pre></div>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For our purposes in this vignette, we have saved our outfolder
file path as the <code>outfolder</code> object in a temporary directory.
We also set a few default options preferred for this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outfolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-data-for-examples">Get data for examples<a class="anchor" aria-label="anchor" href="#get-data-for-examples"></a>
</h3>
<details><summary>
View Getting Data
</summary><p>Now that we’ve loaded <code>FIESTA</code> and setup our outfolder, we
can retrieve the data needed to run the examples. First, we point to
some external data stored in <code>FIESTA</code> and import into R.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Get external data file names</span></span>
<span><span class="va">icepntfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/icepnt_utco1135.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">icepltfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/icepltassgn_utco1135.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">icepctcoverfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/icepctcover_utco1135.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">icechg_agfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/chg_ag_LUT.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">icecoverfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/cover_LUT.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">unitareafn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/unitarea_utco1135.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span><span class="va">strlutfn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"PB_data/strlut_utco1135.csv"</span>, package <span class="op">=</span> <span class="st">"FIESTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">icepnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">icepntfn</span><span class="op">)</span></span>
<span><span class="va">iceplt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">icepltfn</span><span class="op">)</span></span>
<span><span class="va">icepctcover</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">icepctcoverfn</span><span class="op">)</span></span>
<span></span>
<span><span class="va">icecover</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">icecoverfn</span><span class="op">)</span></span>
<span><span class="va">icechg_ag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">icechg_agfn</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">icepnt</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## 'data.frame':    1305 obs. of  8 variables:</span></span>
<span><span class="co">##  $ plot_id   : num  5.54e+12 5.54e+12 5.54e+12 5.54e+12 5.54e+12 ...</span></span>
<span><span class="co">##  $ dot_cnt   : int  1 26 31 36 41 1 26 31 36 41 ...</span></span>
<span><span class="co">##  $ change_1_2: int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##  $ cover_1   : int  310 310 310 310 310 140 220 140 220 140 ...</span></span>
<span><span class="co">##  $ cover_2   : int  310 310 310 310 310 140 220 140 220 140 ...</span></span>
<span><span class="co">##  $ use_1     : int  200 200 200 200 200 400 400 400 400 400 ...</span></span>
<span><span class="co">##  $ use_2     : int  200 200 200 200 200 400 400 400 400 400 ...</span></span>
<span><span class="co">##  $ chg_ag_2  : int  0 0 0 0 0 0 0 0 0 0 ...</span></span></code></pre>
</details><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">iceplt</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## 'data.frame':    133 obs. of  5 variables:</span></span>
<span><span class="co">##  $ plot_id   : num  5.54e+12 5.54e+12 5.54e+12 5.54e+12 5.54e+12 ...</span></span>
<span><span class="co">##  $ ESTN_UNIT : int  11 11 11 11 11 11 11 35 35 35 ...</span></span>
<span><span class="co">##  $ STRATUMCD : int  2 2 2 2 2 2 2 2 1 2 ...</span></span>
<span><span class="co">##  $ LON_PUBLIC: num  -112 -112 -112 -112 -112 ...</span></span>
<span><span class="co">##  $ LAT_PUBLIC: num  41 41.1 41 41 41 ...</span></span></code></pre>
</details><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">icepctcover</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## 'data.frame':    133 obs. of  15 variables:</span></span>
<span><span class="co">##  $ plot_id          : num  5.54e+12 5.54e+12 5.54e+12 5.54e+12 5.54e+12 ...</span></span>
<span><span class="co">##  $ Change           : int  0 0 0 0 0 0 0 0 0 1 ...</span></span>
<span><span class="co">##  $ Tree11           : int  0 0 0 0 0 0 40 20 0 0 ...</span></span>
<span><span class="co">##  $ Shrub11          : int  0 0 20 0 0 0 0 80 0 0 ...</span></span>
<span><span class="co">##  $ OtherVegetation11: int  0 60 60 0 0 0 60 0 100 27 ...</span></span>
<span><span class="co">##  $ Barren11         : int  0 0 20 0 0 0 0 0 0 56 ...</span></span>
<span><span class="co">##  $ Impervious11     : int  0 40 0 0 0 0 0 0 0 18 ...</span></span>
<span><span class="co">##  $ Water11          : int  100 0 0 100 100 100 0 0 0 0 ...</span></span>
<span><span class="co">##  $ Tree14           : int  0 0 0 0 0 0 40 20 0 0 ...</span></span>
<span><span class="co">##  $ Shrub14          : int  0 0 20 0 0 0 0 80 0 0 ...</span></span>
<span><span class="co">##  $ OtherVegetation14: int  0 60 60 0 0 0 60 0 100 24 ...</span></span>
<span><span class="co">##  $ Barren14         : int  0 0 20 100 100 0 0 0 0 36 ...</span></span>
<span><span class="co">##  $ Impervious14     : int  0 40 0 0 0 0 0 0 0 40 ...</span></span>
<span><span class="co">##  $ Water14          : int  100 0 0 0 0 100 0 0 0 0 ...</span></span>
<span><span class="co">##  $ Veg.NonVeg       : int  0 0 0 0 0 0 0 0 0 3 ...</span></span></code></pre>
</details><p>Next, we can convert X/Y coordinates to a simple feature and look at
the spatial distribution by county (ESTN_UNIT) with the
<code><a href="../reference/spMakeSpatialPoints.html">spMakeSpatialPoints()</a></code> function from
<code>FIESTA</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">icepltsp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spMakeSpatialPoints.html">spMakeSpatialPoints</a></span><span class="op">(</span>xyplt <span class="op">=</span> <span class="va">iceplt</span>,</span>
<span>                                xy.uniqueid <span class="op">=</span> <span class="st">"plot_id"</span>,</span>
<span>                                xvar <span class="op">=</span> <span class="st">"LON_PUBLIC"</span>,</span>
<span>                                yvar <span class="op">=</span> <span class="st">"LAT_PUBLIC"</span>, </span>
<span>                                xy.crs <span class="op">=</span> <span class="fl">4269</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">icepltsp</span><span class="op">[</span><span class="st">"ESTN_UNIT"</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</details><p>Now, let’s look at the look up tables stored in <code>FIESTA</code>
for land use cover codes and change agent codes and create new lookup
tables for Time 1 and Time 2 land use cover.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">icecover</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   cover        cover_nm</span></span>
<span><span class="co">## 1   110            Tree</span></span>
<span><span class="co">## 2   130           Shrub</span></span>
<span><span class="co">## 3   140 OtherVegetation</span></span>
<span><span class="co">## 4   210          Barren</span></span>
<span><span class="co">## 5   220      Impervious</span></span>
<span><span class="co">## 6   310           Water</span></span>
<span><span class="co">## 7   999 Uninterpretable</span></span></code></pre>
</details><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">icechg_ag</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##    chg_ag_2                                         chg_ag_2_nm</span></span>
<span><span class="co">## 1         0                                           No Change</span></span>
<span><span class="co">## 2        11                                         Development</span></span>
<span><span class="co">## 3        21 Harvest (Forested: &gt;10% canopy cover visible on T2)</span></span>
<span><span class="co">## 4        22 Harvest (Forested: &lt;10% canopy cover visible on T2)</span></span>
<span><span class="co">## 5        31                          Regeneration of Vegetation</span></span>
<span><span class="co">## 6        33                       Removal or Loss of Vegetation</span></span>
<span><span class="co">## 7        34                                 Stress or Mortality</span></span>
<span><span class="co">## 8        41                                                Fire</span></span>
<span><span class="co">## 9        90                                     Expected Change</span></span>
<span><span class="co">## 10       91                                        Other Change</span></span>
<span><span class="co">## 11       99                                     Uninterpretable</span></span></code></pre>
</details><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create look-up tables for Time 1 (cover_11) and Time 2 (cover_14) classes</span></span>
<span><span class="va">icecover_1</span> <span class="op">&lt;-</span> <span class="va">icecover</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icecover_1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"cover"</span>, <span class="st">"cover_1"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icecover_1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">icecover_2</span> <span class="op">&lt;-</span> <span class="va">icecover</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icecover_2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"cover"</span>, <span class="st">"cover_2"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icecover_2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">icecover_1</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   cover_1      cover_1_nm</span></span>
<span><span class="co">## 1     110            Tree</span></span>
<span><span class="co">## 2     130           Shrub</span></span>
<span><span class="co">## 3     140 OtherVegetation</span></span>
<span><span class="co">## 4     210          Barren</span></span>
<span><span class="co">## 5     220      Impervious</span></span>
<span><span class="co">## 6     310           Water</span></span>
<span><span class="co">## 7     999 Uninterpretable</span></span></code></pre>
</details><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">icecover_2</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   cover_2      cover_2_nm</span></span>
<span><span class="co">## 1     110            Tree</span></span>
<span><span class="co">## 2     130           Shrub</span></span>
<span><span class="co">## 3     140 OtherVegetation</span></span>
<span><span class="co">## 4     210          Barren</span></span>
<span><span class="co">## 5     220      Impervious</span></span>
<span><span class="co">## 6     310           Water</span></span>
<span><span class="co">## 7     999 Uninterpretable</span></span></code></pre>
</details><p>Next, let’s import and look at the stratification information stored
in <code>FIESTA</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Area by estimation unit</span></span>
<span><span class="va">unitarea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">unitareafn</span><span class="op">)</span></span>
<span><span class="va">unitarea</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ESTN_UNIT  ACRES</span></span>
<span><span class="co">## 1        11 405566</span></span>
<span><span class="co">## 2        35 516977</span></span></code></pre>
</details><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Pixel counts by strata classes</span></span>
<span><span class="va">strlut</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">strlutfn</span><span class="op">)</span></span>
<span><span class="va">strlut</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ESTN_UNIT STRATUMCD P1POINTCNT</span></span>
<span><span class="co">## 1        11         2      26266</span></span>
<span><span class="co">## 2        35         1       9050</span></span>
<span><span class="co">## 3        35         2      24432</span></span></code></pre>
</details></details>
</div>
<div class="section level3">
<h3 id="pb-module">PB Module<a class="anchor" aria-label="anchor" href="#pb-module"></a>
</h3>
<p>The following examples are set up into two sections as follows</p>
<ul>
<li><a href="#modPBpop">modPBpop()</a></li>
<li><a href="#modPB">modPB()</a></li>
</ul>
<p>where <a href="#modPBpop">modPBpop()</a> contains an example which
sets up the data for estimation in <a href="#modPB">modPB()</a>.</p>
</div>
<div class="section level3">
<h3 id="modPBpop">modPBpop()<a class="anchor" aria-label="anchor" href="#modPBpop"></a>
</h3>
<p><code>FIESTA</code>’s population functions (<code>mod*pop</code>)
check input data and perform population-level calculations, such as:
summing number of sampled plots and standardizing auxiliary data. These
functions are specific to each <code>FIESTA</code> module and are run
prior to or within a module for any population of interest.</p>
<div class="section level4">
<h4 id="pop1">Population Example 1: Population Data for estimation of percent of
land cover at Time 1 (2011)<a class="anchor" aria-label="anchor" href="#pop1"></a>
</h4>
<p><em>These population data are used in: <a href="#ex1">Example
1</a>.</em></p>
<details><summary>
View Example
</summary><p>For <code>FIESTA</code>’s PB Module, the <code><a href="../reference/modPBpop.html">modPBpop()</a></code>
function calculates and outputs: number of plots by strata. The output
from <code><a href="../reference/modPBpop.html">modPBpop()</a></code> can be used for one or more estimates from
<code><a href="../reference/modPB.html">modPB()</a></code>. Here, we set up our population data for the
following examples. We simply supply a few key arguments and we have our
population data:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Percent land cover at Time 1 (2011) for all land in Davis and Salt Lake Counties, UT</span></span>
<span><span class="va">PBpopdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pnt <span class="op">=</span> <span class="va">icepnt</span>, </span>
<span>                     pltassgn <span class="op">=</span> <span class="va">iceplt</span>,</span>
<span>                     pltassgnid <span class="op">=</span> <span class="st">"plot_id"</span>,</span>
<span>                     pntid <span class="op">=</span> <span class="st">"dot_cnt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">PBpopdat</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "PBx"         "pltassgnx"   "plotid"      "pntid"       "pltassgnid" </span></span>
<span><span class="co">##  [6] "sumunits"    "unitvar"     "unitvars"    "strata"      "strtype"    </span></span>
<span><span class="co">## [11] "stratalut"   "strvar"      "strwtvar"    "plotsampcnt" "getprop"</span></span></code></pre>
</details><p>Note that the <code><a href="../reference/modPBpop.html">modPBpop()</a></code> function returns a list with
lots of information and data for us to use. For a quick look at what
this list includes we can use the <code><a href="https://rdrr.io/r/utils/str.html" class="external-link">str()</a></code> function:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">PBpopdat</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 15</span></span>
<span><span class="co">##  $ PBx        :Classes 'data.table' and 'data.frame':    1305 obs. of  12 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "plot_id" "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnx  :Classes 'data.table' and 'data.frame':    133 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ plotid     : chr "plot_id"</span></span>
<span><span class="co">##  $ pntid      : chr "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnid : chr "plot_id"</span></span>
<span><span class="co">##  $ sumunits   : logi FALSE</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ strata     : logi FALSE</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ stratalut  :Classes 'data.table' and 'data.frame':    1 obs. of  5 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "ONEUNIT" "ONESTRAT"</span></span>
<span><span class="co">##  $ strvar     : chr "ONESTRAT"</span></span>
<span><span class="co">##  $ strwtvar   : chr "strwt"</span></span>
<span><span class="co">##  $ plotsampcnt: NULL</span></span>
<span><span class="co">##  $ getprop    : logi TRUE</span></span></code></pre>
</details><p>Now that we’ve created our population dataset, we can move on to
estimation.</p>
</details>
</div>
<div class="section level4">
<h4 id="pop2">Population Example 2: Population data for estimation of area of land
cover at Time 1 (2011)<a class="anchor" aria-label="anchor" href="#pop2"></a>
</h4>
<p><em>These population data are used in: <a href="#ex2">Example 2</a>,
<a href="#ex3">Example 3</a>, <a href="#ex4">Example 4</a>, <a href="#ex5">Example 5</a>, <a href="#ex7">Example 7</a>, and <a href="#ex8">Example 8</a>.</em></p>
<details><summary>
View Example
</summary><p>Here we create population data in order to estimate area, in acres,
of land cover at Time 1 (2011) for all land in Davis and Salt Lake
Counties, Utah.</p>
<p>First, since we want to get estimates for the total population, let’s
sum the area for both counties.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in file </span></span>
<span><span class="va">unitarea</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">unitareafn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sum up the acres</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] 922543</span></span></code></pre>
</details><p>Next, we add the total area to the <code>modPBpop</code> function</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpoparea</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pnt <span class="op">=</span> <span class="va">icepnt</span>, </span>
<span>                      pltassgn <span class="op">=</span> <span class="va">iceplt</span>, </span>
<span>                      pltassgnid <span class="op">=</span> <span class="st">"plot_id"</span>, </span>
<span>                      pntid <span class="op">=</span> <span class="st">"dot_cnt"</span>, </span>
<span>                      unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span><span class="op">)</span> <span class="co"># using the total number of acres</span></span></code></pre></div>
<p>We can look at the contents of the output list. The output now
includes unitarea, the total acres for the population of two
counties.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">PBpoparea</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 18</span></span>
<span><span class="co">##  $ PBx        :Classes 'data.table' and 'data.frame':    1305 obs. of  12 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "plot_id" "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnx  :Classes 'data.table' and 'data.frame':    133 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ plotid     : chr "plot_id"</span></span>
<span><span class="co">##  $ pntid      : chr "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnid : chr "plot_id"</span></span>
<span><span class="co">##  $ sumunits   : logi FALSE</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ strata     : logi FALSE</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ stratalut  :Classes 'data.table' and 'data.frame':    1 obs. of  5 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "ONEUNIT" "ONESTRAT"</span></span>
<span><span class="co">##  $ strvar     : chr "ONESTRAT"</span></span>
<span><span class="co">##  $ strwtvar   : chr "strwt"</span></span>
<span><span class="co">##  $ plotsampcnt: NULL</span></span>
<span><span class="co">##  $ getprop    : logi TRUE</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "AREA"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="pop3">Population Example 3: Population data for estimation by estimation
unit<a class="anchor" aria-label="anchor" href="#pop3"></a>
</h4>
<p><em>These population data are used in: <a href="#ex6">Example
6</a>.</em></p>
<details><summary>
View Example
</summary><p>Here, we generate population data in order to produce estimates by
each estimation unit (i.e, County).</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpopunit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pnt <span class="op">=</span> <span class="va">icepnt</span>, </span>
<span>                      pltassgn <span class="op">=</span> <span class="va">iceplt</span>, </span>
<span>                      pltassgnid <span class="op">=</span> <span class="st">"plot_id"</span>, </span>
<span>                      pntid <span class="op">=</span> <span class="st">"dot_cnt"</span>,</span>
<span>                      unitarea <span class="op">=</span> <span class="va">unitarea</span>, </span>
<span>                      unitvar <span class="op">=</span> <span class="st">"ESTN_UNIT"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">PBpopunit</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##  [1] "PBx"         "pltassgnx"   "plotid"      "pntid"       "pltassgnid" </span></span>
<span><span class="co">##  [6] "sumunits"    "unitvar"     "unitvars"    "strata"      "strtype"    </span></span>
<span><span class="co">## [11] "stratalut"   "strvar"      "strwtvar"    "plotsampcnt" "getprop"    </span></span>
<span><span class="co">## [16] "unitarea"    "areavar"     "areaunits"</span></span></code></pre>
</details><p>Again, we can look at the contents of the output list.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">PBpopunit</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 18</span></span>
<span><span class="co">##  $ PBx        :Classes 'data.table' and 'data.frame':    1305 obs. of  11 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "plot_id" "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnx  :Classes 'data.table' and 'data.frame':    133 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ plotid     : chr "plot_id"</span></span>
<span><span class="co">##  $ pntid      : chr "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnid : chr "plot_id"</span></span>
<span><span class="co">##  $ sumunits   : logi FALSE</span></span>
<span><span class="co">##  $ unitvar    : chr "ESTN_UNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ESTN_UNIT"</span></span>
<span><span class="co">##  $ strata     : logi FALSE</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ stratalut  :Classes 'data.table' and 'data.frame':    2 obs. of  5 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "ESTN_UNIT" "ONESTRAT"</span></span>
<span><span class="co">##  $ strvar     : chr "ONESTRAT"</span></span>
<span><span class="co">##  $ strwtvar   : chr "strwt"</span></span>
<span><span class="co">##  $ plotsampcnt: NULL</span></span>
<span><span class="co">##  $ getprop    : logi TRUE</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    2 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ESTN_UNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "ACRES"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="pop4">Population Example 4: Population data setup for plot-level data,
with percent by domain as separate columns<a class="anchor" aria-label="anchor" href="#pop4"></a>
</h4>
<p><em>These population data are used in: <a href="#ex9">Example
9</a>.</em></p>
<details><summary>
View Example
</summary><p>Here, we set up population data for both times, and population data
for transitions.</p>
<p>Let’s first take a look at the first six rows of the example dataset,
including 133 plot records.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        plot_id Change Tree11 Shrub11 OtherVegetation11 Barren11 Impervious11</span></span>
<span><span class="co">## 1 5.540684e+12      0      0       0                 0        0            0</span></span>
<span><span class="co">## 2 5.540696e+12      0      0       0                60        0           40</span></span>
<span><span class="co">## 3 5.540708e+12      0      0      20                60       20            0</span></span>
<span><span class="co">## 4 5.540720e+12      0      0       0                 0        0            0</span></span>
<span><span class="co">## 5 5.540732e+12      0      0       0                 0        0            0</span></span>
<span><span class="co">## 6 5.540744e+12      0      0       0                 0        0            0</span></span>
<span><span class="co">##   Water11 Tree14 Shrub14 OtherVegetation14 Barren14 Impervious14 Water14</span></span>
<span><span class="co">## 1     100      0       0                 0        0            0     100</span></span>
<span><span class="co">## 2       0      0       0                60        0           40       0</span></span>
<span><span class="co">## 3       0      0      20                60       20            0       0</span></span>
<span><span class="co">## 4     100      0       0                 0      100            0       0</span></span>
<span><span class="co">## 5     100      0       0                 0      100            0       0</span></span>
<span><span class="co">## 6     100      0       0                 0        0            0     100</span></span>
<span><span class="co">##   Veg.NonVeg</span></span>
<span><span class="co">## 1          0</span></span>
<span><span class="co">## 2          0</span></span>
<span><span class="co">## 3          0</span></span>
<span><span class="co">## 4          0</span></span>
<span><span class="co">## 5          0</span></span>
<span><span class="co">## 6          0</span></span></code></pre>
</details><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] 133  15</span></span></code></pre>
</details><p>Then, rename columns for Time 1 cover (names11) and Time 2 cover
(names14)</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">names11</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">endsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span>, <span class="st">"11"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">names14</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html" class="external-link">endsWith</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">icepctcover</span><span class="op">)</span>, <span class="st">"14"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">names11</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "Tree11"            "Shrub11"           "OtherVegetation11"</span></span>
<span><span class="co">## [4] "Barren11"          "Impervious11"      "Water11"</span></span></code></pre>
</details><div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">names14</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "Tree14"            "Shrub14"           "OtherVegetation14"</span></span>
<span><span class="co">## [4] "Barren14"          "Impervious14"      "Water14"</span></span></code></pre>
</details><p><strong>Population Data for Time 1 (2011)</strong></p>
<p>Now, we need to create a new set of population data define the names
of the columns to estimate (i.e., names11). Remember to add unitarea if
you want to generate estimates of area.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpctpop11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pltpct <span class="op">=</span> <span class="va">icepctcover</span>, </span>
<span>                       pltpctvars <span class="op">=</span> <span class="va">names11</span>,</span>
<span>                       unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Let’s look at the contents of the output list.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">PBpctpop11</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 19</span></span>
<span><span class="co">##  $ PBx        :Classes 'data.table' and 'data.frame':    798 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ pltassgnx  :Classes 'data.table' and 'data.frame':    133 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ plotid     : chr "plot_id"</span></span>
<span><span class="co">##  $ pntid      : NULL</span></span>
<span><span class="co">##  $ pltassgnid : chr "plot_id"</span></span>
<span><span class="co">##  $ sumunits   : logi FALSE</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ strata     : logi FALSE</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ stratalut  :Classes 'data.table' and 'data.frame':    1 obs. of  5 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "ONEUNIT" "ONESTRAT"</span></span>
<span><span class="co">##  $ strvar     : chr "ONESTRAT"</span></span>
<span><span class="co">##  $ strwtvar   : chr "strwt"</span></span>
<span><span class="co">##  $ plotsampcnt: NULL</span></span>
<span><span class="co">##  $ getprop    : logi FALSE</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "AREA"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span>
<span><span class="co">##  $ rowvar     : chr "variable"</span></span></code></pre>
</details><p><strong>Population Data for Time 2 (2014)</strong></p>
<p>For 2014, we need to create a new population data set with the
names14 columns before calculating estimates.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpctpop14</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pltpct <span class="op">=</span> <span class="va">icepctcover</span>, </span>
<span>                       pltpctvars <span class="op">=</span> <span class="va">names14</span>,</span>
<span>                       unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Population Data for Transitions</strong></p>
<p>Let’s also look at transitions. In the example which uses this
population data we will generate estimates of percent land cover change
from vegetated to non-vegetated for all land in Davis and Salt Lake
Counties, Utah. This transition was recorded in the initial dataset
(i.e., Veg.NonVeg). Again, we need to create a new population dataset
defining this column of interest.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpctpop.veg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pltpct <span class="op">=</span> <span class="va">icepctcover</span>, </span>
<span>                       pltpctvars <span class="op">=</span> <span class="st">"Veg.NonVeg"</span>,</span>
<span>                       unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span></span>
<span>                       <span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="section level4">
<h4 id="pop5">Population Example 5: Population data with post-stratification for
transition estimates<a class="anchor" aria-label="anchor" href="#pop5"></a>
</h4>
<p><em>These population data are used in <a href="#ex10">Example
10</a>.</em></p>
<details><summary>
View Example
</summary><p>Our final population dataset for this vignette adds
post-stratification for transition estimates.</p>
<p>Let’s add post-stratification to our transition estimates from Time 1
to Time 2. Again, we need to create a new population dataset with
information for post-stratification, including strata pixel counts and
plot-level strata assignments. This information is provided with
FIESTA’s external data.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Plot-level assignments</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iceplt</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        plot_id ESTN_UNIT STRATUMCD LON_PUBLIC LAT_PUBLIC</span></span>
<span><span class="co">## 1 5.540684e+12        11         2  -112.3625   40.96010</span></span>
<span><span class="co">## 2 5.540696e+12        11         2  -112.0733   41.14085</span></span>
<span><span class="co">## 3 5.540708e+12        11         2  -111.8916   41.00477</span></span>
<span><span class="co">## 4 5.540720e+12        11         2  -112.0735   40.96141</span></span>
<span><span class="co">## 5 5.540732e+12        11         2  -112.1912   41.00827</span></span>
<span><span class="co">## 6 5.540744e+12        11         2  -112.2082   40.85725</span></span></code></pre>
</details><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Strata weights by estimation unit</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">strlutfn</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ESTN_UNIT STRATUMCD P1POINTCNT</span></span>
<span><span class="co">## 1        11         2      26266</span></span>
<span><span class="co">## 2        35         1       9050</span></span>
<span><span class="co">## 3        35         2      24432</span></span></code></pre>
</details><p>Here we use the <code>strata_opts</code> parameter to calculate the
strata weights from the pixel count information in
<code>strlutfn</code></p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpopareaPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pntdat <span class="op">=</span> <span class="va">icepnt</span>, </span>
<span>                        pltassgn <span class="op">=</span> <span class="va">iceplt</span>, </span>
<span>                        pltassgnid <span class="op">=</span> <span class="st">"plot_id"</span>, </span>
<span>                        pntid <span class="op">=</span> <span class="st">"dot_cnt"</span>, </span>
<span>                        strata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        stratalut <span class="op">=</span> <span class="va">strlutfn</span>,</span>
<span>                        strvar <span class="op">=</span> <span class="st">"STRATUMCD"</span>,</span>
<span>                        strata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>getwt<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>                                           getwtvar<span class="op">=</span><span class="st">"P1POINTCNT"</span><span class="op">)</span>,</span>
<span>                        unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Let’s look at the contents of the output list.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">PBpopareaPS</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 18</span></span>
<span><span class="co">##  $ PBx        :Classes 'data.table' and 'data.frame':    1305 obs. of  11 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "plot_id" "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnx  :Classes 'data.table' and 'data.frame':    133 obs. of  3 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ plotid     : chr "plot_id"</span></span>
<span><span class="co">##  $ pntid      : chr "dot_cnt"</span></span>
<span><span class="co">##  $ pltassgnid : chr "plot_id"</span></span>
<span><span class="co">##  $ sumunits   : logi FALSE</span></span>
<span><span class="co">##  $ unitvar    : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ unitvars   : chr "ONEUNIT"</span></span>
<span><span class="co">##  $ strata     : logi TRUE</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ stratalut  :Classes 'data.table' and 'data.frame':    2 obs. of  6 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr [1:2] "ONEUNIT" "STRATUMCD"</span></span>
<span><span class="co">##  $ strvar     : chr "STRATUMCD"</span></span>
<span><span class="co">##  $ strwtvar   : chr "strwt"</span></span>
<span><span class="co">##  $ plotsampcnt: NULL</span></span>
<span><span class="co">##  $ getprop    : logi TRUE</span></span>
<span><span class="co">##  $ unitarea   :Classes 'data.table' and 'data.frame':    1 obs. of  2 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "ONEUNIT"</span></span>
<span><span class="co">##  $ areavar    : chr "AREA"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span></code></pre>
</details><p>And look more closely at the resulting stratalut.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpopareaPS</span><span class="op">$</span><span class="va">stratalut</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## Key: &lt;ONEUNIT, STRATUMCD&gt;</span></span>
<span><span class="co">##    ONEUNIT STRATUMCD P1POINTCNT n.total n.strata     strwt</span></span>
<span><span class="co">##     &lt;fctr&gt;    &lt;char&gt;      &lt;num&gt;   &lt;int&gt;    &lt;int&gt;     &lt;num&gt;</span></span>
<span><span class="co">## 1:       1         1       9050     133       18 0.1514695</span></span>
<span><span class="co">## 2:       1         2      50698     133      115 0.8485305</span></span></code></pre>
</details><p>Now, of course we can make the same population dataset without
strata. We do so below.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpoparea_nonPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPBpop.html">modPBpop</a></span><span class="op">(</span>pntdat <span class="op">=</span> <span class="va">icepnt</span>, </span>
<span>                        pltassgn <span class="op">=</span> <span class="va">iceplt</span>, </span>
<span>                        pltassgnid <span class="op">=</span> <span class="st">"plot_id"</span>, </span>
<span>                        pntid <span class="op">=</span> <span class="st">"dot_cnt"</span>, </span>
<span>                        strata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                        unitarea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">unitarea</span><span class="op">$</span><span class="va">ACRES</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
</div>
<div class="section level3">
<h3 id="modPB">
<code>modPB</code><a class="anchor" aria-label="anchor" href="#modPB"></a>
</h3>
<div class="section level4">
<h4 id="ex1">Example 1: Point-level data - Totals<a class="anchor" aria-label="anchor" href="#ex1"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at estimating the percent land cover at Time
1 (2011) and land cover at Time 2 (2014) for all land in Davis and Salt
Lake Counties, Utah. We will then compare the net change from Time 1 and
Time 2. We use population data from <a href="#pop1">Population Example
1</a>.</p>
<p>We first estimate the percent land cover at Time 1 (2011) for all
land in Davis and Salt Lake Counties, Utah. We will add a lookup table
for the rows to get row names. Adding row.add0=TRUE in table_opts list
assures that all categories in rowlut are included in the result. We can
also add a pretty name to the output names.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpopdat</span>, </span>
<span>                rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>, </span>
<span>                                  row.add0 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the structure of this output with <code>str</code>.
Note that again <code>FIESTA</code> outputs a list.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover1</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ est:'data.frame': 8 obs. of  3 variables:</span></span>
<span><span class="co">##   ..$ Land Cover (2011)     : chr [1:8] "Tree" "Shrub" "OtherVegetation" "Barren" ...</span></span>
<span><span class="co">##   ..$ Estimate              : chr [1:8] "17.6" "11.5" "24.9" "11.8" ...</span></span>
<span><span class="co">##   ..$ Percent Sampling Error: chr [1:8] "14.36" "19.6" "11.72" "19.53" ...</span></span>
<span><span class="co">##  $ raw:List of 8</span></span>
<span><span class="co">##   ..$ unit_totest:'data.frame':  1 obs. of  15 variables:</span></span>
<span><span class="co">##   ..$ unit_rowest:'data.frame':  7 obs. of  17 variables:</span></span>
<span><span class="co">##   ..$ module     : chr "PB"</span></span>
<span><span class="co">##   ..$ esttype    : chr "AREA"</span></span>
<span><span class="co">##   ..$ PBmethod   : chr "HT"</span></span>
<span><span class="co">##   ..$ strtype    : chr "POST"</span></span>
<span><span class="co">##   ..$ rowvar     : chr "cover_1_nm"</span></span>
<span><span class="co">##   ..$ pltdom.row :Classes 'data.table' and 'data.frame': 233 obs. of  7 variables:</span></span>
<span><span class="co">##   .. ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   .. ..- attr(*, "sorted")= chr "plot_id"</span></span></code></pre>
</details><p>…and the estimates.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover1</span><span class="op">$</span><span class="va">est</span>, max.level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## 'data.frame':    8 obs. of  3 variables:</span></span>
<span><span class="co">##  $ Land Cover (2011)     : chr  "Tree" "Shrub" "OtherVegetation" "Barren" ...</span></span>
<span><span class="co">##  $ Estimate              : chr  "17.6" "11.5" "24.9" "11.8" ...</span></span>
<span><span class="co">##  $ Percent Sampling Error: chr  "14.36" "19.6" "11.72" "19.53" ...</span></span></code></pre>
</details><p>The <code>raw</code> list shows more details of the estimates for row
totals. See <code><a href="../reference/modPB.html">help(modPB)</a></code> for variable descriptions.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Land Cover (2011)        phat     phat.var NBRPNTS cover_1        est</span></span>
<span><span class="co">## 1       1              Tree 0.176106934 6.395688e-04     166     110 17.6106934</span></span>
<span><span class="co">## 2       1             Shrub 0.115288221 5.104315e-04     122     130 11.5288221</span></span>
<span><span class="co">## 3       1   OtherVegetation 0.248955723 8.518918e-04     426     140 24.8955723</span></span>
<span><span class="co">## 4       1            Barren 0.117794486 5.292122e-04     233     210 11.7794486</span></span>
<span><span class="co">## 5       1        Impervious 0.107602339 4.350856e-04     124     220 10.7602339</span></span>
<span><span class="co">## 6       1             Water 0.231244779 1.280138e-03     232     310 23.1244779</span></span>
<span><span class="co">## 7       1   Uninterpretable 0.003007519 9.045169e-06       2     999  0.3007519</span></span>
<span><span class="co">##       est.var    est.se    est.cv       pse  CI99left CI99right  CI95left</span></span>
<span><span class="co">## 1  6.39568847 2.5289698 0.1436042  14.36042 11.096499 24.124888 12.654004</span></span>
<span><span class="co">## 2  5.10431543 2.2592732 0.1959674  19.59674  5.709320 17.348324  7.100728</span></span>
<span><span class="co">## 3  8.51891761 2.9187185 0.1172385  11.72385 17.377452 32.413693 19.174989</span></span>
<span><span class="co">## 4  5.29212198 2.3004613 0.1952945  19.52945  5.853853 17.705044  7.270627</span></span>
<span><span class="co">## 5  4.35085587 2.0858705 0.1938499  19.38499  5.387387 16.133080  6.672003</span></span>
<span><span class="co">## 6 12.80138483 3.5779023 0.1547236  15.47236 13.908412 32.340543 16.111918</span></span>
<span><span class="co">## 7  0.09045169 0.3007519 1.0000000 100.00000  0.000000  1.075437  0.000000</span></span>
<span><span class="co">##    CI95right     CI68left CI68right</span></span>
<span><span class="co">## 1 22.5673832 15.095739403 20.125647</span></span>
<span><span class="co">## 2 15.9569162  9.282070002 13.775574</span></span>
<span><span class="co">## 3 30.6161554 21.993029656 27.798115</span></span>
<span><span class="co">## 4 16.2882698  9.491736793 14.067160</span></span>
<span><span class="co">## 5 14.8484650  8.685923525 12.834544</span></span>
<span><span class="co">## 6 30.1370375 19.566404719 26.682551</span></span>
<span><span class="co">## 7  0.8902147  0.001666802  0.599837</span></span></code></pre>
</details><p>We can also look at the domain-level data used for generating the
estimates, with proportion of points by category.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cover1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">pltdom.row</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## Key: &lt;plot_id&gt;</span></span>
<span><span class="co">##    ONEUNIT ONESTRAT        plot_id      cover_1_nm nbrpts.pltdom PtsPerPlot</span></span>
<span><span class="co">##     &lt;fctr&gt;    &lt;num&gt;         &lt;char&gt;          &lt;char&gt;         &lt;int&gt;      &lt;int&gt;</span></span>
<span><span class="co">## 1:       1        1 11940039010690           Water             5          5</span></span>
<span><span class="co">## 2:       1        1 11940051010690 OtherVegetation             3          5</span></span>
<span><span class="co">## 3:       1        1 11940051010690           Shrub             1          5</span></span>
<span><span class="co">## 4:       1        1 11940051010690          Barren             1          5</span></span>
<span><span class="co">## 5:       1        1 11940063010690           Water             5          5</span></span>
<span><span class="co">## 6:       1        1 11940075010690 OtherVegetation             2          5</span></span>
<span><span class="co">##    p.pltdom</span></span>
<span><span class="co">##       &lt;num&gt;</span></span>
<span><span class="co">## 1:      1.0</span></span>
<span><span class="co">## 2:      0.6</span></span>
<span><span class="co">## 3:      0.2</span></span>
<span><span class="co">## 4:      0.2</span></span>
<span><span class="co">## 5:      1.0</span></span>
<span><span class="co">## 6:      0.4</span></span></code></pre>
</details><p>Note: An Uninterpretable class is included in the previous table. To
remove, add nonsamp.pntfilter. Let’s return a list of titles that are
generated automatically.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpopdat</span>,</span>
<span>                    rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                    nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>, <span class="co"># added filter </span></span>
<span>                    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                    title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span><span class="op">)</span>,</span>
<span>                    returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1              Tree     17.9                  14.43</span></span>
<span><span class="co">## 2             Shrub     11.5                   19.6</span></span>
<span><span class="co">## 3   OtherVegetation     24.9                  11.72</span></span>
<span><span class="co">## 4            Barren     11.8                  19.53</span></span>
<span><span class="co">## 5        Impervious     10.8                  19.38</span></span>
<span><span class="co">## 6             Water     23.1                  15.47</span></span>
<span><span class="co">## 7             Total    Total                  Total</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex2">Example 2: Point-level data - Totals - Time 1<a class="anchor" aria-label="anchor" href="#ex2"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we estimate area, in acres, of land cover at Time 1
(2011) for all land in Davis and Salt Lake Counties, Utah. Note: since
we are adding area, we require a new set of population data to include
area information. This new population data was generated in <a href="#pop2">Population Example 2</a></p>
<p>Now, let’s get the estimates, adding <code>tabtype = "AREA"</code>,
to indicate we want area estimates.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                     tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                     rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                     nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                     table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                     title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover1.area</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ est:'data.frame': 7 obs. of  3 variables:</span></span>
<span><span class="co">##  $ raw:List of 9</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.area</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1              Tree 165240.8                  14.43</span></span>
<span><span class="co">## 2             Shrub 106358.3                   19.6</span></span>
<span><span class="co">## 3   OtherVegetation 229672.4                  11.72</span></span>
<span><span class="co">## 4            Barren 108670.5                  19.53</span></span>
<span><span class="co">## 5        Impervious  99267.8                  19.38</span></span>
<span><span class="co">## 6             Water 213333.3                  15.47</span></span>
<span><span class="co">## 7             Total    Total                  Total</span></span></code></pre>
</details><p>We can now use the <code>PBpoparea</code> set of population data to
run percent estimates as well. Let’s save the data to the outfolder and
return titles as well. Note: Saving data adds a new folder in outfolder
that includes rawdata files.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1.pct</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                tabtype <span class="op">=</span> <span class="st">"PCT"</span>, </span>
<span>                rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span><span class="op">)</span>,</span>
<span>                returntitle <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                savedata <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                savedata_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>outfolder <span class="op">=</span> <span class="va">outfolder</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list. The output now
includes <code>titlelst</code>, a list of associated titles.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover1.pct</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 3</span></span>
<span><span class="co">##  $ est     :'data.frame':    7 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 9</span></span></code></pre>
</details><p>The estimates:</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.pct</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1              Tree     17.9                  14.43</span></span>
<span><span class="co">## 2             Shrub     11.5                   19.6</span></span>
<span><span class="co">## 3   OtherVegetation     24.9                  11.72</span></span>
<span><span class="co">## 4            Barren     11.8                  19.53</span></span>
<span><span class="co">## 5        Impervious     10.8                  19.38</span></span>
<span><span class="co">## 6             Water     23.1                  15.47</span></span>
<span><span class="co">## 7             Total    Total                  Total</span></span></code></pre>
</details><p>And titles:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.pct</span><span class="op">$</span><span class="va">titlelst</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, and percent sampling error all lands by land cover (2011)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_allland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_allland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_allland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Land Cover (2011)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, all lands by land cover (2011)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex3">Example 3: Point-level data - Totals - Time 2<a class="anchor" aria-label="anchor" href="#ex3"></a>
</h4>
<details><summary>
View Example
</summary><p>Now, let’s generate estimates of percent land cover at Time 2 (2014)
for all land in Davis and Salt Lake Counties, Utah. Then we can compare
the estimates. We can use the same population data for this analysis.
This example uses population data from <a href="#pop2">Population
Example 2</a>.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                rowvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2014)"</span><span class="op">)</span>,</span>
<span>                    returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list. The output now
includes titlelst, a list of associated titles.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover2</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 3</span></span>
<span><span class="co">##  $ est     :'data.frame':    7 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 9</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover2</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2014) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1              Tree     17.8                  14.53</span></span>
<span><span class="co">## 2             Shrub     10.8                  19.96</span></span>
<span><span class="co">## 3   OtherVegetation     25.7                  11.58</span></span>
<span><span class="co">## 4            Barren     16.9                  16.36</span></span>
<span><span class="co">## 5        Impervious     11.5                  18.44</span></span>
<span><span class="co">## 6             Water     17.2                  18.71</span></span>
<span><span class="co">## 7             Total    Total                  Total</span></span></code></pre>
</details><p>Now we can compare the estimates from Time 2 with estimates from Time
1 and look at net change. We will use the raw data with numeric
values.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">netchg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Estimate1 <span class="op">=</span> <span class="va">cover1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">$</span><span class="va">est</span>, </span>
<span>                     Estimate2 <span class="op">=</span> <span class="va">cover2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">$</span><span class="va">est</span>, </span>
<span>                     NetChange.1to2 <span class="op">=</span> <span class="va">cover1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">$</span><span class="va">est</span> <span class="op">-</span> <span class="va">cover2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">$</span><span class="va">est</span><span class="op">)</span></span>
<span><span class="va">netchg</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Estimate1 Estimate2 NetChange.1to2</span></span>
<span><span class="co">## 1  17.91145  17.81119      0.1002506</span></span>
<span><span class="co">## 2  11.52882  10.81036      0.7184628</span></span>
<span><span class="co">## 3  24.89557  25.74770     -0.8521303</span></span>
<span><span class="co">## 4  11.77945  16.89223     -5.1127820</span></span>
<span><span class="co">## 5  10.76023  11.49541     -0.7351713</span></span>
<span><span class="co">## 6  23.12448  17.24311      5.8813701</span></span></code></pre>
</details><p>Now, let’s create a barplot to compare net change. First, we need to
set up a data frame with estimates and standard errors.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"est"</span>, <span class="st">"est.se"</span><span class="op">)</span></span>
<span><span class="va">tab1</span> <span class="op">&lt;-</span> <span class="va">cover1</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cover_1"</span>, <span class="va">cover1</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.rowvar</span>, <span class="va">tabvars</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tabvars</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">tabvars</span>, <span class="st">".1"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tab2</span> <span class="op">&lt;-</span> <span class="va">cover2</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cover_2"</span>, <span class="va">cover2</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.rowvar</span>, <span class="va">tabvars</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/setattr.html" class="external-link">setnames</a></span><span class="op">(</span><span class="va">tab2</span>, <span class="va">tabvars</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">tabvars</span>, <span class="st">".2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tab2</span>, by.x<span class="op">=</span><span class="st">"cover_1"</span>, by.y<span class="op">=</span><span class="st">"cover_2"</span><span class="op">)</span></span>
<span><span class="va">tabx</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   cover_1 Land Cover (2011)    est.1 est.se.1 Land Cover (2014)    est.2</span></span>
<span><span class="co">## 1     110              Tree 17.91145 2.584435              Tree 17.81119</span></span>
<span><span class="co">## 2     130             Shrub 11.52882 2.259273             Shrub 10.81036</span></span>
<span><span class="co">## 3     140   OtherVegetation 24.89557 2.918718   OtherVegetation 25.74770</span></span>
<span><span class="co">## 4     210            Barren 11.77945 2.300461            Barren 16.89223</span></span>
<span><span class="co">## 5     220        Impervious 10.76023 2.085871        Impervious 11.49541</span></span>
<span><span class="co">## 6     310             Water 23.12448 3.577902             Water 17.24311</span></span>
<span><span class="co">##   est.se.2</span></span>
<span><span class="co">## 1 2.587722</span></span>
<span><span class="co">## 2 2.158107</span></span>
<span><span class="co">## 3 2.982247</span></span>
<span><span class="co">## 4 2.763902</span></span>
<span><span class="co">## 5 2.119935</span></span>
<span><span class="co">## 6 3.225573</span></span></code></pre>
</details><p>Next, the barplot.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sevar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabx</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"est.se"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabx</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">yvar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabx</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"est."</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabx</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tabx</span><span class="op">)</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">sevar</span><span class="op">]</span></span>
<span><span class="va">xvar</span> <span class="op">&lt;-</span> <span class="va">cover1</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.rowvar</span></span>
<span></span>
<span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span><span class="va">tabx</span>, </span>
<span>           yvar <span class="op">=</span> <span class="va">yvar</span>, </span>
<span>           xvar <span class="op">=</span> <span class="va">xvar</span>,  </span>
<span>           errbars <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>           sevar <span class="op">=</span> <span class="va">sevar</span>, </span>
<span>           ylabel <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>           addlegend <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>           args.legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topleft"</span>, </span>
<span>                              bty <span class="op">=</span> <span class="st">"n"</span>, </span>
<span>                              cex <span class="op">=</span> <span class="fl">.8</span>, </span>
<span>                              legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2011"</span>, <span class="st">"2014"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substr</a></span><span class="op">(</span><span class="va">cover1</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.row</span>,</span>
<span>                         <span class="fl">1</span>,</span>
<span>                         <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">cover1</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.row</span><span class="op">)</span><span class="op">-</span><span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-54-1.png" width="700"></p>
</details></details>
</div>
<div class="section level4">
<h4 id="ex4">Example 4: EPoint-level data - Totals - Agent of Change<a class="anchor" aria-label="anchor" href="#ex4"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we generate estimates of percent change by agent in
Davis and Salt Lake Counties, Utah. Here, we use the same population
data. We also add the lookup table with agent of change code names. This
example uses population data from <a href="#pop2">Population Example
2</a>.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span><span class="op">)</span>, </span>
<span>                title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Agent of Change"</span><span class="op">)</span>,</span>
<span>                    returntitle<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Let’s again look at the contents of the output list.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">chg_ag</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 3</span></span>
<span><span class="co">##  $ est     :'data.frame':    6 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 9</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">chg_ag</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                     No Change       91                   2.49</span></span>
<span><span class="co">## 2                   Development      3.9                  40.78</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation      0.1                  68.17</span></span>
<span><span class="co">## 4           Stress or Mortality      0.1                    100</span></span>
<span><span class="co">## 5               Expected Change        5                  34.25</span></span>
<span><span class="co">## 6                         Total    Total                  Total</span></span></code></pre>
</details><p>Now, let’s get area estimates. Notice, we can change the resulting
area units to metric units (i.e., hectares).</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                    tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                    rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                    table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span>, metric<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                    title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Agent of Change"</span><span class="op">)</span>,</span>
<span>                        returntitle<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Again, we can look at the contents of the output list.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">chg_ag.area</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 3</span></span>
<span><span class="co">##  $ est     :'data.frame':    6 obs. of  3 variables:</span></span>
<span><span class="co">##  $ titlelst:List of 9</span></span>
<span><span class="co">##  $ raw     :List of 9</span></span></code></pre>
</details><p>And the estimates:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">chg_ag.area</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                     No Change   339593                   2.49</span></span>
<span><span class="co">## 2                   Development  14409.6                  40.78</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation      499                  68.17</span></span>
<span><span class="co">## 4           Stress or Mortality    187.1                    100</span></span>
<span><span class="co">## 5               Expected Change  18651.4                  34.25</span></span>
<span><span class="co">## 6                         Total    Total                  Total</span></span></code></pre>
</details><p>The resulting area units are identified in the raw data.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag.area</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">areaunits</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "hectares"</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex5">Example 5: Point-level data - Totals - Agent of Change -
Filters<a class="anchor" aria-label="anchor" href="#ex5"></a>
</h4>
<details><summary>
View Example
</summary><p>We can also apply filters to subset the resulting table. This filter
subsets the plots that had observed change. Filters do not affect the
population data, thus, we will continue using the same
<code>PBpoparea</code> dataset from <a href="#pop2">Population Example
2</a>.</p>
<p>Here, we generate estimates of percent land with observed change by
agent of change in Davis and Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add a landarea filter to subset dataset to only plots with observed change.</span></span>
<span><span class="va">landarea.filter</span> <span class="op">&lt;-</span> <span class="st">"change_1_2 == 1"</span></span>
<span></span>
<span><span class="va">chg_ag.plts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                     rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                     table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span><span class="op">)</span>, </span>
<span>                     title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Agent of Change"</span><span class="op">)</span>,</span>
<span>                         landarea <span class="op">=</span> <span class="st">"CHANGE"</span>, </span>
<span>                         landarea.filter <span class="op">=</span> <span class="va">landarea.filter</span>, </span>
<span>                         returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The resulting estimates…</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">chg_ag.plts</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                     No Change      6.3                   29.8</span></span>
<span><span class="co">## 2                   Development      3.9                  40.78</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation      0.1                  68.17</span></span>
<span><span class="co">## 4           Stress or Mortality      0.1                    100</span></span>
<span><span class="co">## 5               Expected Change      1.7                  50.46</span></span>
<span><span class="co">## 6                         Total    Total                  Total</span></span></code></pre>
</details><p>Notice, the estimate titles reflect this filter.</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">chg_ag.plts</span><span class="op">$</span><span class="va">titlelst</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.estpse</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, and percent sampling error land with observed change by agent of change"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "photo_nratio_pct_chg_ag_2_nm_change"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "photo_nratio_pct_chg_ag_2_nm_change_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "photo_nratio_pct_chg_ag_2_nm_change_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Agent of Change"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, land with observed change by agent of change"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details><p>Now, let’s add a pntfilter to only look at points that changed.</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Percent land changed by agent of change in Davis and Salt Lake Counties, UT</span></span>
<span><span class="va">pntfilter</span> <span class="op">&lt;-</span> <span class="st">"chg_ag_2 &gt; 0"</span></span>
<span><span class="va">chg_ag.pnts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                     rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                     table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span><span class="op">)</span>, </span>
<span>                     title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Agent of Change"</span>, </span>
<span>                                       title.filter <span class="op">=</span> <span class="st">"observed changed"</span><span class="op">)</span>,</span>
<span>                         pntfilter <span class="op">=</span> <span class="va">pntfilter</span>, </span>
<span>                         returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>We can now compare the estimates and percent sampling errors.</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All land</span></span>
<span><span class="va">chg_ag</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.estpse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "Estimated percent, in acres, and percent sampling error all lands by agent of change"</span></span></code></pre>
</details><div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                     No Change       91                   2.49</span></span>
<span><span class="co">## 2                   Development      3.9                  40.78</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation      0.1                  68.17</span></span>
<span><span class="co">## 4           Stress or Mortality      0.1                    100</span></span>
<span><span class="co">## 5               Expected Change        5                  34.25</span></span>
<span><span class="co">## 6                         Total    Total                  Total</span></span></code></pre>
</details><div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Land with observed change</span></span>
<span><span class="va">chg_ag.plts</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.estpse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "Estimated percent, in acres, and percent sampling error land with observed change by agent of change"</span></span></code></pre>
</details><div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag.plts</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                     No Change      6.3                   29.8</span></span>
<span><span class="co">## 2                   Development      3.9                  40.78</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation      0.1                  68.17</span></span>
<span><span class="co">## 4           Stress or Mortality      0.1                    100</span></span>
<span><span class="co">## 5               Expected Change      1.7                  50.46</span></span>
<span><span class="co">## 6                         Total    Total                  Total</span></span></code></pre>
</details><div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Estimated change</span></span>
<span><span class="va">chg_ag.pnts</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.estpse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] "Estimated percent, in acres, and percent sampling error all lands by agent of change (observed changed)"</span></span></code></pre>
</details><div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag.pnts</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 Agent of Change Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                   Development      5.2                  36.93</span></span>
<span><span class="co">## 2 Removal or Loss of Vegetation      1.5                  68.82</span></span>
<span><span class="co">## 3           Stress or Mortality      0.8                    100</span></span>
<span><span class="co">## 4               Expected Change      7.5                  30.53</span></span>
<span><span class="co">## 5                         Total    Total                  Total</span></span></code></pre>
</details><p>Let’s create a barplot of estimated change by agent with the
<code><a href="../reference/datBarplot.html">datBarplot()</a></code> function from <code>FIESTA</code>.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span><span class="va">chg_ag.pnts</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>           xvar <span class="op">=</span> <span class="st">"Agent of Change"</span>, </span>
<span>           yvar <span class="op">=</span> <span class="st">"est"</span>, </span>
<span>           errbars <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>           sevar <span class="op">=</span> <span class="st">"est.se"</span>, </span>
<span>           ylab <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>           main <span class="op">=</span> <span class="va">chg_ag.pnts</span><span class="op">$</span><span class="va">titlelst</span><span class="op">$</span><span class="va">title.row</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-67-1.png" width="700"></p>
</details><p>Now, let’s look at at percent of land changed by agent of change and
land cover (2011) in Davis and Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                       rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                       colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                       table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span>,</span>
<span>                                         collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                       title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Change agent"</span>,</span>
<span>                                         title.colvar <span class="op">=</span> <span class="st">"Land cover (2011)"</span><span class="op">)</span>, </span>
<span>                       returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The resulting estimates…</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 17.8  10.8            22.4   12.7       10.4</span></span>
<span><span class="co">## 2                   Development   --    --             1.3    1.5        1.1</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation   --    --              --    0.1         --</span></span>
<span><span class="co">## 4           Stress or Mortality  0.1    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change   --     0               2    2.6         --</span></span>
<span><span class="co">## 6                         Total 17.8  10.8            25.7   16.9       11.5</span></span>
<span><span class="co">##   Water Total</span></span>
<span><span class="co">## 1  16.9    91</span></span>
<span><span class="co">## 2    --   3.9</span></span>
<span><span class="co">## 3    --   0.1</span></span>
<span><span class="co">## 4    --   0.1</span></span>
<span><span class="co">## 5   0.4     5</span></span>
<span><span class="co">## 6  17.2   100</span></span></code></pre>
</details><p>And percent sampling error…</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent  Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 14.51 20.03           12.47  19.42         20</span></span>
<span><span class="co">## 2                   Development    --    --           46.88   45.1      52.66</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation    --    --              --  68.17         --</span></span>
<span><span class="co">## 4           Stress or Mortality   100    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change    --   100           54.25  50.69         --</span></span>
<span><span class="co">## 6                         Total 14.53 19.96           11.58  16.36      18.44</span></span>
<span><span class="co">##   Water Total</span></span>
<span><span class="co">## 1 19.16  2.49</span></span>
<span><span class="co">## 2    -- 40.78</span></span>
<span><span class="co">## 3    -- 68.17</span></span>
<span><span class="co">## 4    --   100</span></span>
<span><span class="co">## 5 62.79 34.25</span></span>
<span><span class="co">## 6 18.71     0</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex6">Example 6: Point-level data - By Estimation Unit<a class="anchor" aria-label="anchor" href="#ex6"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we generate estimates by each estimation unit (i.e,
County). We have created the necessary population data with a call to
<code><a href="../reference/modPBpop.html">modPBpop()</a></code> in <a href="#pop3">Population Example 3</a>.</p>
<p>Since we have taken care of our population data, let’s start with
area, in acres, of land cover at Time 1 (2011) by County for all land in
Davis and Salt Lake Counties, UT</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1.unit.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpopunit</span>, </span>
<span>                          tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                          rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                          nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                          table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut<span class="op">=</span><span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                          title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar<span class="op">=</span><span class="st">"Land Cover (2011)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.unit.area</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)       11       35    Total</span></span>
<span><span class="co">## 1              Tree  32348.7 129952.9 165240.8</span></span>
<span><span class="co">## 2             Shrub  12070.4  91757.8 106358.3</span></span>
<span><span class="co">## 3   OtherVegetation  96885.2 132489.3 229672.4</span></span>
<span><span class="co">## 4            Barren    55202  54010.3 108670.5</span></span>
<span><span class="co">## 5        Impervious  13518.9  83551.8  99267.8</span></span>
<span><span class="co">## 6             Water 195540.8  25214.8 213333.3</span></span>
<span><span class="co">## 7             Total   405566   516977   922543</span></span></code></pre>
</details><div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Percent sampling error of estimate</span></span>
<span><span class="va">cover1.unit.area</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)    11    35 Total</span></span>
<span><span class="co">## 1              Tree 36.79 14.82 14.43</span></span>
<span><span class="co">## 2             Shrub 46.69 20.38  19.6</span></span>
<span><span class="co">## 3   OtherVegetation 20.53    14 11.72</span></span>
<span><span class="co">## 4            Barren 31.41 23.84 19.53</span></span>
<span><span class="co">## 5        Impervious 46.15 20.42 19.38</span></span>
<span><span class="co">## 6             Water 13.97 41.55 15.47</span></span>
<span><span class="co">## 7             Total     0     0     0</span></span></code></pre>
</details><p>If we set <code>sumunits = TRUE</code>, we can generate an estimate
of area by county and also sum these estimates to the population. Your
resulting estimate is for the entire population, but you can find
estimates by county in the raw data tables. Here, we can use the sample
population that was created by estimation unit (i.e., county).</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1.unitsum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpopunit</span>, </span>
<span>                        tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                        sumunits <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                        nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                        table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut<span class="op">=</span><span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                        title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar<span class="op">=</span><span class="st">"Land Cover (2011)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The resulting estimate is for the total population.</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.unitsum</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1              Tree 162301.7                  13.95</span></span>
<span><span class="co">## 2             Shrub 103828.2                  18.81</span></span>
<span><span class="co">## 3   OtherVegetation 229374.6                  11.86</span></span>
<span><span class="co">## 4            Barren 109212.3                  19.77</span></span>
<span><span class="co">## 5        Impervious  97070.7                  18.72</span></span>
<span><span class="co">## 6             Water 220755.5                  13.26</span></span>
<span><span class="co">## 7             Total   922543                      0</span></span></code></pre>
</details><p>And we can look at the structure of the raw output.</p>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover1.unitsum</span><span class="op">$</span><span class="va">raw</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 11</span></span>
<span><span class="co">##  $ unit_totest:'data.frame': 2 obs. of  17 variables:</span></span>
<span><span class="co">##  $ totest     :'data.frame': 1 obs. of  13 variables:</span></span>
<span><span class="co">##  $ unit_rowest:'data.frame': 12 obs. of  19 variables:</span></span>
<span><span class="co">##  $ rowest     :'data.frame': 6 obs. of  13 variables:</span></span>
<span><span class="co">##  $ module     : chr "PB"</span></span>
<span><span class="co">##  $ esttype    : chr "AREA"</span></span>
<span><span class="co">##  $ PBmethod   : chr "HT"</span></span>
<span><span class="co">##  $ strtype    : chr "POST"</span></span>
<span><span class="co">##  $ rowvar     : chr "cover_1_nm"</span></span>
<span><span class="co">##  $ pltdom.row :Classes 'data.table' and 'data.frame':    232 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ areaunits  : chr "acres"</span></span></code></pre>
</details><p>Now, let’s look at the raw data output. There are data frames by unit
(unit_totest; unit_rowest) and two additional data frames for the total
population (totest; rowest).</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.unitsum</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##    ESTN_UNIT Land Cover (2011)       phat     phat.var NBRPNTS cover_1  ACRES</span></span>
<span><span class="co">## 1         11              Tree 0.07976190 0.0008612400      65     110 405566</span></span>
<span><span class="co">## 2         11             Shrub 0.02976190 0.0001931303      11     130 405566</span></span>
<span><span class="co">## 3         11   OtherVegetation 0.23888889 0.0024050826     146     140 405566</span></span>
<span><span class="co">## 4         11            Barren 0.13611111 0.0018278219      63     210 405566</span></span>
<span><span class="co">## 5         11        Impervious 0.03333333 0.0002366522      20     220 405566</span></span>
<span><span class="co">## 6         11             Water 0.48214286 0.0045396568     135     310 405566</span></span>
<span><span class="co">## 7         35              Tree 0.25137085 0.0013873505     101     110 516977</span></span>
<span><span class="co">## 8         35             Shrub 0.17748918 0.0013087421     111     130 516977</span></span>
<span><span class="co">## 9         35   OtherVegetation 0.25627706 0.0012881673     280     140 516977</span></span>
<span><span class="co">## 10        35            Barren 0.10447330 0.0006200796     170     210 516977</span></span>
<span><span class="co">## 11        35        Impervious 0.16161616 0.0010895313     104     220 516977</span></span>
<span><span class="co">## 12        35             Water 0.04877345 0.0004106291      97     310 516977</span></span>
<span><span class="co">##    AREAUSED       est   est.var    est.se    est.cv      pse   CI99left</span></span>
<span><span class="co">## 1    405566  32348.72 141660003 11902.101 0.3679312 36.79312   1690.937</span></span>
<span><span class="co">## 2    405566  12070.42  31766799  5636.204 0.4669436 46.69436      0.000</span></span>
<span><span class="co">## 3    405566  96885.21 395597073 19889.622 0.2052906 20.52906  45652.939</span></span>
<span><span class="co">## 4    405566  55202.04 300647051 17339.177 0.3141039 31.41039  10539.279</span></span>
<span><span class="co">## 5    405566  13518.87  38925455  6239.027 0.4615052 46.15052      0.000</span></span>
<span><span class="co">## 6    405566 195540.75 746699907 27325.810 0.1397448 13.97448 125154.127</span></span>
<span><span class="co">## 7    516977 129952.95 370790531 19255.922 0.1481761 14.81761  80352.981</span></span>
<span><span class="co">## 8    516977  91757.82 349781255 18702.440 0.2038239 20.38239  43583.530</span></span>
<span><span class="co">## 9    516977 132489.34 344282312 18554.846 0.1400478 14.00478  84695.228</span></span>
<span><span class="co">## 10   516977  54010.30 165725723 12873.450 0.2383518 23.83518  20850.485</span></span>
<span><span class="co">## 11   516977  83551.84 291193820 17064.402 0.2042373 20.42373  39596.851</span></span>
<span><span class="co">## 12   516977  25214.75 109746874 10476.014 0.4154716 41.54716      0.000</span></span>
<span><span class="co">##    CI99right   CI95left CI95right   CI68left CI68right</span></span>
<span><span class="co">## 1   63006.50   9021.028  55676.41  20512.579  44184.85</span></span>
<span><span class="co">## 2   26588.32   1023.659  23117.17   6465.449  17675.38</span></span>
<span><span class="co">## 3  148117.48  57902.268 135868.15  77105.819 116664.60</span></span>
<span><span class="co">## 4   99864.80  21217.877  89186.20  37958.958  72445.12</span></span>
<span><span class="co">## 5   29589.53   1290.599  25747.13   7314.417  19723.32</span></span>
<span><span class="co">## 6  265927.37 141983.146 249098.35 168366.383 222715.12</span></span>
<span><span class="co">## 7  179552.92  92212.035 167693.86 110803.745 149102.15</span></span>
<span><span class="co">## 8  139932.12  55101.714 128413.93  73159.034 110356.61</span></span>
<span><span class="co">## 9  180283.46  96122.514 168856.17 114037.331 150941.36</span></span>
<span><span class="co">## 10  87170.11  28778.797  79241.79  41208.191  66812.40</span></span>
<span><span class="co">## 11 127506.83  50106.225 116997.45  66582.009 100521.67</span></span>
<span><span class="co">## 12  52199.18   4682.141  45747.36  14796.796  35632.71</span></span></code></pre>
</details><div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Estimate and percent sampling error of estimate</span></span>
<span><span class="va">cover1.unitsum</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">rowest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)       est   est.var AREAUSED   est.se    est.cv      pse</span></span>
<span><span class="co">## 1              Tree 162301.67 512450534   922543 22637.37 0.1394771 13.94771</span></span>
<span><span class="co">## 2             Shrub 103828.24 381548054   922543 19533.26 0.1881305 18.81305</span></span>
<span><span class="co">## 3   OtherVegetation 229374.55 739879386   922543 27200.72 0.1185865 11.85865</span></span>
<span><span class="co">## 4            Barren 109212.33 466372774   922543 21595.67 0.1977402 19.77402</span></span>
<span><span class="co">## 5        Impervious  97070.71 330119275   922543 18169.18 0.1871747 18.71747</span></span>
<span><span class="co">## 6             Water 220755.50 856446781   922543 29265.11 0.1325680 13.25680</span></span>
<span><span class="co">##    CI99left CI99right  CI95left CI95right  CI68left CI68right</span></span>
<span><span class="co">## 1 103991.66  220611.7 117933.23  206670.1 139789.75  184813.6</span></span>
<span><span class="co">## 2  53513.91  154142.6  65543.76  142112.7  84403.24  123253.2</span></span>
<span><span class="co">## 3 159310.13  299439.0 176062.12  282687.0 202324.58  256424.5</span></span>
<span><span class="co">## 4  53585.59  164839.1  66885.61  151539.1  87736.35  130688.3</span></span>
<span><span class="co">## 5  50269.99  143871.4  61459.76  132681.7  79002.22  115139.2</span></span>
<span><span class="co">## 6 145373.57  296137.4 163396.94  278114.1 191652.58  249858.4</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex7">Example 7: Point-level transition data (T1 Cover - T2 Cover)<a class="anchor" aria-label="anchor" href="#ex7"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at the transition data at the point level,
giving an estimate of what each category transitioned to. Let’s look at
a table of the percent land cover at Time 1 (2011) by percent land cover
at Time 2 (2014) for all and in Davis and Salt Lake Counties, Utah.
Here, we use the PBpoparea population dataset from <a href="#pop2">Population Example 2</a> as the population dataset.</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                  rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                  colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                  nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                  table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                    collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                    title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>                                      title.colvar <span class="op">=</span> <span class="st">"Land Cover (2014)"</span><span class="op">)</span>, </span>
<span>                      returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now, look at the estimates.</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 17.8    --             0.1      0          0    --  17.9</span></span>
<span><span class="co">## 2             Shrub   --  10.8             0.5    0.3         --    --  11.5</span></span>
<span><span class="co">## 3   OtherVegetation   --     0            23.1      1        0.4   0.4  24.9</span></span>
<span><span class="co">## 4            Barren   --    --             0.4     11        0.4    --  11.8</span></span>
<span><span class="co">## 5        Impervious   --    --              --      0       10.7    --  10.8</span></span>
<span><span class="co">## 6             Water   --    --             1.7    4.6         --  16.9  23.1</span></span>
<span><span class="co">## 7             Total 17.8  10.8            25.7   16.9       11.5  17.2   100</span></span></code></pre>
</details><p>… and percent standard error.</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)  Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 14.53    --             100    100        100    -- 14.43</span></span>
<span><span class="co">## 2             Shrub    -- 20.03             100    100         --    --  19.6</span></span>
<span><span class="co">## 3   OtherVegetation    --   100           12.02  44.98      71.17 62.79 11.72</span></span>
<span><span class="co">## 4            Barren    --    --           65.47  20.16      58.14    -- 19.53</span></span>
<span><span class="co">## 5        Impervious    --    --              --    100      19.41    -- 19.38</span></span>
<span><span class="co">## 6             Water    --    --           53.25  39.46         -- 19.16 15.47</span></span>
<span><span class="co">## 7             Total 14.53 19.96           11.58  16.36      18.44 18.71     0</span></span></code></pre>
</details><p>We can also look at the summed proportions for each transition (i.e,
row and column).</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cover12</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">pltdom.grp</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## Key: &lt;plot_id&gt;</span></span>
<span><span class="co">##    ONEUNIT ONESTRAT        plot_id      cover_1_nm      cover_2_nm</span></span>
<span><span class="co">##     &lt;fctr&gt;    &lt;num&gt;         &lt;char&gt;          &lt;char&gt;          &lt;char&gt;</span></span>
<span><span class="co">## 1:       1        1 11940039010690           Water           Water</span></span>
<span><span class="co">## 2:       1        1 11940051010690 OtherVegetation OtherVegetation</span></span>
<span><span class="co">## 3:       1        1 11940051010690           Shrub           Shrub</span></span>
<span><span class="co">## 4:       1        1 11940051010690          Barren          Barren</span></span>
<span><span class="co">## 5:       1        1 11940063010690           Water           Water</span></span>
<span><span class="co">## 6:       1        1 11940075010690 OtherVegetation OtherVegetation</span></span>
<span><span class="co">##    nbrpts.pltdom PtsPerPlot p.pltdom</span></span>
<span><span class="co">##            &lt;int&gt;      &lt;int&gt;    &lt;num&gt;</span></span>
<span><span class="co">## 1:             5          5      1.0</span></span>
<span><span class="co">## 2:             3          5      0.6</span></span>
<span><span class="co">## 3:             1          5      0.2</span></span>
<span><span class="co">## 4:             1          5      0.2</span></span>
<span><span class="co">## 5:             5          5      1.0</span></span>
<span><span class="co">## 6:             2          5      0.4</span></span></code></pre>
</details><p>… and the raw data estimates for each transition.</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cover12</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_grpest</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   ONEUNIT Land Cover (2011) Land Cover (2014)         phat     phat.var cover_2</span></span>
<span><span class="co">## 1       1              Tree              Tree 0.1781119465 6.696306e-04     110</span></span>
<span><span class="co">## 2       1              Tree   OtherVegetation 0.0005012531 2.512547e-07     140</span></span>
<span><span class="co">## 3       1              Tree            Barren 0.0001670844 2.791719e-08     210</span></span>
<span><span class="co">## 4       1              Tree        Impervious 0.0003341688 1.116688e-07     220</span></span>
<span><span class="co">## 5       1             Shrub             Shrub 0.1077694236 4.661765e-04     130</span></span>
<span><span class="co">## 6       1             Shrub   OtherVegetation 0.0048454470 2.347836e-05     140</span></span>
<span><span class="co">##   cover_1         est      est.var     est.se    est.cv       pse  CI99left</span></span>
<span><span class="co">## 1     110 17.81119465 6.6963058389 2.58772213 0.1452863  14.52863 11.145664</span></span>
<span><span class="co">## 2     110  0.05012531 0.0025125470 0.05012531 1.0000000 100.00000  0.000000</span></span>
<span><span class="co">## 3     110  0.01670844 0.0002791719 0.01670844 1.0000000 100.00000  0.000000</span></span>
<span><span class="co">## 4     110  0.03341688 0.0011166876 0.03341688 1.0000000 100.00000  0.000000</span></span>
<span><span class="co">## 5     130 10.77694236 4.6617645351 2.15911198 0.2003455  20.03455  5.215438</span></span>
<span><span class="co">## 6     130  0.48454470 0.2347835615 0.48454470 1.0000000 100.00000  0.000000</span></span>
<span><span class="co">##     CI99right  CI95left   CI95right     CI68left   CI68right</span></span>
<span><span class="co">## 1 24.47672515 12.739352 22.88303684 1.523781e+01 20.38457533</span></span>
<span><span class="co">## 2  0.17923956  0.000000  0.14836912 2.778003e-04  0.09997283</span></span>
<span><span class="co">## 3  0.05974652  0.000000  0.04945637 9.260011e-05  0.03332428</span></span>
<span><span class="co">## 4  0.11949304  0.000000  0.09891275 1.852002e-04  0.06664855</span></span>
<span><span class="co">## 5 16.33844626  6.545161 15.00872407 8.629796e+00 12.92408828</span></span>
<span><span class="co">## 6  1.73264912  0.000000  1.43423485 2.685403e-03  0.96640399</span></span></code></pre>
</details><p>We also can see estimates for transition (Time 1 by Time 2).</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit.grpest</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## NULL</span></span></code></pre>
</details><p>We can do the same for area estimates by just adding the
<code>tabtype='AREA'</code> parameter. Area, in acres, of land cover at
Time 1 (2011) by land cover at Time 2 (2014) for all land in Davis and
Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                 tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                 rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                 colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                 nonsamp.pntfilter<span class="op">=</span><span class="st">"cover_1 != 999"</span>,</span>
<span>                 table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                   collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                 title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>                                      title.colvar <span class="op">=</span> <span class="st">"Land Cover (2014)"</span><span class="op">)</span>, </span>
<span>                     returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Let’s check to make sure the percent standard errors (pse) match.</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cover12</span><span class="op">$</span><span class="va">pse</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)  Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 14.53    --             100    100        100    -- 14.43</span></span>
<span><span class="co">## 2             Shrub    -- 20.03             100    100         --    --  19.6</span></span>
<span><span class="co">## 3   OtherVegetation    --   100           12.02  44.98      71.17 62.79 11.72</span></span>
<span><span class="co">## 4            Barren    --    --           65.47  20.16      58.14    -- 19.53</span></span>
<span><span class="co">## 5        Impervious    --    --              --    100      19.41    -- 19.38</span></span>
<span><span class="co">## 6             Water    --    --           53.25  39.46         -- 19.16 15.47</span></span></code></pre>
</details><div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cover12.area</span><span class="op">$</span><span class="va">pse</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011)  Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 14.53    --             100    100        100    -- 14.43</span></span>
<span><span class="co">## 2             Shrub    -- 20.03             100    100         --    --  19.6</span></span>
<span><span class="co">## 3   OtherVegetation    --   100           12.02  44.98      71.17 62.79 11.72</span></span>
<span><span class="co">## 4            Barren    --    --           65.47  20.16      58.14    -- 19.53</span></span>
<span><span class="co">## 5        Impervious    --    --              --    100      19.41    -- 19.38</span></span>
<span><span class="co">## 6             Water    --    --           53.25  39.46         -- 19.16 15.47</span></span></code></pre>
</details><p>We can also look at transitions by concatenating the column names.
Again, let’s look at the percent land cover at Time 1 (2011) by percent
land cover at Time 2 (2014) for all land in Davis and Salt Lake
Counties, Utah.</p>
<p>First, a quick diversion into creating a new population dataset.
First, we merge the point-level data with each lookup table to get class
names, then concatenate the Time 1 and Time 2 named columns. Let’s make
a copy of the population data and add the new category directly to the
PBx data frame (<code>PBpoparea$PBx</code>) so we don’t have to recreate
the population data.</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PBpoparea2</span> <span class="op">&lt;-</span> <span class="va">PBpoparea</span></span>
<span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span>, <span class="va">icecover_1</span>, by <span class="op">=</span> <span class="st">"cover_1"</span><span class="op">)</span></span>
<span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span>, <span class="va">icecover_2</span>, by <span class="op">=</span> <span class="st">"cover_2"</span><span class="op">)</span></span>
<span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span><span class="op">$</span><span class="va">cover_12_nm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span><span class="op">$</span><span class="va">cover_1_nm</span>, </span>
<span>                                    <span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span><span class="op">$</span><span class="va">cover_2_nm</span>,</span>
<span>                                    sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">PBpoparea2</span><span class="op">$</span><span class="va">PBx</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## Key: &lt;cover_2&gt;</span></span>
<span><span class="co">##    cover_2 cover_1      plot_id dot_cnt change_1_2 use_1 use_2 chg_ag_2</span></span>
<span><span class="co">##      &lt;int&gt;   &lt;int&gt;        &lt;num&gt;   &lt;int&gt;      &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;</span></span>
<span><span class="co">## 1:     110     110 5.540756e+12       1          0   400   400        0</span></span>
<span><span class="co">## 2:     110     110 5.540756e+12      26          0   110   110        0</span></span>
<span><span class="co">## 3:     110     110 5.549764e+12      36          0   110   110        0</span></span>
<span><span class="co">## 4:     110     110 5.549836e+12       1          0   110   110        0</span></span>
<span><span class="co">## 5:     110     110 5.549836e+12      26          0   110   110        0</span></span>
<span><span class="co">## 6:     110     110 5.549836e+12      31          0   110   110        0</span></span>
<span><span class="co">##    ESTN_UNIT STRATUMCD LON_PUBLIC LAT_PUBLIC cover_1_nm cover_2_nm cover_12_nm</span></span>
<span><span class="co">##        &lt;int&gt;     &lt;int&gt;      &lt;num&gt;      &lt;num&gt;     &lt;char&gt;     &lt;char&gt;      &lt;char&gt;</span></span>
<span><span class="co">## 1:        11         2  -111.8918   40.82525       Tree       Tree   Tree-Tree</span></span>
<span><span class="co">## 2:        11         2  -111.8918   40.82525       Tree       Tree   Tree-Tree</span></span>
<span><span class="co">## 3:        35         2  -112.1810   40.69342       Tree       Tree   Tree-Tree</span></span>
<span><span class="co">## 4:        35         1  -111.7668   40.65109       Tree       Tree   Tree-Tree</span></span>
<span><span class="co">## 5:        35         1  -111.7668   40.65109       Tree       Tree   Tree-Tree</span></span>
<span><span class="co">## 6:        35         1  -111.7668   40.65109       Tree       Tree   Tree-Tree</span></span></code></pre>
</details><p>Next, generate the estimates from the concatenated column
(<code>cover_12_nm</code>) in <code>PBpoparea2</code>.</p>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12nm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea2</span>,</span>
<span>                   rowvar <span class="op">=</span> <span class="st">"cover_12_nm"</span>, </span>
<span>                   nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>, </span>
<span>                   title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011-2014)"</span><span class="op">)</span>,  </span>
<span>                       returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the estimates and compare to the method above. You can
see that the estimates are the same, just presented in a different
format.</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12nm</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##             Land Cover (2011-2014) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1                    Barren-Barren       11                  20.16</span></span>
<span><span class="co">## 2                Barren-Impervious      0.4                  58.14</span></span>
<span><span class="co">## 3           Barren-OtherVegetation      0.4                  65.47</span></span>
<span><span class="co">## 4                Impervious-Barren        0                    100</span></span>
<span><span class="co">## 5            Impervious-Impervious     10.7                  19.41</span></span>
<span><span class="co">## 6           OtherVegetation-Barren        1                  44.98</span></span>
<span><span class="co">## 7       OtherVegetation-Impervious      0.4                  71.17</span></span>
<span><span class="co">## 8  OtherVegetation-OtherVegetation     23.1                  12.02</span></span>
<span><span class="co">## 9            OtherVegetation-Shrub        0                    100</span></span>
<span><span class="co">## 10           OtherVegetation-Water      0.4                  62.79</span></span>
<span><span class="co">## 11                    Shrub-Barren      0.3                    100</span></span>
<span><span class="co">## 12           Shrub-OtherVegetation      0.5                    100</span></span>
<span><span class="co">## 13                     Shrub-Shrub     10.8                  20.03</span></span>
<span><span class="co">## 14                     Tree-Barren        0                    100</span></span>
<span><span class="co">## 15                 Tree-Impervious        0                    100</span></span>
<span><span class="co">## 16            Tree-OtherVegetation      0.1                    100</span></span>
<span><span class="co">## 17                       Tree-Tree     17.8                  14.53</span></span>
<span><span class="co">## 18                    Water-Barren      4.6                  39.46</span></span>
<span><span class="co">## 19           Water-OtherVegetation      1.7                  53.25</span></span>
<span><span class="co">## 20                     Water-Water     16.9                  19.16</span></span>
<span><span class="co">## 21                           Total    Total                  Total</span></span></code></pre>
</details><div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 17.8    --             0.1      0          0    --  17.9</span></span>
<span><span class="co">## 2             Shrub   --  10.8             0.5    0.3         --    --  11.5</span></span>
<span><span class="co">## 3   OtherVegetation   --     0            23.1      1        0.4   0.4  24.9</span></span>
<span><span class="co">## 4            Barren   --    --             0.4     11        0.4    --  11.8</span></span>
<span><span class="co">## 5        Impervious   --    --              --      0       10.7    --  10.8</span></span>
<span><span class="co">## 6             Water   --    --             1.7    4.6         --  16.9  23.1</span></span>
<span><span class="co">## 7             Total 17.8  10.8            25.7   16.9       11.5  17.2   100</span></span></code></pre>
</details><p>We can also subset the output results by adding a pntfilter
parameter. Let’s look at the transition data again, except only look at
what the vegetation land (cover_1 &lt; 200) at Time 1 transitioned to in
Time 2. Remember, this does not affect your population so we can use the
same population dataset. We will also add a pretty name to add to the
title for the filter (title.filter).</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12.lt200</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>,</span>
<span>                       rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                       colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                       nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>, </span>
<span>                       pntfilter <span class="op">=</span> <span class="st">"cover_1 &lt; 200"</span>,</span>
<span>                       table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                         collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                         title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>                                           title.colvar <span class="op">=</span> <span class="st">"Land Cover (2014)"</span>,</span>
<span>                                           title.filter <span class="op">=</span> <span class="st">"Vegetated land"</span><span class="op">)</span>, </span>
<span>                         returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the resulting estimates. You can see that 69.9 percent
of the land was vegetated at Time 1 as shown by the overall total of the
table.</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12.lt200</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land Cover (2011) Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1              Tree 22.2    --             0.1      0          0    --  22.3</span></span>
<span><span class="co">## 2             Shrub   --  12.5             0.5    0.3         --    --  13.2</span></span>
<span><span class="co">## 3   OtherVegetation   --   0.2              31    1.7        0.8   0.7  34.4</span></span>
<span><span class="co">## 4             Total 22.2  12.7            31.5      2        0.9   0.7  69.9</span></span></code></pre>
</details><p>Now, we can look at the titles and see how adding the
<code>title.filter</code> is displayed.</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12.lt200</span><span class="op">$</span><span class="va">titlelst</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## $title.est</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, all lands by land cover (2011) and land cover (2014) (Vegetated land)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.pse</span></span>
<span><span class="co">## [1] "Percent sampling error of estimated percent, in acres, all lands by land cover (2011) and land cover (2014) (Vegetated land)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitvar</span></span>
<span><span class="co">## [1] "ONEUNIT"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.ref</span></span>
<span><span class="co">## [1] ""</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.estpse</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_cover_2_nm_allland"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.rawdat</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_cover_2_nm_allland_rawdata"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $outfn.param</span></span>
<span><span class="co">## [1] "photo_nratio_pct_cover_1_nm_cover_2_nm_allland_parameters"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.rowvar</span></span>
<span><span class="co">## [1] "Land Cover (2011)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.row</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, all lands by land cover (2011) (Vegetated land)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.colvar</span></span>
<span><span class="co">## [1] "Land Cover (2014)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.col</span></span>
<span><span class="co">## [1] "Estimated percent, in acres, all lands by land cover (2014) (Vegetated land)"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $title.unitsn</span></span>
<span><span class="co">## [1] "acres"</span></span></code></pre>
</details><p>We can also look at the percent gains and losses from the transition
data with associated percent sampling errors by just adding the
parameter <code>gainloss = TRUE</code>.</p>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                  rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                  colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                  nonsamp.pntfilter<span class="op">=</span><span class="st">"cover_1 != 999"</span>,</span>
<span>                  table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                    collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                    title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>                                      title.colvar <span class="op">=</span> <span class="st">"Land Cover (2014"</span><span class="op">)</span>, </span>
<span>                      returntitle <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                      gainloss <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Here, you can see a new data frame is added to the raw data
(est.gainloss).</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cover12b</span><span class="op">$</span><span class="va">raw</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## List of 15</span></span>
<span><span class="co">##  $ unit_totest :'data.frame':    1 obs. of  15 variables:</span></span>
<span><span class="co">##  $ unit_rowest :'data.frame':    6 obs. of  17 variables:</span></span>
<span><span class="co">##  $ unit_colest :'data.frame':    6 obs. of  17 variables:</span></span>
<span><span class="co">##  $ unit_grpest :'data.frame':    20 obs. of  18 variables:</span></span>
<span><span class="co">##  $ module      : chr "PB"</span></span>
<span><span class="co">##  $ esttype     : chr "AREA"</span></span>
<span><span class="co">##  $ PBmethod    : chr "HT"</span></span>
<span><span class="co">##  $ strtype     : chr "POST"</span></span>
<span><span class="co">##  $ rowvar      : chr "cover_1_nm"</span></span>
<span><span class="co">##  $ pltdom.row  :Classes 'data.table' and 'data.frame':   232 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ colvar      : chr "cover_2_nm"</span></span>
<span><span class="co">##  $ pltdom.col  :Classes 'data.table' and 'data.frame':   235 obs. of  7 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ pltdom.grp  :Classes 'data.table' and 'data.frame':   258 obs. of  8 variables:</span></span>
<span><span class="co">##   ..- attr(*, ".internal.selfref")=&lt;externalptr&gt; </span></span>
<span><span class="co">##   ..- attr(*, "sorted")= chr "plot_id"</span></span>
<span><span class="co">##  $ areaunits   : chr "acres"</span></span>
<span><span class="co">##  $ est.gainloss:'data.frame':    6 obs. of  23 variables:</span></span></code></pre>
</details><p>Here we see estimates of gains and losses by category.</p>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12b</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">est.gainloss</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 ONEUNIT                               gain.val</span></span>
<span><span class="co">## Water                 1                     Not-Water to Water</span></span>
<span><span class="co">## OtherVegetation       1 Not-OtherVegetation to OtherVegetation</span></span>
<span><span class="co">## Shrub                 1                     Not-Shrub to Shrub</span></span>
<span><span class="co">## Barren                1                   Not-Barren to Barren</span></span>
<span><span class="co">## Tree                  1                       Not-Tree to Tree</span></span>
<span><span class="co">## Impervious            1           Not-Impervious to Impervious</span></span>
<span><span class="co">##                                               loss.val   gain.est    gain.se</span></span>
<span><span class="co">## Water                               Water to Not-Water 0.38429407 0.24131456</span></span>
<span><span class="co">## OtherVegetation OtherVegetation to Not-OtherVegetation 2.60651629 1.03970748</span></span>
<span><span class="co">## Shrub                               Shrub to Not-Shrub 0.03341688 0.03341688</span></span>
<span><span class="co">## Barren                            Barren to Not-Barren 5.86466165 1.85799417</span></span>
<span><span class="co">## Tree                                  Tree to Not-Tree 0.00000000 0.00000000</span></span>
<span><span class="co">## Impervious                Impervious to Not-Impervious 0.75187970 0.38675722</span></span>
<span><span class="co">##                   loss.est    loss.se   diff.est   diff.se    CI99left</span></span>
<span><span class="co">## Water           6.26566416 1.98838493 -5.8813701 1.9990174 -11.0304978</span></span>
<span><span class="co">## OtherVegetation 1.75438596 0.64871774  0.8521303 1.2035243  -2.2479428</span></span>
<span><span class="co">## Shrub           0.75187970 0.75187970 -0.7184628 0.7528748  -2.6577398</span></span>
<span><span class="co">## Barren          0.75187970 0.44239370  5.1127820 1.9191564   0.1693626</span></span>
<span><span class="co">## Tree            0.10025063 0.10025063 -0.1002506 0.1002506  -0.3584791</span></span>
<span><span class="co">## Impervious      0.01670844 0.01670844  0.7351713 0.3792919  -0.2418200</span></span>
<span><span class="co">##                  CI99right gain.CI95left gain.CI95right gain.CI68left</span></span>
<span><span class="co">## Water           -0.7322424  -0.088673786     0.85726192  0.1443168979</span></span>
<span><span class="co">## OtherVegetation  3.9522034   0.568727083     4.64430550  1.5725709947</span></span>
<span><span class="co">## Shrub            1.2208141  -0.032078997     0.09891275  0.0001852002</span></span>
<span><span class="co">## Barren          10.0562013   2.223059998     9.50626331  4.0169647052</span></span>
<span><span class="co">## Tree             0.1579779   0.000000000     0.00000000  0.0000000000</span></span>
<span><span class="co">## Impervious       1.7121625  -0.006150519     1.50990992  0.3672659346</span></span>
<span><span class="co">##                 gain.CI68right loss.CI95left loss.CI95right loss.CI68left</span></span>
<span><span class="co">## Water               0.62427124    2.36850131    10.16282702  4.288299e+00</span></span>
<span><span class="co">## OtherVegetation     3.64046159    0.48292256     3.02584937  1.109263e+00</span></span>
<span><span class="co">## Shrub               0.06664855   -0.72177743     2.22553683  4.167005e-03</span></span>
<span><span class="co">## Barren              7.71235860   -0.11519602     1.61895542  3.119378e-01</span></span>
<span><span class="co">## Tree                0.00000000   -0.09623699     0.29673824  5.556007e-04</span></span>
<span><span class="co">## Impervious          1.13649346   -0.01603950     0.04945637  9.260011e-05</span></span>
<span><span class="co">##                 loss.CI68right diff.CI95left diff.CI95right diff.CI68left</span></span>
<span><span class="co">## Water               8.24302923  -9.799372265    -1.96336792    -7.8693087</span></span>
<span><span class="co">## OtherVegetation     2.39950844  -1.506733903     3.21099455    -0.3447239</span></span>
<span><span class="co">## Shrub               1.49959239  -2.194070309     0.75714466    -1.4671651</span></span>
<span><span class="co">## Barren              1.19182160   1.351304521     8.87425939     3.2042617</span></span>
<span><span class="co">## Tree                0.19994565  -0.296738244     0.09623699    -0.1999457</span></span>
<span><span class="co">## Impervious          0.03332428  -0.008227219     1.47856974     0.3579814</span></span>
<span><span class="co">##                 diff.CI68right</span></span>
<span><span class="co">## Water            -3.8934314469</span></span>
<span><span class="co">## OtherVegetation   2.0489845261</span></span>
<span><span class="co">## Shrub             0.0302394524</span></span>
<span><span class="co">## Barren            7.0213021705</span></span>
<span><span class="co">## Tree             -0.0005556007</span></span>
<span><span class="co">## Impervious        1.1123610901</span></span></code></pre>
</details><p>We can also use a bar plot to show the difference in percentage
between Time 1 and Time 2 by using the <code><a href="../reference/datPBplotchg.html">datPBplotchg()</a></code> from
<code>FIESTA</code>. Here, we can easily see the percent gains and
percent loss by each category, with confidence intervals.</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/datPBplotchg.html">datPBplotchg</a></span><span class="op">(</span><span class="va">cover12b</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">est.gainloss</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-96-1.png" width="700"></p>
</details><p>Let’s look more closely at gain and loss of the OtherVegetation
category.</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## We will first subset the raw data frame and set to an object</span></span>
<span><span class="va">estcat</span> <span class="op">&lt;-</span> <span class="st">"OtherVegetation"</span></span>
<span><span class="va">othveg.gainloss</span> <span class="op">&lt;-</span> <span class="va">cover12b</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">est.gainloss</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">cover12b</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">est.gainloss</span><span class="op">)</span> <span class="op">==</span> <span class="va">estcat</span>,<span class="op">]</span></span></code></pre></div>
<p>Let’s now look at gains. Here we see we are 95% confident that the
gain of Other Vegetation from 2011 to 2014 was 2.6% +/- 2.0%.</p>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">othveg.gainloss</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gain.CI95left"</span>, <span class="st">"gain.est"</span>, <span class="st">"gain.CI95right"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 gain.CI95left gain.est gain.CI95right</span></span>
<span><span class="co">## OtherVegetation     0.5687271 2.606516       4.644305</span></span></code></pre>
</details><p>Then the losses. Here we see we are 95% confident that the loss of
Other Vegetation from 2011 to 2014 was 1.8% +/- 1.3%.</p>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">othveg.gainloss</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loss.CI95left"</span>, <span class="st">"loss.est"</span>, <span class="st">"loss.CI95right"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 loss.CI95left loss.est loss.CI95right</span></span>
<span><span class="co">## OtherVegetation     0.4829226 1.754386       3.025849</span></span></code></pre>
</details><p>…and now the net change. Here we see we are 95% confident that the
loss of Other Vegetation from 2011 to 2014 was 0.9% +/- 2.4%.</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">othveg.gainloss</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"diff.CI95left"</span>, <span class="st">"diff.est"</span>, <span class="st">"diff.CI95right"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                 diff.CI95left  diff.est diff.CI95right</span></span>
<span><span class="co">## OtherVegetation     -1.506734 0.8521303       3.210995</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex8">Example 8: Ratio to means estimates<a class="anchor" aria-label="anchor" href="#ex8"></a>
</h4>
<details><summary>
View Example
</summary><p>In this example, we look at within category estimates, as the
estimate proportion of one category within the estimated proportion of
another category. Let’s first look at the proportion of land cover at
Time 1 (2011) within land that changed in Davis and Salt Lake Counties,
Utah. Here, we use the PBpoparea population dataset from <a href="#pop2">Population Example 2</a> as the population dataset.</p>
<p>First, we create a lookup table for the points defining changed
land</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">changelut</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>change_1_2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, </span>
<span>                        change_1_2nm<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No Change"</span>, <span class="st">"Change"</span>, <span class="st">"Expected Change"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">changelut</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   change_1_2    change_1_2nm</span></span>
<span><span class="co">## 1          0       No Change</span></span>
<span><span class="co">## 2          1          Change</span></span>
<span><span class="co">## 3          2 Expected Change</span></span></code></pre>
</details><p>Now, using the <code>PBpoparea</code> population for both counties,
let’s get our ratio estimate.</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chgcover1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                   ratio <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                   rowvar <span class="op">=</span> <span class="st">"change_1_2"</span>, </span>
<span>                   colvar <span class="op">=</span> <span class="st">"cover_1"</span>,</span>
<span>                   nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                   table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut<span class="op">=</span><span class="va">changelut</span>, collut<span class="op">=</span><span class="va">icecover_1</span><span class="op">)</span>,  </span>
<span>                   title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar<span class="op">=</span><span class="st">"Change"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Look at estimates</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chgcover1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Change Tree Shrub OtherVegetation Barren Impervious Water</span></span>
<span><span class="co">## 1       No Change 21.1  13.4            21.1   11.1       12.3  20.9</span></span>
<span><span class="co">## 2          Change  7.6   7.1            40.7   24.2        8.2  12.2</span></span>
<span><span class="co">## 3 Expected Change  1.8    --            38.2     --         --    60</span></span></code></pre>
</details><p>And percent sampling error</p>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chgcover1</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            Change  Tree Shrub OtherVegetation Barren Impervious Water</span></span>
<span><span class="co">## 1       No Change 11.71 17.39           11.32  21.12      18.16 16.18</span></span>
<span><span class="co">## 2          Change 77.09 87.74           29.49  37.32      52.03 53.95</span></span>
<span><span class="co">## 3 Expected Change 99.27    --           44.21     --         -- 35.46</span></span></code></pre>
</details><p>Now we can check sum of row estimates. Should sum to 100%.</p>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">chgcover1</span><span class="op">$</span><span class="va">est</span><span class="op">[</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] 99.9</span></span></code></pre>
</details><div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">chgcover1</span><span class="op">$</span><span class="va">est</span><span class="op">[</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">## [1] 100</span></span></code></pre>
</details><p>Next, let’s generate estimates for percent land cover at Time 1
(2011) within agent of change in Davis and Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1.rat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>, </span>
<span>                           ratio <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                           rowvar <span class="op">=</span> <span class="st">"chg_ag_2"</span>, </span>
<span>                           colvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                           nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>, </span>
<span>                           table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icechg_ag</span>, </span>
<span>                                             collut <span class="op">=</span> <span class="va">icecover_1</span><span class="op">)</span>, </span>
<span>                             title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Change agent"</span>, </span>
<span>                                                 title.colvar <span class="op">=</span> <span class="st">"Land cover (2011)"</span><span class="op">)</span>, </span>
<span>                           returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Look at estimates</p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 19.5  11.8            24.8   11.3       11.5</span></span>
<span><span class="co">## 2                   Development  2.6  19.5            34.2   35.1        8.7</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation   --    --             100     --         --</span></span>
<span><span class="co">## 4           Stress or Mortality  100    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change   --    --            17.4    2.3         --</span></span>
<span><span class="co">##   Water</span></span>
<span><span class="co">## 1    21</span></span>
<span><span class="co">## 2    --</span></span>
<span><span class="co">## 3    --</span></span>
<span><span class="co">## 4    --</span></span>
<span><span class="co">## 5  80.3</span></span></code></pre>
</details><p>And percent sampling error</p>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent  Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 10.86    17            8.39  18.47      16.86</span></span>
<span><span class="co">## 2                   Development 99.26 99.26            59.2  50.14       70.9</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation    --    --           68.08     --         --</span></span>
<span><span class="co">## 4           Stress or Mortality 99.95    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change    --    --           46.68   99.7         --</span></span>
<span><span class="co">##   Water</span></span>
<span><span class="co">## 1 14.13</span></span>
<span><span class="co">## 2    --</span></span>
<span><span class="co">## 3    --</span></span>
<span><span class="co">## 4    --</span></span>
<span><span class="co">## 5 37.14</span></span></code></pre>
</details><p>Add Total column to ratio estimates. Note: all rows should equal
100%</p>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">est</span><span class="op">$</span><span class="va">Total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">est</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">as.numeric</span><span class="op">)</span>,</span>
<span>                                       na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 19.5  11.8            24.8   11.3       11.5</span></span>
<span><span class="co">## 2                   Development  2.6  19.5            34.2   35.1        8.7</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation   --    --             100     --         --</span></span>
<span><span class="co">## 4           Stress or Mortality  100    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change   --    --            17.4    2.3         --</span></span>
<span><span class="co">##   Water Total</span></span>
<span><span class="co">## 1    21  99.9</span></span>
<span><span class="co">## 2    -- 100.1</span></span>
<span><span class="co">## 3    -- 100.0</span></span>
<span><span class="co">## 4    -- 100.0</span></span>
<span><span class="co">## 5  80.3 100.0</span></span></code></pre>
</details><p>Now compare nonraio and ratio to means estimates</p>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Nonratio estimates</span></span>
<span><span class="va">chg_ag_cover1</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 17.8  10.8            22.4   12.7       10.4</span></span>
<span><span class="co">## 2                   Development   --    --             1.3    1.5        1.1</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation   --    --              --    0.1         --</span></span>
<span><span class="co">## 4           Stress or Mortality  0.1    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change   --     0               2    2.6         --</span></span>
<span><span class="co">## 6                         Total 17.8  10.8            25.7   16.9       11.5</span></span>
<span><span class="co">##   Water Total</span></span>
<span><span class="co">## 1  16.9    91</span></span>
<span><span class="co">## 2    --   3.9</span></span>
<span><span class="co">## 3    --   0.1</span></span>
<span><span class="co">## 4    --   0.1</span></span>
<span><span class="co">## 5   0.4     5</span></span>
<span><span class="co">## 6  17.2   100</span></span></code></pre>
</details><div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ratio to means estimates</span></span>
<span><span class="va">chg_ag_cover1.rat</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##                    Change agent Tree Shrub OtherVegetation Barren Impervious</span></span>
<span><span class="co">## 1                     No Change 19.5  11.8            24.8   11.3       11.5</span></span>
<span><span class="co">## 2                   Development  2.6  19.5            34.2   35.1        8.7</span></span>
<span><span class="co">## 3 Removal or Loss of Vegetation   --    --             100     --         --</span></span>
<span><span class="co">## 4           Stress or Mortality  100    --              --     --         --</span></span>
<span><span class="co">## 5               Expected Change   --    --            17.4    2.3         --</span></span>
<span><span class="co">##   Water Total</span></span>
<span><span class="co">## 1    21  99.9</span></span>
<span><span class="co">## 2    -- 100.1</span></span>
<span><span class="co">## 3    -- 100.0</span></span>
<span><span class="co">## 4    -- 100.0</span></span>
<span><span class="co">## 5  80.3 100.0</span></span></code></pre>
</details><p>Let’s look at the percent of land cover at Time 2 within the percent
of land cover at Time 1 in Davis and Salt Lake Counties, to look more
closely at percent transition changes within categories.</p>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1_2.rat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea</span>,</span>
<span>                          ratio <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                          rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                          colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                          nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                          table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                            collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                        title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land cover (2011)"</span>, </span>
<span>                                            title.colvar <span class="op">=</span> <span class="st">"Land cover (2014)"</span><span class="op">)</span>, </span>
<span>                          returntitle<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Look at estimates.</p>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover1_2.rat</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land cover (2011) Tree Shrub OtherVegetation Barren Impervious Water</span></span>
<span><span class="co">## 1              Tree 99.4    --             0.3    0.1        0.2    --</span></span>
<span><span class="co">## 2             Shrub   --  93.5             4.2    2.3         --    --</span></span>
<span><span class="co">## 3   OtherVegetation   --   0.1              93      4        1.4   1.5</span></span>
<span><span class="co">## 4            Barren   --    --             3.3   93.6        3.1    --</span></span>
<span><span class="co">## 5        Impervious   --    --              --    0.2       99.8    --</span></span>
<span><span class="co">## 6             Water   --    --             7.3   19.8         --  72.9</span></span></code></pre>
</details><p>We can also display the estimates in a stacked bar plot, with the
<code><a href="../reference/datBarStacked.html">datBarStacked()</a></code> function in <code>FIESTA</code>. We will
use the <code>unit_grpest</code> table from the raw data.</p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/datBarStacked.html">datBarStacked</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cover1_2.rat</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_grpest</span>, </span>
<span>              main.attribute <span class="op">=</span> <span class="st">"Land cover (2011)"</span>, </span>
<span>              sub.attribute <span class="op">=</span> <span class="st">"Land cover (2014)"</span>,</span>
<span>              response <span class="op">=</span> <span class="st">"est"</span>, </span>
<span>              xlabel <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>              legend.title <span class="op">=</span> <span class="st">"Land Cover (2014)"</span><span class="op">)</span></span></code></pre></div>
<p>Now, let’s only look at change by subsetting the columns of
unit_grpest to table cells that indicate change. In this example, change
is where Land cover in 2011 is not equal to Land cover in 2014.</p>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">cover1_2.rat</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_grpest</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="st">'Land cover (2011)'</span> <span class="op">!=</span> <span class="va">x</span><span class="op">$</span><span class="st">'Land cover (2014)'</span>,<span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/datBarStacked.html">datBarStacked</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, </span>
<span>              main.attribute <span class="op">=</span> <span class="st">"Land cover (2011)"</span>, </span>
<span>              sub.attribute <span class="op">=</span> <span class="st">"Land cover (2014)"</span>,</span>
<span>              response <span class="op">=</span> <span class="st">"est"</span>, </span>
<span>              xlabel <span class="op">=</span> <span class="st">"Land Cover (2011)"</span>, </span>
<span>              legend.title <span class="op">=</span> <span class="st">"Land Cover (2014)"</span>,</span>
<span>              main.order <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/flip.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tree"</span>, <span class="st">"Shrub"</span>, <span class="st">"OtherVegetation"</span>,</span>
<span>                                 <span class="st">"Impervious"</span>, <span class="st">"Barren"</span>, <span class="st">"Water"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</details>
</div>
<div class="section level4">
<h4 id="ex9">Example 9: Plot-level Data, with percent by domain as separate
columns<a class="anchor" aria-label="anchor" href="#ex9"></a>
</h4>
<details><summary>
View Example
</summary><p>This example demonstrates generating estimates from data that are
already compiled from point data to percentages by plot. The population
datasets used in this example can be found in <a href="#pop4">Population
Example 4</a>.</p>
<p>We can get estimates of percent land cover at Time 1 (2011) for all
land in Davis and Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltpct11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpctpop11</span>, </span>
<span>                  title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar<span class="op">=</span><span class="st">"Land cover (2011)"</span><span class="op">)</span>,</span>
<span>                  returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pltpct11</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Land cover (2011) Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          Barren11     11.8                  19.52</span></span>
<span><span class="co">## 2      Impervious11     10.8                  19.39</span></span>
<span><span class="co">## 3 OtherVegetation11     24.9                  11.72</span></span>
<span><span class="co">## 4           Shrub11     11.5                  19.59</span></span>
<span><span class="co">## 5            Tree11     17.9                  14.43</span></span>
<span><span class="co">## 6           Water11     23.1                  15.47</span></span></code></pre>
</details><p>We can also create a barplot with estimates and error bar, using the
Percent Sampling Error column.</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pltpct11</span><span class="op">$</span><span class="va">est</span>, </span>
<span>           xvar <span class="op">=</span> <span class="st">"Land cover (2011)"</span>,</span>
<span>           yvar <span class="op">=</span> <span class="st">"Estimate"</span>, </span>
<span>           errbars <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>           psevar <span class="op">=</span> <span class="st">"Percent Sampling Error"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-116-1.png" width="700"></p>
</details><p>Note that we have many options to choose from when creating the
barplot. This time use data from the raw data with the standard error
(est.se) column and add labels and a title.</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/datBarplot.html">datBarplot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">pltpct11</span><span class="op">$</span><span class="va">raw</span><span class="op">$</span><span class="va">unit_rowest</span>, </span>
<span>           xvar <span class="op">=</span> <span class="st">"Land cover (2011)"</span>, </span>
<span>           yvar <span class="op">=</span> <span class="st">"est"</span>, </span>
<span>           errbars <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>           sevar <span class="op">=</span> <span class="st">"est.se"</span>, </span>
<span>           ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span>, </span>
<span>           ylabel <span class="op">=</span> <span class="st">"Percent of land"</span>, </span>
<span>           main <span class="op">=</span> <span class="st">"Percent cover at Time 1 (2011)"</span><span class="op">)</span></span></code></pre></div>
<details><summary>
plot
</summary><p><img src="FIESTA_tutorial_PB_files/figure-html/unnamed-chunk-117-1.png" width="700"></p>
</details><p>Now, let’s get area estimates of land cover at Time 1 (2011) for all
land in Davis and Salt Lake Counties, Utah by adding
<code>tabtype = "AREA"</code> to the <code><a href="../reference/modPB.html">modPB()</a></code> call.</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltpct11.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpctpop11</span>, </span>
<span>                       tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                       returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pltpct11.area</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            variable Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          Barren11 108693.6                  19.52</span></span>
<span><span class="co">## 2      Impervious11  99260.1                  19.39</span></span>
<span><span class="co">## 3 OtherVegetation11 229803.4                  11.72</span></span>
<span><span class="co">## 4           Shrub11 106404.6                  19.59</span></span>
<span><span class="co">## 5            Tree11 165225.4                  14.43</span></span>
<span><span class="co">## 6           Water11 213294.7                  15.47</span></span></code></pre>
</details><p>We can of course us the population dataset for Time 2 (2014) that we
created in <a href="#pop4">Population Example 4</a> to produce estimates
for Time 2. Below we produce estimates of percent land cover at Time 2
(2014) for all land in Davis and Salt Lake Counties, Utah.</p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltpct14</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpctpop14</span>, </span>
<span>                  returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pltpct14</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            variable Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          Barren14     16.9                  16.36</span></span>
<span><span class="co">## 2      Impervious14     11.5                  18.44</span></span>
<span><span class="co">## 3 OtherVegetation14     25.7                  11.59</span></span>
<span><span class="co">## 4           Shrub14     10.8                  19.96</span></span>
<span><span class="co">## 5            Tree14     17.8                  14.52</span></span>
<span><span class="co">## 6           Water14     17.2                  18.71</span></span></code></pre>
</details><p>Next we have estimates of area of land cover at Time 2 (2014) for all
land in Davis and Salt Lake Counties, Utah by adding
<code>tabtype = "AREA"</code>.</p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltpct14.area</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpctpop14</span>, </span>
<span>                       tabtype <span class="op">=</span> <span class="st">"AREA"</span>,</span>
<span>                       returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pltpct14.area</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##            variable Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1          Barren14 155861.2                  16.36</span></span>
<span><span class="co">## 2      Impervious14 106057.8                  18.44</span></span>
<span><span class="co">## 3 OtherVegetation14 237502.8                  11.59</span></span>
<span><span class="co">## 4           Shrub14  99745.6                  19.96</span></span>
<span><span class="co">## 5            Tree14 164323.6                  14.52</span></span>
<span><span class="co">## 6           Water14   159052                  18.71</span></span></code></pre>
</details><p>Again, we can look at other population data that we created in <a href="#pop4">Population Example 4</a>. Let’s also look at transitions.
In this example we will generate estimates of percent land cover change
from vegetated to non-vegetated for all land in Davis and Salt Lake
Counties, Utah by using the <code>PBpctpop.veg</code> object as our
population dataset. This transition was recorded in the initial dataset
(i.e., Veg.NonVeg).</p>
<p>Then, get estimates. We can add a title in the title_opts parameter
to help describe the estimate.</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pltpct.veg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpctpop.veg</span>, </span>
<span>                    title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Veg to NonVeg transition"</span><span class="op">)</span>,</span>
<span>                    returntitle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">pltpct.veg</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##   Veg to NonVeg transition Estimate Percent Sampling Error</span></span>
<span><span class="co">## 1               Veg.NonVeg      1.8                  40.18</span></span></code></pre>
</details></details>
</div>
<div class="section level4">
<h4 id="ex10">Example 10: Point-level transition data (T1 Cover - T2 Cover) -
Post-Stratification<a class="anchor" aria-label="anchor" href="#ex10"></a>
</h4>
<details><summary>
View Example
</summary><p>This example shows how we can add post-stratification to reduce the
variance (i.e, increase precision) in the estimates. The population data
for this example were created in <a href="#pop5">Population Example
5</a>.</p>
<p>Now, we can produce the estimates.</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpopareaPS</span>,</span>
<span>                       rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                       colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                       nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                       table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                         collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                       title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Let’s again get estimates without strata. Again, we use (different)
population data that were created in <a href="#pop5">Population Example
5</a>.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/modPB.html">modPB</a></span><span class="op">(</span>PBpopdat <span class="op">=</span> <span class="va">PBpoparea_nonPS</span>,</span>
<span>                      rowvar <span class="op">=</span> <span class="st">"cover_1"</span>, </span>
<span>                      colvar <span class="op">=</span> <span class="st">"cover_2"</span>, </span>
<span>                  nonsamp.pntfilter <span class="op">=</span> <span class="st">"cover_1 != 999"</span>,</span>
<span>                      table_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rowlut <span class="op">=</span> <span class="va">icecover_1</span>,</span>
<span>                                        collut <span class="op">=</span> <span class="va">icecover_2</span><span class="op">)</span>, </span>
<span>                      title_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title.rowvar <span class="op">=</span> <span class="st">"Land Cover"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, let’s compare estimates.</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        Land Cover Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1            Tree 17.8    --             0.1      0          0    --  17.9</span></span>
<span><span class="co">## 2           Shrub   --  10.8             0.5    0.3         --    --  11.5</span></span>
<span><span class="co">## 3 OtherVegetation   --     0            23.1      1        0.4   0.4  24.9</span></span>
<span><span class="co">## 4          Barren   --    --             0.4     11        0.4    --  11.8</span></span>
<span><span class="co">## 5      Impervious   --    --              --      0       10.7    --  10.8</span></span>
<span><span class="co">## 6           Water   --    --             1.7    4.6         --  16.9  23.1</span></span>
<span><span class="co">## 7           Total 17.8  10.8            25.7   16.9       11.5  17.2   100</span></span></code></pre>
</details><div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12ps</span><span class="op">$</span><span class="va">est</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        Land Cover Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1            Tree 18.5    --               0      0          0    --  18.6</span></span>
<span><span class="co">## 2           Shrub   --  11.1             0.5    0.3         --    --  11.8</span></span>
<span><span class="co">## 3 OtherVegetation   --     0            22.9      1        0.3   0.4  24.6</span></span>
<span><span class="co">## 4          Barren   --    --             0.4   10.9        0.4    --  11.6</span></span>
<span><span class="co">## 5      Impervious   --    --              --      0       10.6    --  10.6</span></span>
<span><span class="co">## 6           Water   --    --             1.7    4.5         --  16.5  22.7</span></span>
<span><span class="co">## 7           Total 18.5  11.1            25.4   16.6       11.4  16.9   100</span></span></code></pre>
</details><div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        Land Cover  Tree Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1            Tree 14.53    --             100    100        100    -- 14.43</span></span>
<span><span class="co">## 2           Shrub    -- 20.03             100    100         --    --  19.6</span></span>
<span><span class="co">## 3 OtherVegetation    --   100           12.02  44.98      71.17 62.79 11.72</span></span>
<span><span class="co">## 4          Barren    --    --           65.47  20.16      58.14    -- 19.53</span></span>
<span><span class="co">## 5      Impervious    --    --              --    100      19.41    -- 19.38</span></span>
<span><span class="co">## 6           Water    --    --           53.25  39.46         -- 19.16 15.47</span></span>
<span><span class="co">## 7           Total 14.53 19.96           11.58  16.36      18.44 18.71     0</span></span></code></pre>
</details><div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cover12ps</span><span class="op">$</span><span class="va">pse</span></span></code></pre></div>
<details><summary>
output
</summary><pre><code><span><span class="co">##        Land Cover  Tree  Shrub OtherVegetation Barren Impervious Water Total</span></span>
<span><span class="co">## 1            Tree 12.44     --          101.01 101.01     101.01    -- 12.37</span></span>
<span><span class="co">## 2           Shrub    --  19.41          101.01 101.01         --    -- 19.09</span></span>
<span><span class="co">## 3 OtherVegetation    -- 101.01           11.99  45.32      71.85 63.37 11.66</span></span>
<span><span class="co">## 4          Barren    --     --           66.08  20.14      58.66    --  19.5</span></span>
<span><span class="co">## 5      Impervious    --     --              -- 101.01      19.55    -- 19.52</span></span>
<span><span class="co">## 6           Water    --     --            53.7  39.73         -- 19.05 15.25</span></span>
<span><span class="co">## 7           Total 12.44  19.35           11.51  16.25      18.56 18.58     0</span></span></code></pre>
</details></details>
</div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Frescino, Tracey S.; Moisen, Gretchen G.; Megown, Kevin A.; Nelson,
Val J.; Freeman, Elizabeth A.; Patterson, Paul L.; Finco, Mark; Brewer,
Ken; Menlove, James 2009. Nevada Photo-Based Inventory Pilot (NPIP)
photo sampling procedures. Gen. Tech. Rep. RMRS-GTR-222. Fort Collins,
CO: U.S. Department of Agriculture, Forest Service, Rocky Mountain
Research Station. 30 p.</p>
<p>Patterson, Paul L. 2012. Photo-based estimators for the Nevada
photo-based inventory. Res. Pap. RMRS-RP-92. Fort Collins, CO: U.S.
Department of Agriculture, Forest Service, Rocky Mountain Research
Station. 14 p.</p>
<p>Frescino, Tracey S.; Moisen, Gretchen G.; Patterson, Paul L.;
Freeman, Elizabeth A.; Patterson, Paul L.; Menlove, James. In Press..
Nevada Photo-Based Inventory Pilot (NPIP) resource estimates. Gen. Tech.
Rep. RMRS-GTR-344. Fort Collins, CO: U.S. Department of Agriculture,
Forest Service, Rocky Mountain Research Station. 63 p.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
