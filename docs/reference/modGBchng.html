<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Green-Book module - Generate area estimates. — modGBchng • FIESTA</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Green-Book module - Generate area estimates. — modGBchng"><meta property="og:description" content="Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.6.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/USDAForestService/FIESTA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Green-Book module - Generate area estimates.</h1>
    <small class="dont-index">Source: <a href="https://github.com/USDAForestService/FIESTA/blob/HEAD/R/modGBchng.R" class="external-link"><code>R/modGBchng.R</code></a></small>
    <div class="hidden name"><code>modGBchng.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates area estimates by domain (and estimation unit). Calculations are
based on Scott et al. 2005 ('the green-book') for mapped forest inventory
plots. The non-ratio estimator for estimating area by stratum and domain is
used. Plots that are totally nonsampled are excluded from estimation
dataset. Next, an adjustment factor is calculated by strata to adjust for
nonsampled (nonresponse) conditions that have proportion less than 1. The
attribute is the proportion of the plot which is divided by the adjustment
factor, and averaged by stratum. Strata means are combined using the strata
weights and then expanded to area using the total land area in the
population.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">modGBchng</span><span class="op">(</span></span>
<span>  <span class="va">GBpopdat</span>,</span>
<span>  chngtype <span class="op">=</span> <span class="st">"total"</span>,</span>
<span>  landarea <span class="op">=</span> <span class="st">"FOREST"</span>,</span>
<span>  pcfilter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rowvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sumunits <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  returntitle <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  table_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  savedata_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cdomdat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  gui <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>GBpopdat</dt>
<dd><p>List. Population data objects returned from modGBpop().</p></dd>


<dt>chngtype</dt>
<dd><p>String. The type of change estimates ('total', 'annual').</p></dd>


<dt>landarea</dt>
<dd><p>String. The sample area filter for estimates ("ALL",
"FOREST", "TIMBERLAND").  If landarea=FOREST, filtered to COND_STATUS_CD =
1; If landarea=TIMBERLAND, filtered to SITECLCD in(1:6) and RESERVCD = 0.</p></dd>


<dt>pcfilter</dt>
<dd><p>String. A filter for plot or cond attributes (including
pltassgn).  Must be R logical syntax.</p></dd>


<dt>rowvar</dt>
<dd><p>String. Name of row domain variable in cond. If only one
domain, rowvar = domain variable. If more than one domain, include colvar.
If no domain, rowvar = NULL.</p></dd>


<dt>colvar</dt>
<dd><p>String. Name of column domain variable in cond.</p></dd>


<dt>sumunits</dt>
<dd><p>Logical. If TRUE, estimation units are summed and returned
in one table.</p></dd>


<dt>returntitle</dt>
<dd><p>Logical. If TRUE, returns title(s) of the estimation
table(s).</p></dd>


<dt>savedata</dt>
<dd><p>Logical. If TRUE, saves table(s) to outfolder.</p></dd>


<dt>table_opts</dt>
<dd><p>List. See help(table_options()) for a list of
options.</p></dd>


<dt>title_opts</dt>
<dd><p>List. See help(title_options()) for a list of options.</p></dd>


<dt>savedata_opts</dt>
<dd><p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE.</p></dd>


<dt>cdomdat</dt>
<dd><p>Data.frame of condition-domain data. Output from modGBchng().</p></dd>


<dt>gui</dt>
<dd><p>Logical. If gui, user is prompted for parameters.</p></dd>


<dt>...</dt>
<dd><p>Parameters for modGBpop() if GBpopdat is NULL.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with estimates with percent sampling error for rowvar (and
colvar).  If sumunits=TRUE or unitvar=NULL and colvar=NULL, one data frame
is returned.  Otherwise, a list object is returned with the following
information.  If savedata=TRUE, all data frames are written to outfolder.</p>
<dl><dt>est</dt>
<dd><p>Data frame. Area estimates, in area units (e.g., acres), by
rowvar, colvar (and estimation unit). If sumunits=TRUE or one estimation
unit and colvar=NULL, or allin1=TRUE, estimates and percent sampling error
are in one data frame.</p></dd>
 
<dt>pse</dt>
<dd><p>Data frame. Percent sampling errors (Confidence level 68<!-- %)  -->
for estimates by rowvar and colvar (and estimation unit).</p></dd>
 
<dt>titlelst</dt>
<dd><p>List. If returntitle=TRUE a list with table title(s). The 
list contains one title if est and pse are in the same table and two titles 
if est and pse are in separate tables. Row and column tables are also included 
in list.</p></dd>
 
<dt>raw</dt>
<dd><p>List. If rawdata=TRUE, a list including the processing data used 
for estimation including: number of plots and conditions; stratification 
information; and 1 to 8 tables with calculated values for table cells and 
totals (See processing data below).</p></dd>


</dl><p>Raw data</p>
<dl><dt>plotsampcnt</dt>
<dd><p>Table. Number of plots by plot status (e.g., sampled
forest on plot, sampled nonforest, nonsampled).</p></dd>
 
<dt>condsampcnt</dt>
<dd><p>DF. Number of conditions by condition status 
(forest land, nonforest land, noncensus water, census water, nonsampled).</p></dd>
 
<dt>unitarea</dt>
<dd><p>DF. Area by estimation unit.</p></dd>
 
<dt>expcondtab</dt>
<dd><p>DF. Condition-level area expansion factors.</p></dd>
 
<dt>domdat</dt>
<dd><p>DF. Final data table used for estimation.</p></dd>


<dt>stratdat</dt>
<dd><p>Data frame. Strata information by estimation unit.</p></dd>

</dl><table class="table table"><tr><td></td><td><b>Variable</b></td><td><b>Description</b></td></tr><tr><td></td><td>unitvar</td><td>estimation unit</td></tr><tr><td></td><td>strvar</td><td>stratum value</td></tr><tr><td></td><td>strwtvar</td><td>number of pixels by strata and estimation unit</td></tr><tr><td></td><td>n.strata</td><td>number of plots in strata (after totally nonsampled 
plots removed)</td></tr><tr><td></td><td>n.total</td><td>number of plots for estimation unit</td></tr><tr><td></td><td>strwt</td><td>proportion of area (or plots) by strata and estimation 
unit (strata weight)</td></tr><tr><td></td><td>CONDPROP_UNADJ_SUM</td><td>summed condition 
proportion by strata and estimation unit</td></tr><tr><td></td><td>CONDPROP_ADJFAC</td><td>adjusted condition proportion by strata after 
nonresponse plots removed</td></tr><tr><td></td><td>AREA</td><td>total area for estimation unit</td></tr><tr><td></td><td>CONDPROP_ADJFAC</td><td>average area</td></tr></table><dl><dt>processing data</dt>
<dd><p>Data frames. Separate data frames containing
calculated variables used in estimation process. The number of processing
tables depends on the input parameters. The tables include: total by
estimation unit (unit.totest); rowvar totals (unit.rowest), colvar totals,
if not NULL (unit.colvar); and a combination of rowvar and colvar, if colvar
is not NULL (unit.grpvar). If sumunits=TRUE, the raw data for the summed
estimation units are also included (totest, rowest, colest, grpest,
respectively).  These tables do not included estimate proportions (nhat and
nhat.var).</p>
<p>The data frames include the following information:</p><table class="table table"><tr><td></td><td><b>Variable</b></td><td><b>Description</b></td></tr><tr><td></td><td>nhat</td><td>estimate proportion of land</td></tr><tr><td></td><td>nhat.var</td><td>variance estimate of estimated proportion of land</td></tr><tr><td></td><td>NBRPLT.gt0</td><td>Number of non-zero plots used in estimates</td></tr><tr><td></td><td>AREA</td><td>total area for estimation unit</td></tr><tr><td></td><td>est</td><td>estimated area of land nhat*areavar</td></tr><tr><td></td><td>est.var</td><td>variance estimate of estimate acres of land 
nhat.var*areavar^2</td></tr><tr><td></td><td>est.se</td><td>standard error of estimated area of land sqrt(est.var)</td></tr><tr><td></td><td>est.cv</td><td>coefficient of variation of estimated area of land est.se/est</td></tr><tr><td></td><td>pse</td><td>percent sampling error of estimate est.cv*100</td></tr><tr><td></td><td>CI99left</td><td>left tail of 99 percent confidence interval for 
estimated area</td></tr><tr><td></td><td>CI99right</td><td>right tail of 99 percent confidence interval for 
estimated area</td></tr><tr><td></td><td>CI95left</td><td>left tail of 95 percent confidence interval for 
estimated area</td></tr><tr><td></td><td>CI95right</td><td>right tail of 95 percent confidence interval for 
estimated area</td></tr><tr><td></td><td>CI67left</td><td>left tail of 67 percent confidence interval for 
estimated area</td></tr><tr><td></td><td>CI67right</td><td>right tail of 67 percent confidence interval for 
estimated area</td></tr></table><p></p></dd>


</dl><p>savedata<br></p>
 

<p>if savedata=TRUE...<br></p>
 

<p>tables with estimate and percent standard error will be written as *csv 
files to outfolder.  if rawdata=TRUE, the rawdata will be output to the 
outfolder in a folder named rawdata (if raw_fmt="csv") or a database in 
the outfolder, if (raw_fmt != "csv").</p>


<p>if outfn.pre is not null...<br></p>
 

<p>a prefix is added to output files if raw_fmt = 'csv', prefix is added to 
file names in rawdata folder if raw_fmt != 'csv', prefix is added to dsn name</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If variables are NULL, then it will prompt user to input variables.</p>
<p>Necessary variables:<br></p><table class="table table"><tr><td></td><td><b>Data</b></td><td><b>Variable</b></td><td><b>Description</b></td></tr><tr><td></td><td>cond</td><td>cuniqueid</td><td>Unique identifier for each plot, to link to pltassgn (ex. PLT_CN).</td></tr><tr><td></td><td></td><td>CONDID</td><td>Unique identifier of each condition on plot.  Set CONDID=1,
if only 1 condition per plot.</td></tr><tr><td></td><td></td><td>CONDPROP_UNADJ</td><td>Unadjusted proportion of condition on each plot. Set CONDPROP_UNADJ=1, if only 1
condition per plot.</td></tr><tr><td></td><td></td><td>COND_STATUS_CD</td><td>Status of each forested condition on plot (i.e. accessible forest, nonforest, water, etc.)</td></tr><tr><td></td><td></td><td>NF_COND_STATUS_CD</td><td>If ACI=TRUE. Status of each nonforest condition
on plot (i.e. accessible nonforest, nonsampled nonforest)</td></tr><tr><td></td><td></td><td>SITECLCD</td><td>If landarea=TIMBERLAND. Measure of site productivity.</td></tr><tr><td></td><td></td><td>RESERVCD</td><td>If landarea=TIMBERLAND. Reserved status.</td></tr><tr><td></td><td>pltassgn</td><td>puniqueid</td><td>Unique identifier for each plot, to link
to cond (e.g., CN).</td></tr><tr><td></td><td></td><td>STATECD</td><td>Identifies state each plot is located in.</td></tr><tr><td></td><td></td><td>INVYR</td><td>Identifies inventory year of each
plot.</td></tr><tr><td></td><td></td><td>PLOT_STATUS_CD</td><td>Status of each plot (i.e. sampled, nonsampled). If not included, all plots are assumed as sampled.</td></tr></table><p>For available reference tables: sort(unique(FIESTAutils::ref_codes$VARIABLE)) <br></p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>ADJUSTMENT FACTOR:<br> The adjustment factor is necessary to account for
nonsampled conditions. It is calculated for each estimation unit by strata
by summing the unadjusted condition proportions (CONDPROP_UNADJ) and
dividing by the number of plots in the strata/estimation unit.</p>
<p>If ACI=FALSE, only nonsampled forest conditions are accounted for in the
adjustment factor. <br> If ACI=TRUE, the nonsampled nonforest conditions are
removed as well and accounted for in adjustment factor. This is if you are
interested in estimates for all lands or nonforest lands in the
All-Condition-Inventory.</p>
<p>STRATA:<br> Stratification is used to reduce variance in population estimates
by partitioning the population into homogenous classes (strata), such as
forest and nonforest. For stratified sampling methods, the strata sizes
(weights) must be either known or estimated. Remotely-sensed data is often
used to generate strata weights with proporation of pixels by strata. If
stratification is desired (strata=TRUE), the required data include: stratum
assignment for the center location of each plot, stored in either pltassgn
or cond; and a look-up table with the area or proportion of the total area
of each strata value by estimation unit, making sure the name of the strata
(and estimation unit) variable and values match the plot assignment name(s)
and value(s).</p>
<p>sumunits:<br> An estimation unit is a population, or area of interest, with
known area and number of plots. Individual counties or combined
Super-counties are common estimation units for FIA. An estimation unit may
also be a subpopulation of a larger population (e.g., Counties within a
State). Subpopulations are mutually exclusive and independent within a
population, therefore estimated totals and variances are additive. For
example, State-level estimates are generated by summing estimates from all
subpopulations within the State (Bechtold and Patterson. 2005. Chapter 2).
Each plot must be assigned to only one estimation unit.</p>
<p>If sumunits=TRUE, estimates are generated by estimation unit, summed
together, and returned as one estimate. If rawdata=TRUE, estimates by
individual estimation unit are also returned.</p>
<p>If sumunits=FALSE, estimates are generated and returned by estimation unit
as one data frame. If savedata=TRUE, a separate file is written for each
estimation unit.</p>
<p>stratcombine:<br> If TRUE and less than 2 plots in any one estimation unit,
all estimation units with 10 or less plots are combined. The current method
for combining is to group the estimation unit with less than 10 plots with
the estimation unit following in consecutive order (numeric or
alphabetical), restrained by survey unit (UNITCD) if included in dataset,
and continuing until the number of plots equals 10. If there are no
estimation units following in order, it is combined with the estimation unit
previous in order.</p>
<p>rowlut/collut:<br> There are several objectives for including rowlut/collut
look-up tables: 1) to include descriptive names that match row/column codes
in the input table; 2) to use number codes that match row/column names in
the input table for ordering rows; 3) to add rows and/or columns with 0
values for consistency. No duplicate names are allowed.</p>
<p>Include 2 columns in the table:<br> 1-the merging variable with same name as
the variable in the input merge table;<br> 2-the ordering or descriptive
variable.<br> If the ordering variable is the rowvar/colvar in the input
table and the descriptive variable is in rowlut/collut, set
row.orderby/col.orderby equal to rowvar/colvar. If the descriptive variable
is the rowvar/colvar in the input table, and the ordering code variable is
in rowlut/collut, set row.orderby/col.orderby equal to the variable name of
the code variable in rowlut/collut.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Scott, Charles T.; Bechtold, William A.; Reams, Gregory A.;
Smith, William D.; Westfall, James A.; Hansen, Mark H.; Moisen, Gretchen G.
2005. Sample-based estimators used by the Forest Inventory and Analysis
national information management system. Gen. Tech. Rep. SRS-80.  Asheville,
NC: U.S. Department of Agriculture, Forest Service, Southern Research
Station, p.53-77.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Tracey S. Frescino, Paul L. Patterson, Elizabeth A. Freeman</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White, Joshua Yamamoto.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

