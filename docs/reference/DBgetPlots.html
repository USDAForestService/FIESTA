<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Database - Extracts inventory plot data from FIA DataMart. — DBgetPlots • FIESTA</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Database - Extracts inventory plot data from FIA DataMart. — DBgetPlots"><meta property="og:description" content="Extracts data from FIA's online publicly-available DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Database - Extracts inventory plot data from FIA DataMart.</h1>
    
    <div class="hidden name"><code>DBgetPlots.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extracts data from FIA's online publicly-available DataMart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">DBgetPlots</span><span class="op">(</span>
  states <span class="op">=</span> <span class="cn">NULL</span>,
  datsource <span class="op">=</span> <span class="st">"datamart"</span>,
  data_dsn <span class="op">=</span> <span class="cn">NULL</span>,
  RS <span class="op">=</span> <span class="cn">NULL</span>,
  invtype <span class="op">=</span> <span class="st">"ANNUAL"</span>,
  evalid <span class="op">=</span> <span class="cn">NULL</span>,
  evalCur <span class="op">=</span> <span class="cn">FALSE</span>,
  evalEndyr <span class="op">=</span> <span class="cn">NULL</span>,
  evalAll <span class="op">=</span> <span class="cn">FALSE</span>,
  evalType <span class="op">=</span> <span class="st">"VOL"</span>,
  measCur <span class="op">=</span> <span class="cn">FALSE</span>,
  measEndyr <span class="op">=</span> <span class="cn">NULL</span>,
  allyrs <span class="op">=</span> <span class="cn">FALSE</span>,
  invyrs <span class="op">=</span> <span class="cn">NULL</span>,
  measyrs <span class="op">=</span> <span class="cn">NULL</span>,
  getxy <span class="op">=</span> <span class="cn">TRUE</span>,
  xymeasCur <span class="op">=</span> <span class="cn">FALSE</span>,
  istree <span class="op">=</span> <span class="cn">FALSE</span>,
  isseed <span class="op">=</span> <span class="cn">FALSE</span>,
  isveg <span class="op">=</span> <span class="cn">FALSE</span>,
  issubp <span class="op">=</span> <span class="cn">FALSE</span>,
  islulc <span class="op">=</span> <span class="cn">FALSE</span>,
  isdwm <span class="op">=</span> <span class="cn">FALSE</span>,
  plotgeom <span class="op">=</span> <span class="cn">FALSE</span>,
  othertables <span class="op">=</span> <span class="cn">NULL</span>,
  issp <span class="op">=</span> <span class="cn">FALSE</span>,
  spcond <span class="op">=</span> <span class="cn">FALSE</span>,
  spcondid1 <span class="op">=</span> <span class="cn">FALSE</span>,
  defaultVars <span class="op">=</span> <span class="cn">TRUE</span>,
  regionVars <span class="op">=</span> <span class="cn">FALSE</span>,
  regionVarsRS <span class="op">=</span> <span class="st">"RMRS"</span>,
  ACI <span class="op">=</span> <span class="cn">FALSE</span>,
  subcycle99 <span class="op">=</span> <span class="cn">FALSE</span>,
  intensity1 <span class="op">=</span> <span class="cn">FALSE</span>,
  stateFilter <span class="op">=</span> <span class="cn">NULL</span>,
  allFilter <span class="op">=</span> <span class="cn">NULL</span>,
  alltFilter <span class="op">=</span> <span class="cn">NULL</span>,
  returndata <span class="op">=</span> <span class="cn">TRUE</span>,
  savedata <span class="op">=</span> <span class="cn">FALSE</span>,
  saveqry <span class="op">=</span> <span class="cn">FALSE</span>,
  savePOP <span class="op">=</span> <span class="cn">FALSE</span>,
  savedata_opts <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>states</dt>
<dd><p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p></dd>
<dt>datsource</dt>
<dd><p>String. Source of data ('datamart', 'sqlite').</p></dd>
<dt>data_dsn</dt>
<dd><p>String. If datsource='sqlite', the name of SQLite database
(*.sqlite).</p></dd>
<dt>RS</dt>
<dd><p>String vector. Name of research station(s) to get public XY
coordinates for ('RMRS','SRS','NCRS','NERS','PNWRS'). Do not use if states 
is populated. See FIESTA::ref_statecd for reference to RS and states.</p></dd>
<dt>invtype</dt>
<dd><p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p></dd>
<dt>evalid</dt>
<dd><p>Integer. Inventory span defining variable. Extract data for a
specific FIA Evaluation (See details for more information about FIA
Evaluations).</p></dd>
<dt>evalCur</dt>
<dd><p>Logical. Inventory span defining variable. If TRUE, extract
data for the most current FIA Evaluation for each state.</p></dd>
<dt>evalEndyr</dt>
<dd><p>YYYY. Inventory span defining variable. Extract data for
the FIA Evaluation(s) ending in the specified evalEndyr(s). If more than one
state and different Evaluations by state are desired, input a named list</p></dd>
<dt>evalAll</dt>
<dd><p>Logical. Inventory span defining variable. If TRUE, extract
data for all FIA Evaluations for each state.</p></dd>
<dt>evalType</dt>
<dd><p>String vector. The type(s) of FIA Evaluation of interest 
('ALL', 'CURR', 'VOL', 'GRM', 'P2VEG', 'DWM", 'INV', 'REGEN', 'CRWN'). 
The evalType 'ALL' includes nonsampled plots; 'CURR' includes plots used 
for area estimates; 'VOL' includes plots used for area and/or tree estimates;
'GRM' includes plots used for growth, removals, mortality, and
change estimates (evalType <!-- %in% c(GROW, MORT, REMV, CHNG)).  Multiple types -->
are accepted. See details below and FIA database manual for regional
availability and/or differences. Note: do not use if EVALID is specified.</p></dd>
<dt>measCur</dt>
<dd><p>Logical. Inventory span defining variable. If TRUE, extract
plots with most current sampled measurement for state(s).</p></dd>
<dt>measEndyr</dt>
<dd><p>Logical. Inventory span defining variable. If TRUE, extract
plots with most current sampled measurement for state(s) for years measured 
in or before measEndyr.</p></dd>
<dt>allyrs</dt>
<dd><p>Logical. Inventory span defining variable. If TRUE, extract
all annual inventory years in database for each state.</p></dd>
<dt>invyrs</dt>
<dd><p>YYYY vector. Inventory span defining variable. Extract data by
state for the specified inventory year(s) (e.g., c(2000, 2001, 2002)). If
more than one state and different inventory years are desired, input a named
list object with years labeled by state (e.g., list(Utah=2000:2009,
Colorado=c(2002,2003,2005)).</p></dd>
<dt>measyrs</dt>
<dd><p>YYYY vector. Measurement year span defining variable. Extract
data by state for the specified measurement year(s) (e.g., c(2000, 2001,
2002)). If more than one state and different measurement years are desired,
input a named list object with years labeled by state (e.g.,
list(Utah=2000:2009, Colorado=c(2002,2003,2005)).</p></dd>
<dt>getxy</dt>
<dd><p>Logical. If TRUE, gets separate XY table.</p></dd>
<dt>xymeasCur</dt>
<dd><p>Logical. If TRUE, include XY coordinates from the most 
current sampled measurement of each plot.</p></dd>
<dt>istree</dt>
<dd><p>Logical. If TRUE, tree data are extracted from TREE table in
database.</p></dd>
<dt>isseed</dt>
<dd><p>Logical. If TRUE, seedling data are extracted from SEEDLING
table in database.</p></dd>
<dt>isveg</dt>
<dd><p>Logical. If TRUE, understory vegetation tables are extracted
from FIA database (P2VEG_SUBPLOT_SPP, P2VEG_SUBP_STRUCTURE, INVASIVE_SUBPLOT_SPP).</p></dd>
<dt>issubp</dt>
<dd><p>Logical. If TRUE, subplot tables are extracted from FIA
database (SUBPLOT, SUBP_COND).</p></dd>
<dt>islulc</dt>
<dd><p>Logical. If TRUE, condition-level land use/land cover data are
for current and previous years are extracted from FIA database.</p></dd>
<dt>isdwm</dt>
<dd><p>Logical. If TRUE, summarized condition-level down woody debris
data are extracted from FIA database (COND_DWM_CALC).</p></dd>
<dt>plotgeom</dt>
<dd><p>Logical. If TRUE, variables from the PLOTGEOM table are
appended to the plot table.</p></dd>
<dt>othertables</dt>
<dd><p>String Vector. Name of other table(s) in FIADB to include
in output. The table must have PLT_CN as unique identifier of a plot.</p></dd>
<dt>issp</dt>
<dd><p>Logical. If TRUE, an sf spatial object is generated from the
public X/Y coordinates in the plot table.</p></dd>
<dt>spcond</dt>
<dd><p>Logical. If TRUE, a set of condition-level attributes (e.g.,
FORTYPCD) represented at the plot-level are extracted from FIA DataMart COND
table.  (See Notes for more info on how condition attributes were added).</p></dd>
<dt>spcondid1</dt>
<dd><p>Logical. If TRUE and issp=TRUE and spcond=TRUE, condition
variables are determined by condition 1 attributes. If FALSE, an algorithm
is used to select the condition to use (See details for alorithm used).</p></dd>
<dt>defaultVars</dt>
<dd><p>Logical. If TRUE, a set of default variables are selected
in query.  See notes for variable descriptions.</p></dd>
<dt>regionVars</dt>
<dd><p>Logical. If TRUE, regional variables are included in query
(e.g., SDI_RMRS, SDIPCT_RMRS, SDIMAX_RMRS, QMD_RMRS).</p></dd>
<dt>regionVarsRS</dt>
<dd><p>String. Region for regionVars
('RMRS','SRS','NCRS','NERS','PNWRS').</p></dd>
<dt>ACI</dt>
<dd><p>Logical. If TRUE, the data from All Condition Inventories (ACI)
are included in dataset (NF_SAMPLING_STATUS_CD = 1). See below for more
details.</p></dd>
<dt>subcycle99</dt>
<dd><p>Logical. If TRUE, excludes plots with SUBCYCLE = 99. These
plots are plots that are measured more than once and are not included in the
estimation process.</p></dd>
<dt>intensity1</dt>
<dd><p>Logical. If TRUE, includes only plots where INTENSITY = 1.</p></dd>
<dt>stateFilter</dt>
<dd><p>Character string or Named list. Logical statement to use
as plot and filter in sql query. Must include plot alias ('p.') and be sql
syntax (e.g., 'p.COUNTYCD = 1'). If more than 1 state, stateFilter must be a
named list with names as state(s) (e.g., list(Utah='p.COUNTYCD = 1').</p></dd>
<dt>allFilter</dt>
<dd><p>String. An overall filter for plot or condition data in all
states in query. The expression must be R syntax (e.g., 'PLOT_STATUS_CD ==
1').</p></dd>
<dt>alltFilter</dt>
<dd><p>String. If istree=TRUE, an overall filter for tree data in
all states (e.g., only Whitebark pine trees - 'SPCD == 101'). Note: returns
only plots with trees included in filter.</p></dd>
<dt>returndata</dt>
<dd><p>Logical. If TRUE, returns data objects.</p></dd>
<dt>savedata</dt>
<dd><p>Logical. If TRUE, saves data to outfolder as comma-delimited
file (*.csv).  No objects are returned. If FALSE, the data are saved as R
objects and returned to user.  See details for caveats.</p></dd>
<dt>saveqry</dt>
<dd><p>Logical. If TRUE, saves queries to outfolder (by state).</p></dd>
<dt>savePOP</dt>
<dd><p>Logical. If TRUE, save and return the POP_PLOT_STRATUM_ASSGN
table.</p></dd>
<dt>savedata_opts</dt>
<dd><p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE. If out_layer = NULL,</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>if returndata=TRUE, a list of the following objects:</p>
<dl><dt>states</dt>
<dd><p>Vector. Input state(s) (full state names: Arizona).</p></dd>
<dt>tabs</dt>
<dd><p>List. A list of data frames from FIA database, including 
plt and cond; and tree (if istree=TRUE); seed (if isseed=TRUE), vsubpspp,
vsubpstr, and invsubp (if isveg=TRUE), lulc (if islulc=TRUE). See below 
'Output Tables - FIA Table Names' for reference to FIA database tables. 
See FIESTA:ref_* for variable descriptions (e.g., FIESTA::ref_tree). 
If istree and the number of states &gt; 3, tree data are saved to outfolder 
and not returned to accommodate R memory issues.</p></dd>
<dt>xy*_PUBLIC</dt>
<dd><p>Data frame. XY data from FIA's public database. If 
measCur=TRUE, named xyCur_PUBLIC, else named xy_PUBLIC. The data frame 
has 10 columns ('PLT_CN', 'LON_PUBLIC', 'LAT_PUBLIC', 'STATECD', 'UNITCD',
'COUNTYCD', 'PLOT', 'INTENSITY', 'PLOT_ID' (ID+STATECD+UNTCD+COUNTYCD+PLOT), 
'COUNTYFIPS'. If issp=TRUE, returns an sf object.</p></dd>
<dt>spconddat</dt>
<dd><p>If spcond=TRUE, the condition variables representing 
each plot for spatial display. For plots with multiple conditions, 
the selected condition is based on CONDID=1 (if spcondid1=TRUE) or a 
set if criteria defined in Details - spcond (if spcondid1=FALSE).</p></dd>
<dt>evalid</dt>
<dd><p>Number. If evalCur=TRUE or evalEndyr is not NULL, the
Evalidation ID from the FIA database used to define the output data.</p></dd>
<dt>pltcnt</dt>
<dd><p>Data frame. Number of plots (NBRPLOTS) by state, cycle, 
inventory year, and plot status.</p></dd>
<dt>pop_plot_stratum_assgn</dt>
<dd><p>Data frame. If savePOP=TRUE, and FIA Evaluations
are used to extract data from database, return the POP_PLOT_STRATUM_ASSGN
table or, if more than one evalType and savePOP=FALSE. If more than one
evalType, only the records for the evalTypes are returned, otherwise all
evalTypes for the state evaluation are returned.</p></dd>
</dl><p>*Output Tables - FIA Table Names*<br></p><table class="table table"><tr><td></td><td><b>tab</b></td><td><b>FIA Table</b></td></tr><tr><td></td><td>plt</td><td>plot</td></tr><tr><td></td><td>cond</td><td>cond</td></tr><tr><td></td><td>tree</td><td>tree</td></tr><tr><td></td><td>vsubpspp</td><td>P2VEG_SUBPLOT_SPP</td></tr><tr><td></td><td>vsubpstr</td><td>P2VEG_SUBP_STRUCTURE</td></tr><tr><td></td><td>invsubp</td><td>INVASIVE_SUBPLOT_SPP</td></tr><tr><td></td><td>subplot</td><td>SUBPLOT</td></tr><tr><td></td><td>subp_cond</td><td>SUBP_COND</td></tr><tr><td></td><td>dwm</td><td>COND_DWM_CALC</td></tr><tr><td></td><td>grm</td><td>TREE_GRM_COMPONENT</td></tr><tr><td></td><td>issccm</td><td>SUBP_COND_CHNG_MTRX</td></tr></table><p>#' Outputs to outfolder (if savedata=TRUE):</p><table class="table table"><tr><td></td><td>- If saveqry=TRUE, text file(s) of SQL queries used to extract data 
from database (_.txt). Note: one query is used for extracting both plt
and cond (pltcondqry*.txt).</td></tr><tr><td></td><td>- CSV file of plot and condition counts (pltcnt*.txt).</td></tr><tr><td></td><td>- Layers in a database or CSV files of output tables.</td></tr><tr><td></td><td>- If issp=TRUE, a feature class or ESRI shapefile of plot-level 
level attributes. If shapefile (.shp), variable names are truncated to 
10 characters or less. See notes for more info.</td></tr><tr><td></td><td>- If issp=TRUE and out_fmt='sqlite', the SQLite data is SpatiaLite.</td></tr></table><p>To deal with limitations of R object size and/or computer memory issues, if
istree=TRUE and more than three states are desired, the tree data are saved
to a CSV file, with no tree data object returned. <br></p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><b>FIA forest land definition</b></p>
<p><em>Current</em><br> Forested plots include plots with &gt;= 10 percent cover (or
equivalent stocking) by live trees of any size, including land that formerly
had such tree cover and that will be naturally or artificially regenerated.
To qualify, the area must be &gt;= 1.0 acre in size and 120.0 feet wide (See
Burrill et al. 2018).</p>
<p>*ACI (All Condition Inventory)*<br> RMRS National Forest plots. For nonforest
conditions that have been visited in the field (NF_SAMPLING_STATUS_CD = 1),
if trees exist on the condition, the data exist in the tree table. If you do
not want these trees included, ACI=FALSE. This will filter the data to only
forested conditions (COND_STATUS_CD = 1)</p>
<p>*Nevada*<br> In 2016, the population area of Nevada changed to exclude the
large restricted area owned by Department of Defense (Area 51) from the
sample. Prior to 2016, the plots within this area were observed using aerial
photos and if they were definitely nonforest the plots were entered in the
database with nonforest information.  If they were observed as forested or
potentially forested, they were given a PLOT_STATUS_CD=3 because they were
Denied Access. From 2016 on, all plots within this area are removed from the
sample, and thus, removed from database.</p>
<p><b>FIA DataMart Data</b></p>
<p>FIA data available on FIA DataMart include the following information.<br></p><table class="table table"><tr><td></td><td>- the PLOT variable is renumbered.</td></tr><tr><td></td><td>- the LON/LAT coordinates are fuzzed &amp; swapped.</td></tr><tr><td></td><td>- the OWNERCD variable is based on fuzzed &amp; swapped locations.</td></tr><tr><td></td><td>- ECOSUBCD, CONGCD, ELEV, and EMAP_HEX are GIS-extracted values 
based on fuzzed &amp; swapped locations.</td></tr><tr><td></td><td>- For annual data, forested plots represent the current definition 
of &gt;= 10 percent cover...</td></tr><tr><td></td><td>- For periodic data, forested plots are defined by a definition 
of Other Wooded Land (OWL), including &gt;= 5 percent cover...</td></tr></table><p>*FIADB Table Extraction*<br></p><table class="table table"><tr><td></td><td><b>Argument</b></td><td><b>Table Name(s)</b></td></tr><tr><td></td><td>istree</td><td>TREE</td></tr><tr><td></td><td>isveg</td><td>P2VEG_SUBPLOT_SPP, P2VEG_SUBP_STRUCTURE, INVASIVE_SUBPLOT_SPP</td></tr><tr><td></td><td>issubp</td><td>SUBPLOT, SUBP_COND</td></tr><tr><td></td><td>isdwm</td><td>COND_DWM_CALC</td></tr><tr><td></td><td>isgrm</td><td>TREE_GRM_COMPONENT</td></tr><tr><td></td><td>issccm</td><td>SUBP_COND_CHNG_MTRX</td></tr></table><p><b>FIA Evaluations</b></p>
<p>An evaluation is a group of plots within the FIA database that is used for
generating population estimates, representing different inventory spans of
data with different stratification or area adjustments. Each evaluation is
determined by the type of estimation (evalType) including: area and tree
estimates; growth, removal, and mortality estimates; and area change
estimates (EVAL_TYPE). These plots are identified by an evalid, which is a
unique identifier in the format of a 2-digit State code, a 2-digit year
code, and a 2-digit evaluation type code. For example, EVALID '491601'
represents the Utah 2016 evaluation for current area estimates.</p>
<p><b>FIA Evaluation Types</b></p>
<p>Define one or more Evaluation Type for evalCur=TRUE or evalEndyr=YYYY. An
Evaluation type is used to identify a specific set of plots for a particular
response that can be used to a make a statistically valid sample-based
estimate. If evalType="ALL", the evaluation includes all sampled and
nonsampled plots or plots that were missed in an inventory year.</p>
<p>Regional differences may occur on how missed plots are represented in a FIA
Evaluation.  For example, RMRS Evaluations are static; missed plots are
included in an Evaluation as nonsampled, and when measured, are included in
a following Evaluation.  Therefore, the number of nonsampled plots in
previous Evaluations may change, depending on when missed plot are measured.
In the PNW Research Station, plots are brought forward to replace missed
plots in an evaluation, depending on the evalType.</p>
<p>EVAL_TYP<br></p><table class="table table"><tr><td></td><td><b>EVALIDCD</b></td><td><b>EVAL_TYP</b></td><td><b>Description</b></td></tr><tr><td></td><td>00</td><td>EXPALL</td><td>All area</td></tr><tr><td></td><td>01</td><td>EXPVOL/EXPCURR</td><td>Area/Volume</td></tr><tr><td></td><td>03</td><td>EXPCHNG/EXPGROW/EXPMORT/EXPREMV</td><td>Area Change/GRM</td></tr><tr><td></td><td>07</td><td>EXPDWM</td><td>DWM</td></tr><tr><td></td><td>08</td><td>EXPREGEN</td><td>Regeneration</td></tr><tr><td></td><td>09</td><td>EXPINV</td><td>Invasive</td></tr><tr><td></td><td>10</td><td>EXPP2VEG</td><td>Veg profile</td></tr><tr><td></td><td>12</td><td>EXPCRWN</td><td>Crown</td></tr></table><p><b>Inventory span defining variables</b></p>
<p>Data can be extracted using FIA Evaluations or a custom-defined Evaluation
for one or more states, one or more FIA Research Stations (RS), or all
available states in database (states=NULL, RS=NULL).</p>
<p>*FIA Evaluation*<br></p><table class="table table"><tr><td></td><td><b>Argument</b></td><td><b>Description</b></td></tr><tr><td></td><td>EVALID</td><td>Specified FIA EVALID (e.g., 491801)</td></tr><tr><td></td><td>evalCur</td><td>Most current FIA Evaluation</td></tr><tr><td></td><td>evalEndyr</td><td>End year of an FIA Evaluation (e.g., 2018)</td></tr><tr><td></td><td>evalAll</td><td>All evaluations in database</td></tr><tr><td></td><td>evalType</td><td>Type of FIA Evaluation (response)</td></tr></table><p>*Custom evaluation*<br></p><table class="table table"><tr><td></td><td><b>Argument</b></td><td><b>Description</b></td></tr><tr><td></td><td>measCur</td><td>Most current measurement of plot in database</td></tr><tr><td></td><td>measEndyr</td><td>Most current measurement of plot in database in or 
before year</td></tr><tr><td></td><td>allyrs</td><td>All years for invtype (ANNUAL/PERIODIC)</td></tr><tr><td></td><td>invyrs</td><td>Specified inventory years (e.g., 2015:2018)</td></tr></table><p><b>Spatial data</b></p>
<p>If issp=TRUE, an sf spatial object of plot-level attributes is generated
from public coordinates, with NAD83 Geographic Coordinate Reference System.</p>
<p>*Exporting*<br> If savedata=TRUE and out_fmt="shp", the spatial object is
exported to the outfolder using the ESRI Shapefile driver. The driver
truncates variable names to 10 characters or less. Variable names are
changed using an internal function.  The name changes are written to a csv
file and saved to the outfolder (shpfile_newnames.csv).</p>
<p>*spcond*<br> Only one condition per plot is used for spatial representation
of condition attributes. IF CONDID1=TRUE, condition 1 is selected. If
CONDID1=FALSE, the condition is selected based on the following criteria. A
column named CONDMETHOD is added to the attribute table to show the method
and steps used, identified by the abbreviation in parentheses.</p>
<table class="table table"><tr><td></td><td>(1) minimum COND_STATUS_CD (_ST)</td></tr><tr><td></td><td>(2) maximum condition proportion (_CP)</td></tr><tr><td></td><td>(3) maximum live_canopy_cvr_pct (_CC)</td></tr><tr><td></td><td>(4) minimum STDSZCD (_SZ)</td></tr><tr><td></td><td>(5) minimum CONDID (_C1)</td></tr></table><p><b>Derived Variables</b></p>
<p>If defaultVars=TRUE, the following derived variables are calculated after
extracting data from the FIA database.</p>
<p>Plot-level variables:<br></p><table class="table table"><tr><td></td><td>NBRCND - Number of conditions on plot, including nonsampled conditions 
(COND_STATUS_CD = 5)</td></tr><tr><td></td><td>NBRCNDSAMP - Number of sampled conditions on plot.</td></tr><tr><td></td><td>NBRCNDFOR - Number of sampled forested conditions on plot.</td></tr><tr><td></td><td>NBRCNDFTYP - Number of sampled forested conditions with different 
forest types on plot.</td></tr><tr><td></td><td>NBRCNDFGRP - Number of sampled forested conditions with different forest
type groups on plot.</td></tr><tr><td></td><td>CCLIVEPLT - Percent live canopy cover of condition aggregated to plot-level 
(LIVE_CANOPY_CVR_PCT * CONDPROP_UNADJ).</td></tr><tr><td></td><td>PLOT_ID - Unique Identifier for a plot ('ID' + STATECD(2) + UNITCD(2) + 
COUNTYCD(3) + PLOT(5)).  This variable can be used to identify multiple records 
for each measurement of plot.</td></tr></table><p>Condition-level variables:<br></p><table class="table table"><tr><td></td><td>FORTYPGRP - TYPGRPCD merged to FORTYPCD</td></tr><tr><td></td><td>FLDTYPGRP - TYPGRPCD merged to FLDTYPCD</td></tr><tr><td></td><td>FORNONSAMP - Combination of PLOT_STATUS_CD and PLOT_NONSAMPLE_REASN_CD</td></tr><tr><td></td><td>QMD - Quadratic Mean Diameter</td></tr></table><p>Tree-level variables:<br></p><table class="table table"><tr><td></td><td>BA - the basal area of a tree (BA = DIA * DIA * 0.005454)</td></tr></table><table class="table table"><tr><td></td><td>TREE AGE Notes:</td></tr><tr><td></td><td>- Available for live timber and woodland trees in the following states: 
AZ,CO,ID,MT,NV,UT,OR,WA.</td></tr><tr><td></td><td>- BHAGE - Breast height age (4.5' above ground) of timber trees.</td></tr><tr><td></td><td>- PNW - one tree is sampled for each species, within each crown class, 
and for each condition class present on plot. Age of saplings (&lt;5.0" DIA) 
may be aged by counting branch whorls above 4.5ft. No timber hardwood species 
other than red alder are bored for age.</td></tr><tr><td></td><td>- RMRS - one tree is sampled for each species and broad diameter 
class present on plot.</td></tr></table><table class="table table"><tr><td></td><td>DRYBIO Notes:</td></tr><tr><td></td><td>DRYBIO_AG - Aboveground oven-dry biomass, in pounds (DRYBIO_AG = 
(DRYBIO_BOLE + DRYBIO_STUMP + DRYBIO_TOP + DRYBIO_SAPLING + DRYBIO_WDLD_SPP).</td></tr><tr><td></td><td>- Available for both timber and woodland species, live trees &gt;= 1.0" 
DIA and dead trees &gt;= 5.0" DIA. Summed dry biomass of the top, bole, and 
stump of a tree, excluding foliage based on component ratio method 
(Heath and others, 2009).</td></tr><tr><td></td><td>- DRYBIO_BOLE - dry biomass of sound wood in live and dead trees, 
including bark, from a 1-foot stump to a min 4-inch top DIA of central stem 
(Calculated for timber trees &gt;= 5.0" DIA).</td></tr><tr><td></td><td>- DRYBIO_STUMP - dry biomass in the tree stump, including the portion 
of the tree from the ground to the bottom of merchantable bole, 1-foot 
(Calculated for live and dead trees &gt;= 5.0" DIA).</td></tr><tr><td></td><td>- DRYBIO_TOP - dry biomass in the top of the tree, including the 
portion of the tree above merchantable bole, 4-inch top, and all branches, 
excludes foliage (Calculated for live and dead trees &gt;= 5.0" DIA).</td></tr><tr><td></td><td>- DRYBIO_SAPLING - dry biomass of saplings, including aboveground 
portion, excluding foliage, of live timber trees &gt;=1.0" and &lt;5.0" DIA.</td></tr><tr><td></td><td>- DRYBIO_WDLD_SPP - dry biomass of woodland trees, live or dead, 
including the aboveground portion, excluding foliage, the top of
the tree above 1.5" DIA, and a portion of the stump from ground to DRC
(Calculated for woodland trees &gt;= 1.0" DIA.</td></tr></table><p>ABOVEGROUND CARBON ESTIMATES (IN POUNDS)<br> 
Available for both timber and woodland species, live trees &gt;= 1.0" DIA 
and dead trees &gt;= 5.0" DIA. Calculated as 1/2 of the aboveground 
estimates of biomass: <br> CARBON_AG = 0.5 * (DRYBIO_AG)</p>
<p>TREE AGE DATA ONLY IN FOR ("AZ", "CO", "ID", "MT", "NV", "UT") <br> 
FMORTCFAL includes trees &gt;= 5.0" DIA and greater and is not populated 
for states("CA", "OR", "WA", "OK") <br> Mortality variables only 
available in: AZ, CO, ID, MT, NV, NM, UT, WY, ND, SD, NE, KS, OK.</p>
<p><b>TPA</b> If TPA=TRUE and istree=TRUE or isseed=TRUE, the following
tree/seedling variables are multiplied by trees-per-acre (TPA_UNADJ).
TPA_UNADJ is set to a constant derived from the plot size and equals
6.018046 for trees sampled on subplots, 74.965282 for trees sampled on
microplots, and 0.999188 for trees sampled on macroplots. Variable-radius
plots were often used in earlier inventories, so the value in TPA_UNADJ
decreases as the tree diameter increases (FIADB User Guide)</p>
<p>Variables: VOLCFNET, VOLCFGRS, GROWCFGS, GROWCFAL, FGROWCFGS, FGROWCFAL,
MORTCFGS, MORTCFAL, FMORTCFGS, FMORTCFAL, REMVCFGS, REMVCFAL, FREMVCFGS,
FREMVCFAL, DRYBIO_BOLE, DRYBIO_STUMP, DRYBIO_TOP, DRYBIO_SAPLING,
DRYBIO_WDLD_SPP, DRYBIO_BG, CARBON_BG, CARBON_AG</p>
<p><b>MISC</b></p>
<p>For regions outside RMRS, there is no OWNCD attached to nonforest lands.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>If no parameters are included, the user is prompted for input. If partial
parameters, the default parameter values are used for those not specified.</p>
<p><b>Data Access</b> All data are downloaded from FIA's publicly-available
online Datamart
(https://apps.fs.usda.gov/fia/datamart/CSV/datamart_csv.html).</p>
<p>Because of FIA's confidentiality agreement to protect the privacy of
landowners as well as protecting the scientific integrity of FIA's sample
design, the exact coordinates of the sample plot locations are not included.
The X/Y coordinates (LON_PUBLIC/LAT_PUBLIC) for download are perturbed up to
a mile from the original location
(https://www.fia.fs.fed.us/tools-data/spatial/Policy/index.php).  If the
exact location of the plots are necessary for your analysis, contact FIA's
Spatial Data Services
(https://www.fia.fs.fed.us/tools-data/spatial/index.php).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>DeBlander, Larry T.; Shaw, John D.; Witt, Chris; Menlove, Jim;
Thompson, Michael T.; Morgan, Todd A.; DeRose, R. Justin; Amacher, Michael,
C. 2010. Utah's forest resources, 2000-2005. Resour. Bull. RMRS-RB-10. Fort
Collins, CO; U.S. Department of Agriculture, Forest Service, Rocky Mountain
Research Station. 144 p.</p>
<p>Heath, L.S.; Hansen, M. H.; Smith, J.E. [and others]. 2009. Investigation
into calculating tree biomass and carbon in the FIADB using a biomass
expansion factor approach. In: Forest Inventory and Analysis (FIA) Symposium
2008. RMRS-P-56CD. Fort Collins, CO: U.S. Department of Agriculture, Forest
Service, Rocky Mountain Research Station. 1 CD.</p>
<p>Burrill, E.A., Wilson, A.M., Turner, J.A., Pugh, S.A., Menlove, J.,
Christiansen, G., Conkling, B.L., Winnie, D., 2018. Forest Inventory and
Analysis Database [WWW Document].  St Paul MN US Dep. Agric. For. Serv.
North. Res. Stn.  URL http://apps.fs.fed.us/fiadb-downloads/datamart.html
(accessed 3.6.21).</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Tracey S. Frescino</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Extract the most current evaluation of data for Utah</span></span>
<span class="r-in"><span class="va">UTdat</span> <span class="op">&lt;-</span> <span class="fu">DBgetPlots</span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Utah"</span>, </span>
<span class="r-in">                    evalCur <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">UTdat</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">UTdat</span><span class="op">$</span><span class="va">plt</span><span class="op">)</span></span>
<span class="r-in"><span class="va">UTdat</span><span class="op">$</span><span class="va">pltcnt</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Look at number of plots by inventory year</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">UTdat</span><span class="op">$</span><span class="va">plt</span><span class="op">$</span><span class="va">INVYR</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Note: see FIESTA::ref_plt and FIESTA::ref_cond for variable descriptions</span></span>
<span class="r-in"><span class="co"># Or consult FIA Database documentation</span></span>
<span class="r-in"><span class="co"># \link{https://www.fia.fs.fed.us/library/database-documentation/index.php}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Extract specified inventory years 2012:2014 and spatial information</span></span>
<span class="r-in"><span class="va">UTdat2</span> <span class="op">&lt;-</span> <span class="fu">DBgetPlots</span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Utah"</span>,</span>
<span class="r-in">                     invyrs <span class="op">=</span> <span class="fl">2012</span><span class="op">:</span><span class="fl">2014</span>, </span>
<span class="r-in">                     issp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">UTdat2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">UTdat2</span><span class="op">$</span><span class="va">pltcnt</span></span>
<span class="r-in"><span class="va">UTdat2</span><span class="op">$</span><span class="va">spxy_PUBLIC</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Extract and display plots with aspen forest type</span></span>
<span class="r-in"><span class="va">UTdat3</span> <span class="op">&lt;-</span> <span class="fu">DBgetPlots</span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Utah"</span>,</span>
<span class="r-in">                     invyrs <span class="op">=</span> <span class="fl">2012</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span class="r-in">                     issp <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">                     allFilter <span class="op">=</span> <span class="st">"FORTYPCD == 901"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">UTdat3</span><span class="op">)</span></span>
<span class="r-in"><span class="va">UTdat3</span><span class="op">$</span><span class="va">pltcnt</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="stunitco.html">stunitco</a></span><span class="op">[</span><span class="fu">FIESTA</span><span class="fu">::</span><span class="va"><a href="stunitco.html">stunitco</a></span><span class="op">$</span><span class="va">STATENM</span> <span class="op">==</span> <span class="st">"Utah"</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span class="r-in">                     border <span class="op">=</span> <span class="st">"light grey"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">UTdat3</span><span class="op">$</span><span class="va">xy_PUBLIC</span><span class="op">)</span>, add<span class="op">=</span><span class="cn">TRUE</span>, pch<span class="op">=</span><span class="fl">18</span>, cex<span class="op">=</span><span class="fl">.5</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

