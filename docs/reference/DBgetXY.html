<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Database - Extracts plot coordinates. — DBgetXY • FIESTA</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Database - Extracts plot coordinates. — DBgetXY"><meta property="og:description" content="Extracts public plot coordinates for an FIA evaluation or a custom 
evaluation. Plots are extracted from FIA's public Datamart 
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIESTA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.5.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/FIESTA_manual_mod_est.html">`FIESTA` Manual - Module Estimates</a>
    </li>
    <li>
      <a href="../articles/FIESTA_manual_mod_pop.html">`FIESTA` Manual - Population Data</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_DB.html">FIESTA - Database Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_GB.html">FIESTA - Green-book Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_MA.html">FIESTA - Model-Assisted Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_PB.html">FIESTA - Photo-Based Module</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_SA.html">FIESTA - Small Area Estimators</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_dat.html">FIESTA - Data Tools</a>
    </li>
    <li>
      <a href="../articles/FIESTA_tutorial_sp.html">FIESTA - Spatial Tools</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Database - Extracts plot coordinates.</h1>
    
    <div class="hidden name"><code>DBgetXY.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extracts public plot coordinates for an FIA evaluation or a custom 
evaluation. Plots are extracted from FIA's public Datamart 
(https://apps.fs.usda.gov/fia/datamart/datamart.html) or other defined
datasource.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">DBgetXY</span><span class="op">(</span></span>
<span>  states <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  RS <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xy_datsource <span class="op">=</span> <span class="st">"datamart"</span>,</span>
<span>  xy_dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xy <span class="op">=</span> <span class="st">"PLOT"</span>,</span>
<span>  xy_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/xy_options.html" class="external-link">xy_options</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  datsource <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_dsn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbTabs <span class="op">=</span> <span class="fu"><a href="dbTables.html">dbTables</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  pjoinid <span class="op">=</span> <span class="st">"CN"</span>,</span>
<span>  eval <span class="op">=</span> <span class="st">"FIA"</span>,</span>
<span>  eval_opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  invtype <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>  coordType <span class="op">=</span> <span class="st">"PUBLIC"</span>,</span>
<span>  intensity1 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  pvars2keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  issp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  returndata <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  savedata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  exportsp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  savedata_opts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  PLOT <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  POP_PLOT_STRATUM_ASSGN <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  SURVEY <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dbconnopen <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  evalInfo <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>states</dt>
<dd><p>String or numeric vector. Name (e.g., 'Arizona','New Mexico')
or code (e.g., 4, 35) of state(s) for evalid. If all states in one or more
FIA Research Station is desired, set states=NULL and use RS argument to
define RS.</p></dd>


<dt>RS</dt>
<dd><p>String vector. Name of research station(s) to get public XY
coordinates for ('RMRS','SRS','NCRS','NERS','PNWRS'). Do not use if states 
is populated. See FIESTA::ref_statecd for reference to RS and states.</p></dd>


<dt>xy_datsource</dt>
<dd><p>Source of XY data ('datamart', 'sqlite', 'obj', 'csv').</p></dd>


<dt>xy_dsn</dt>
<dd><p>If datsource='sqlite', the file name (data source name) of
the sqlite database (*.db) where XY data reside.</p></dd>


<dt>xy</dt>
<dd><p>sf R object or String. If xy_dsn = 'datamart', name of xy table 
in FIA DataMart. If xy_dsn = 'sqlite', name of xy layer in database. If 
datsource = 'csv', full pathname of xy CSV file(s). If datsource = 'obj', 
name of xy R object. If datsource = 'shp', full pathname of shapefile.</p></dd>


<dt>xy_opts</dt>
<dd><p>List of xy data options for xy (e.g., xy_opts = list(xvar='LON', 
yvar='LAT'). See xy_options() for more options and defaults.</p></dd>


<dt>datsource</dt>
<dd><p>String. Source of FIA data for defining FIA evaluations or 
appending variables ('datamart', 'sqlite', 'obj', 'csv'). If datsource = NULL, 
datsource = xy_datsource. If datsource = 'datamart', data are downloaded
extracted from FIA DataMart (http://apps.fs.usda.gov/fia/datamart/datamart.html). 
If datsource='sqlite', specify database name(s) in data_dsn and table name(s) 
in dbTabs() argument. If datsource = ('obj','csv'), specify *.csv file name in 
dbTabs argument.</p></dd>


<dt>data_dsn</dt>
<dd><p>String. Name of database with plot_layer and/or ppsa_layer.</p></dd>


<dt>dbTabs</dt>
<dd><p>String or R Object. If data_dsn = 'datamart', name of table(s) 
in FIA DataMart. If data_dsn = 'sqlite', name of layer(s) in database. If 
datsource = 'csv', name of CSV file(s). If datsource = 'obj', name of R object.</p></dd>


<dt>pjoinid</dt>
<dd><p>String. Variable in plot table to join to XY data, if 
plot_layer is not NULL. Not necessary to be unique. If using most current 
XY coordinates, use identifier for a plot (e.g., PLOT_ID).</p></dd>


<dt>eval</dt>
<dd><p>String. Type of evaluation time frame for data extraction 
('FIA', 'custom'). See eval_opts for more further options.</p></dd>


<dt>eval_opts</dt>
<dd><p>List of evaluation options for 'FIA' or 'custom'
evaluations to determine the set of data returned. See help(eval_options)
for a list of options.</p></dd>


<dt>invtype</dt>
<dd><p>String. Type of FIA inventory to extract ('PERIODIC',
'ANNUAL').  Only one inventory type (PERIODIC/ANNUAL) at a time.</p></dd>


<dt>coordType</dt>
<dd><p>String. c('PUBLIC', 'ACTUAL'). Defines type of coordinates and is
used for the output name.</p></dd>


<dt>intensity1</dt>
<dd><p>Logical. If TRUE, includes only XY coordinates where 
INTENSITY = 1 (FIA base grid).</p></dd>


<dt>pvars2keep</dt>
<dd><p>String vector. One or more variables in plot_layer to append 
to output.</p></dd>


<dt>issp</dt>
<dd><p>Logical. If TRUE, returns spatial XY data as a list object with
query.</p></dd>


<dt>returndata</dt>
<dd><p>Logical. If TRUE, returns XY data as a list object with
query.</p></dd>


<dt>savedata</dt>
<dd><p>Logical. If TRUE, saves XY data. Specify outfolder and 
format using savedata_opts.</p></dd>


<dt>exportsp</dt>
<dd><p>Logical. If TRUE, exports data as spatial.</p></dd>


<dt>savedata_opts</dt>
<dd><p>List. See help(savedata_options()) for a list
of options. Only used when savedata = TRUE or exportsp = TRUE.</p></dd>


<dt>PLOT</dt>
<dd><p>Data frame. The name of the PLOT data frame object if 
it is already downloaded and stored in environment.</p></dd>


<dt>POP_PLOT_STRATUM_ASSGN</dt>
<dd><p>Data frame. The name of the 
POP_PLOT_STRATUM_ASSGN data frame object if it is already downloaded 
and stored in environment.</p></dd>


<dt>SURVEY</dt>
<dd><p>Data frame. The name of the SURVEY data frame object
if it has been already downloaded and stored in environment.</p></dd>


<dt>dbconnopen</dt>
<dd><p>Logical. If TRUE, the dbconn connection is not closed.</p></dd>


<dt>evalInfo</dt>
<dd><p>List. List object output from DBgetEvalid or DBgetXY 
FIESTA functions.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>if returndata=TRUE, a list of the following objects:</p>
<dl><dt>xy</dt>
<dd><p>Data frame. XY data from database. The output name is based on
coordType parameter (e.g., xy_PUBLIC). the data frame include xy.uniqueid,
xvar, yvar and appended plot variables in pvars2keep if plot_layer is not 
NULL. The default plot variables included are 'STATECD','UNITCD','COUNTYCD',
'PLOT','PLOT_ID' (ID+STATECD+UNTCD+COUNTYCD+PLOT), 'COUNTYFIPS'. 
If issp=TRUE, returns an sf object.</p></dd>

<dt>xyqry</dt>
<dd><p>String. Query to extract coordinates.</p></dd>

<dt>xvar</dt>
<dd><p>String. Name of X variable in xy*.</p></dd>

<dt>yvar</dt>
<dd><p>String. Name of Y variable in xy*.</p></dd>


</dl><p>If savedata=TRUE, outputs the xy* based on savedata_opts. 
If exportsp=TRUE, the output xy saved as spatial layer based on savedata_opts.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>If no parameters are included, the user is prompted for input. If partial
parameters, the default parameter values are used for those not specified.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Tracey S. Frescino</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Most current evaluation and shapefile with public coordinates</span></span></span>
<span class="r-in"><span><span class="va">COxylst</span> <span class="op">&lt;-</span> <span class="fu">DBgetXY</span><span class="op">(</span>states <span class="op">=</span> <span class="st">"Colorado"</span>,</span></span>
<span class="r-in"><span>                   eval <span class="op">=</span> <span class="st">"FIA"</span>,</span></span>
<span class="r-in"><span>                   eval_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/FIESTAutils/man/eval_options.html" class="external-link">eval_options</a></span><span class="op">(</span>Endyr <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">COxylst</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">COxylst</span><span class="op">$</span><span class="va">xy_PUBLIC</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">COxylst</span><span class="op">$</span><span class="va">xyqry</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Tracey Frescino, Gretchen Moisen, Paul Patterson, Chris Toney, Grayson White.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

